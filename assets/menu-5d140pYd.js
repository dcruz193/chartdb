import{r as i,j as n,m as jr,s as Ge,t as St,v as ze,w as ge,x as Ke,y as z,n as rt,z as cl,R as j,b as D,P as Cr,A as dl,T as ie,e as le,f as ce,B as ul,q as fl,p as Nr,C as pl,D as hl,S as Kt,E as ml,u as xl}from"./index-D22tuFcn.js";import{a0 as Sr,a1 as hs,a2 as gl,a3 as ms,a4 as bl,a5 as vl,a6 as wl,a7 as yl,a8 as jl,a9 as Cl,aa as Nl,ab as Sl,ac as _l,ad as Rl,ae as xn,af as Ml,ag as _r,ah as xs,ai as Rr,aj as Mr,ak as Dr,al as Ir,am as kr,an as Er,ao as Tr,ap as Ar,aq as Pr,ar as Or,as as Lr,at as $r,au as zr,av as Fr,aw as Br,C as Vr,ax as Hr,b as ne,m as gn,c as ee,d as _t,u as he,n as Rt,s as bn,t as Ct,ay as Dl,az as tt,I as _e,Y as gs,aA as vn,v as wn,aB as Il,aC as Fn,aD as kl,aE as El,aF as Tl,w as Al,aG as Gr,O as Pl,W as Kr,aH as Ol,aI as Ll,aJ as $l,aK as zl,aL as Ur,aM as Fl,aN as Bl,x as Vl,l as Hl}from"./canvas-utils-C5DtV3-P.js";import{V as Gl,h as or,F as Un,i as Wr,j as Kl,k as bs,l as vs,n as ws,S as yn,o as Ul,p as Wl,q as ql,s as Yl,r as Xl,u as jn,X as qr,v as Yr,w as Xr,x as Ql,R as Zl,P as Jl,C as Qr,y as ec,T as Zr,D as Jr,O as ea,z as tc,A as nc,B as sc}from"./code-editor-CVERTBtE.js";import{P as Y,B as q,L as at,l as rc,b as ac}from"./label-DEegoE4u.js";import{a as Re,d as Wn,c as ta,u as oc,k as mt,K as xt}from"./theme-provider-qAUrzat1.js";import{G as ys,b as js,e as ic,S as Nt,T as na}from"./canvas-FyVWAmZ1.js";import{c as lc,u as Cn,C as cc,a as dc,b as Ie}from"./databases-C9KYyYJn.js";import{D as W}from"./database-type-C2NNW5SW.js";import{d as uc,a as fc,s as pc}from"./storage-provider-DM7k1KMT.js";import"./env-B5QThsD5.js";/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hc=Re("ArrowLeftRight",[["path",{d:"M8 3 4 7l4 4",key:"9rb6wj"}],["path",{d:"M4 7h16",key:"6tx8e3"}],["path",{d:"m16 21 4-4-4-4",key:"siv7j2"}],["path",{d:"M20 17H4",key:"h6l3hr"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mc=Re("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xc=Re("ChevronsLeftRightEllipsis",[["path",{d:"m18 8 4 4-4 4",key:"1ak13k"}],["path",{d:"m6 8-4 4 4 4",key:"15zrgr"}],["path",{d:"M8 12h.01",key:"czm47f"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M16 12h.01",key:"1l6xoz"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nn=Re("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sa=Re("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qn=Re("FileKey2",[["path",{d:"M4 22h14a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v6",key:"rc0qvx"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["circle",{cx:"4",cy:"16",r:"2",key:"1ehqvc"}],["path",{d:"m10 10-4.5 4.5",key:"7fwrp6"}],["path",{d:"m9 11 1 1",key:"wa6s5q"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gc=Re("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ra=Re("ListCollapse",[["path",{d:"m3 10 2.5-2.5L3 5",key:"i6eama"}],["path",{d:"m3 19 2.5-2.5L3 14",key:"w2gmor"}],["path",{d:"M10 6h11",key:"c7qv1k"}],["path",{d:"M10 12h11",key:"6m4ad9"}],["path",{d:"M10 18h11",key:"11hvi2"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bc=Re("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const an=Re("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vc=Re("SquareStack",[["path",{d:"M4 10c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h4c1.1 0 2 .9 2 2",key:"4i38lg"}],["path",{d:"M10 16c-1.1 0-2-.9-2-2v-4c0-1.1.9-2 2-2h4c1.1 0 2 .9 2 2",key:"mlte4a"}],["rect",{width:"8",height:"8",x:"14",y:"14",rx:"2",key:"1fa9i4"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wc=Re("Twitter",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]]);var aa=i.forwardRef((e,t)=>{const{children:s,...r}=e,a=i.Children.toArray(s),o=a.find(jc);if(o){const l=o.props.children,c=a.map(d=>d===o?i.Children.count(l)>1?i.Children.only(null):i.isValidElement(l)?l.props.children:null:d);return n.jsx(Yn,{...r,ref:t,children:i.isValidElement(l)?i.cloneElement(l,void 0,c):null})}return n.jsx(Yn,{...r,ref:t,children:s})});aa.displayName="Slot";var Yn=i.forwardRef((e,t)=>{const{children:s,...r}=e;if(i.isValidElement(s)){const a=Nc(s);return i.cloneElement(s,{...Cc(r,s.props),ref:t?jr(t,a):a})}return i.Children.count(s)>1?i.Children.only(null):null});Yn.displayName="SlotClone";var yc=({children:e})=>n.jsx(n.Fragment,{children:e});function jc(e){return i.isValidElement(e)&&e.type===yc}function Cc(e,t){const s={...t};for(const r in t){const a=e[r],o=t[r];/^on[A-Z]/.test(r)?a&&o?s[r]=(...c)=>{o(...c),a(...c)}:a&&(s[r]=a):r==="style"?s[r]={...a,...o}:r==="className"&&(s[r]=[a,o].filter(Boolean).join(" "))}return{...e,...s}}function Nc(e){var r,a;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,s=t&&"isReactWarning"in t&&t.isReactWarning;return s?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,s=t&&"isReactWarning"in t&&t.isReactWarning,s?e.props.ref:e.props.ref||e.ref)}function oa(e){const t=i.useRef({value:e,previous:e});return i.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var Sc=[" ","Enter","ArrowUp","ArrowDown"],_c=[" ","Enter"],Ut="Select",[Sn,_n,Rc]=ms(Ut),[Mt,ah]=St(Ut,[Rc,Sr]),Rn=Sr(),[Mc,nt]=Mt(Ut),[Dc,Ic]=Mt(Ut),ia=e=>{const{__scopeSelect:t,children:s,open:r,defaultOpen:a,onOpenChange:o,value:l,defaultValue:c,onValueChange:d,dir:u,name:f,autoComplete:p,disabled:x,required:h,form:v}=e,m=Rn(t),[b,y]=i.useState(null),[g,w]=i.useState(null),[C,S]=i.useState(!1),_=hs(u),[R=!1,M]=Ge({prop:r,defaultProp:a,onChange:o}),[T,N]=Ge({prop:l,defaultProp:c,onChange:d}),I=i.useRef(null),P=b?v||!!b.closest("form"):!0,[L,A]=i.useState(new Set),V=Array.from(L).map(G=>G.props.value).join(";");return n.jsx(gl,{...m,children:n.jsxs(Mc,{required:h,scope:t,trigger:b,onTriggerChange:y,valueNode:g,onValueNodeChange:w,valueNodeHasChildren:C,onValueNodeHasChildrenChange:S,contentId:ze(),value:T,onValueChange:N,open:R,onOpenChange:M,dir:_,triggerPointerDownPosRef:I,disabled:x,children:[n.jsx(Sn.Provider,{scope:t,children:n.jsx(Dc,{scope:e.__scopeSelect,onNativeOptionAdd:i.useCallback(G=>{A(K=>new Set(K).add(G))},[]),onNativeOptionRemove:i.useCallback(G=>{A(K=>{const se=new Set(K);return se.delete(G),se})},[]),children:s})}),P?n.jsxs(Ta,{"aria-hidden":!0,required:h,tabIndex:-1,name:f,autoComplete:p,value:T,onChange:G=>N(G.target.value),disabled:x,form:v,children:[T===void 0?n.jsx("option",{value:""}):null,Array.from(L)]},V):null]})})};ia.displayName=Ut;var la="SelectTrigger",ca=i.forwardRef((e,t)=>{const{__scopeSelect:s,disabled:r=!1,...a}=e,o=Rn(s),l=nt(la,s),c=l.disabled||r,d=ge(t,l.onTriggerChange),u=_n(s),f=i.useRef("touch"),[p,x,h]=Aa(m=>{const b=u().filter(w=>!w.disabled),y=b.find(w=>w.value===l.value),g=Pa(b,m,y);g!==void 0&&l.onValueChange(g.value)}),v=m=>{c||(l.onOpenChange(!0),h()),m&&(l.triggerPointerDownPosRef.current={x:Math.round(m.pageX),y:Math.round(m.pageY)})};return n.jsx(bl,{asChild:!0,...o,children:n.jsx(Y.button,{type:"button",role:"combobox","aria-controls":l.contentId,"aria-expanded":l.open,"aria-required":l.required,"aria-autocomplete":"none",dir:l.dir,"data-state":l.open?"open":"closed",disabled:c,"data-disabled":c?"":void 0,"data-placeholder":Ea(l.value)?"":void 0,...a,ref:d,onClick:z(a.onClick,m=>{m.currentTarget.focus(),f.current!=="mouse"&&v(m)}),onPointerDown:z(a.onPointerDown,m=>{f.current=m.pointerType;const b=m.target;b.hasPointerCapture(m.pointerId)&&b.releasePointerCapture(m.pointerId),m.button===0&&m.ctrlKey===!1&&m.pointerType==="mouse"&&(v(m),m.preventDefault())}),onKeyDown:z(a.onKeyDown,m=>{const b=p.current!=="";!(m.ctrlKey||m.altKey||m.metaKey)&&m.key.length===1&&x(m.key),!(b&&m.key===" ")&&Sc.includes(m.key)&&(v(),m.preventDefault())})})})});ca.displayName=la;var da="SelectValue",ua=i.forwardRef((e,t)=>{const{__scopeSelect:s,className:r,style:a,children:o,placeholder:l="",...c}=e,d=nt(da,s),{onValueNodeHasChildrenChange:u}=d,f=o!==void 0,p=ge(t,d.onValueNodeChange);return Ke(()=>{u(f)},[u,f]),n.jsx(Y.span,{...c,ref:p,style:{pointerEvents:"none"},children:Ea(d.value)?n.jsx(n.Fragment,{children:l}):o})});ua.displayName=da;var kc="SelectIcon",fa=i.forwardRef((e,t)=>{const{__scopeSelect:s,children:r,...a}=e;return n.jsx(Y.span,{"aria-hidden":!0,...a,ref:t,children:r||"▼"})});fa.displayName=kc;var Ec="SelectPortal",pa=e=>n.jsx(vl,{asChild:!0,...e});pa.displayName=Ec;var ct="SelectContent",ha=i.forwardRef((e,t)=>{const s=nt(ct,e.__scopeSelect),[r,a]=i.useState();if(Ke(()=>{a(new DocumentFragment)},[]),!s.open){const o=r;return o?rt.createPortal(n.jsx(ma,{scope:e.__scopeSelect,children:n.jsx(Sn.Slot,{scope:e.__scopeSelect,children:n.jsx("div",{children:e.children})})}),o):null}return n.jsx(xa,{...e,ref:t})});ha.displayName=ct;var Ee=10,[ma,st]=Mt(ct),Tc="SelectContentImpl",xa=i.forwardRef((e,t)=>{const{__scopeSelect:s,position:r="item-aligned",onCloseAutoFocus:a,onEscapeKeyDown:o,onPointerDownOutside:l,side:c,sideOffset:d,align:u,alignOffset:f,arrowPadding:p,collisionBoundary:x,collisionPadding:h,sticky:v,hideWhenDetached:m,avoidCollisions:b,...y}=e,g=nt(ct,s),[w,C]=i.useState(null),[S,_]=i.useState(null),R=ge(t,E=>C(E)),[M,T]=i.useState(null),[N,I]=i.useState(null),P=_n(s),[L,A]=i.useState(!1),V=i.useRef(!1);i.useEffect(()=>{if(w)return wl(w)},[w]),yl();const G=i.useCallback(E=>{const[F,...U]=P().map(O=>O.ref.current),[k]=U.slice(-1),B=document.activeElement;for(const O of E)if(O===B||(O==null||O.scrollIntoView({block:"nearest"}),O===F&&S&&(S.scrollTop=0),O===k&&S&&(S.scrollTop=S.scrollHeight),O==null||O.focus(),document.activeElement!==B))return},[P,S]),K=i.useCallback(()=>G([M,w]),[G,M,w]);i.useEffect(()=>{L&&K()},[L,K]);const{onOpenChange:se,triggerPointerDownPosRef:X}=g;i.useEffect(()=>{if(w){let E={x:0,y:0};const F=k=>{var B,O;E={x:Math.abs(Math.round(k.pageX)-(((B=X.current)==null?void 0:B.x)??0)),y:Math.abs(Math.round(k.pageY)-(((O=X.current)==null?void 0:O.y)??0))}},U=k=>{E.x<=10&&E.y<=10?k.preventDefault():w.contains(k.target)||se(!1),document.removeEventListener("pointermove",F),X.current=null};return X.current!==null&&(document.addEventListener("pointermove",F),document.addEventListener("pointerup",U,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",F),document.removeEventListener("pointerup",U,{capture:!0})}}},[w,se,X]),i.useEffect(()=>{const E=()=>se(!1);return window.addEventListener("blur",E),window.addEventListener("resize",E),()=>{window.removeEventListener("blur",E),window.removeEventListener("resize",E)}},[se]);const[Me,De]=Aa(E=>{const F=P().filter(B=>!B.disabled),U=F.find(B=>B.ref.current===document.activeElement),k=Pa(F,E,U);k&&setTimeout(()=>k.ref.current.focus())}),Q=i.useCallback((E,F,U)=>{const k=!V.current&&!U;(g.value!==void 0&&g.value===F||k)&&(T(E),k&&(V.current=!0))},[g.value]),pe=i.useCallback(()=>w==null?void 0:w.focus(),[w]),de=i.useCallback((E,F,U)=>{const k=!V.current&&!U;(g.value!==void 0&&g.value===F||k)&&I(E)},[g.value]),je=r==="popper"?Xn:ga,Z=je===Xn?{side:c,sideOffset:d,align:u,alignOffset:f,arrowPadding:p,collisionBoundary:x,collisionPadding:h,sticky:v,hideWhenDetached:m,avoidCollisions:b}:{};return n.jsx(ma,{scope:s,content:w,viewport:S,onViewportChange:_,itemRefCallback:Q,selectedItem:M,onItemLeave:pe,itemTextRefCallback:de,focusSelectedItem:K,selectedItemText:N,position:r,isPositioned:L,searchRef:Me,children:n.jsx(jl,{as:aa,allowPinchZoom:!0,children:n.jsx(Cl,{asChild:!0,trapped:g.open,onMountAutoFocus:E=>{E.preventDefault()},onUnmountAutoFocus:z(a,E=>{var F;(F=g.trigger)==null||F.focus({preventScroll:!0}),E.preventDefault()}),children:n.jsx(Nl,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:o,onPointerDownOutside:l,onFocusOutside:E=>E.preventDefault(),onDismiss:()=>g.onOpenChange(!1),children:n.jsx(je,{role:"listbox",id:g.contentId,"data-state":g.open?"open":"closed",dir:g.dir,onContextMenu:E=>E.preventDefault(),...y,...Z,onPlaced:()=>A(!0),ref:R,style:{display:"flex",flexDirection:"column",outline:"none",...y.style},onKeyDown:z(y.onKeyDown,E=>{const F=E.ctrlKey||E.altKey||E.metaKey;if(E.key==="Tab"&&E.preventDefault(),!F&&E.key.length===1&&De(E.key),["ArrowUp","ArrowDown","Home","End"].includes(E.key)){let k=P().filter(B=>!B.disabled).map(B=>B.ref.current);if(["ArrowUp","End"].includes(E.key)&&(k=k.slice().reverse()),["ArrowUp","ArrowDown"].includes(E.key)){const B=E.target,O=k.indexOf(B);k=k.slice(O+1)}setTimeout(()=>G(k)),E.preventDefault()}})})})})})})});xa.displayName=Tc;var Ac="SelectItemAlignedPosition",ga=i.forwardRef((e,t)=>{const{__scopeSelect:s,onPlaced:r,...a}=e,o=nt(ct,s),l=st(ct,s),[c,d]=i.useState(null),[u,f]=i.useState(null),p=ge(t,R=>f(R)),x=_n(s),h=i.useRef(!1),v=i.useRef(!0),{viewport:m,selectedItem:b,selectedItemText:y,focusSelectedItem:g}=l,w=i.useCallback(()=>{if(o.trigger&&o.valueNode&&c&&u&&m&&b&&y){const R=o.trigger.getBoundingClientRect(),M=u.getBoundingClientRect(),T=o.valueNode.getBoundingClientRect(),N=y.getBoundingClientRect();if(o.dir!=="rtl"){const B=N.left-M.left,O=T.left-B,re=R.left-O,ae=R.width+re,Ae=Math.max(ae,M.width),Pe=window.innerWidth-Ee,ut=or(O,[Ee,Math.max(Ee,Pe-Ae)]);c.style.minWidth=ae+"px",c.style.left=ut+"px"}else{const B=M.right-N.right,O=window.innerWidth-T.right-B,re=window.innerWidth-R.right-O,ae=R.width+re,Ae=Math.max(ae,M.width),Pe=window.innerWidth-Ee,ut=or(O,[Ee,Math.max(Ee,Pe-Ae)]);c.style.minWidth=ae+"px",c.style.right=ut+"px"}const I=x(),P=window.innerHeight-Ee*2,L=m.scrollHeight,A=window.getComputedStyle(u),V=parseInt(A.borderTopWidth,10),G=parseInt(A.paddingTop,10),K=parseInt(A.borderBottomWidth,10),se=parseInt(A.paddingBottom,10),X=V+G+L+se+K,Me=Math.min(b.offsetHeight*5,X),De=window.getComputedStyle(m),Q=parseInt(De.paddingTop,10),pe=parseInt(De.paddingBottom,10),de=R.top+R.height/2-Ee,je=P-de,Z=b.offsetHeight/2,E=b.offsetTop+Z,F=V+G+E,U=X-F;if(F<=de){const B=I.length>0&&b===I[I.length-1].ref.current;c.style.bottom="0px";const O=u.clientHeight-m.offsetTop-m.offsetHeight,re=Math.max(je,Z+(B?pe:0)+O+K),ae=F+re;c.style.height=ae+"px"}else{const B=I.length>0&&b===I[0].ref.current;c.style.top="0px";const re=Math.max(de,V+m.offsetTop+(B?Q:0)+Z)+U;c.style.height=re+"px",m.scrollTop=F-de+m.offsetTop}c.style.margin=`${Ee}px 0`,c.style.minHeight=Me+"px",c.style.maxHeight=P+"px",r==null||r(),requestAnimationFrame(()=>h.current=!0)}},[x,o.trigger,o.valueNode,c,u,m,b,y,o.dir,r]);Ke(()=>w(),[w]);const[C,S]=i.useState();Ke(()=>{u&&S(window.getComputedStyle(u).zIndex)},[u]);const _=i.useCallback(R=>{R&&v.current===!0&&(w(),g==null||g(),v.current=!1)},[w,g]);return n.jsx(Oc,{scope:s,contentWrapper:c,shouldExpandOnScrollRef:h,onScrollButtonChange:_,children:n.jsx("div",{ref:d,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:C},children:n.jsx(Y.div,{...a,ref:p,style:{boxSizing:"border-box",maxHeight:"100%",...a.style}})})})});ga.displayName=Ac;var Pc="SelectPopperPosition",Xn=i.forwardRef((e,t)=>{const{__scopeSelect:s,align:r="start",collisionPadding:a=Ee,...o}=e,l=Rn(s);return n.jsx(Sl,{...l,...o,ref:t,align:r,collisionPadding:a,style:{boxSizing:"border-box",...o.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Xn.displayName=Pc;var[Oc,Cs]=Mt(ct,{}),Qn="SelectViewport",ba=i.forwardRef((e,t)=>{const{__scopeSelect:s,nonce:r,...a}=e,o=st(Qn,s),l=Cs(Qn,s),c=ge(t,o.onViewportChange),d=i.useRef(0);return n.jsxs(n.Fragment,{children:[n.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),n.jsx(Sn.Slot,{scope:s,children:n.jsx(Y.div,{"data-radix-select-viewport":"",role:"presentation",...a,ref:c,style:{position:"relative",flex:1,overflow:"hidden auto",...a.style},onScroll:z(a.onScroll,u=>{const f=u.currentTarget,{contentWrapper:p,shouldExpandOnScrollRef:x}=l;if(x!=null&&x.current&&p){const h=Math.abs(d.current-f.scrollTop);if(h>0){const v=window.innerHeight-Ee*2,m=parseFloat(p.style.minHeight),b=parseFloat(p.style.height),y=Math.max(m,b);if(y<v){const g=y+h,w=Math.min(v,g),C=g-w;p.style.height=w+"px",p.style.bottom==="0px"&&(f.scrollTop=C>0?C:0,p.style.justifyContent="flex-end")}}}d.current=f.scrollTop})})})]})});ba.displayName=Qn;var va="SelectGroup",[Lc,$c]=Mt(va),wa=i.forwardRef((e,t)=>{const{__scopeSelect:s,...r}=e,a=ze();return n.jsx(Lc,{scope:s,id:a,children:n.jsx(Y.div,{role:"group","aria-labelledby":a,...r,ref:t})})});wa.displayName=va;var ya="SelectLabel",ja=i.forwardRef((e,t)=>{const{__scopeSelect:s,...r}=e,a=$c(ya,s);return n.jsx(Y.div,{id:a.id,...r,ref:t})});ja.displayName=ya;var dn="SelectItem",[zc,Ca]=Mt(dn),Na=i.forwardRef((e,t)=>{const{__scopeSelect:s,value:r,disabled:a=!1,textValue:o,...l}=e,c=nt(dn,s),d=st(dn,s),u=c.value===r,[f,p]=i.useState(o??""),[x,h]=i.useState(!1),v=ge(t,g=>{var w;return(w=d.itemRefCallback)==null?void 0:w.call(d,g,r,a)}),m=ze(),b=i.useRef("touch"),y=()=>{a||(c.onValueChange(r),c.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return n.jsx(zc,{scope:s,value:r,disabled:a,textId:m,isSelected:u,onItemTextChange:i.useCallback(g=>{p(w=>w||((g==null?void 0:g.textContent)??"").trim())},[]),children:n.jsx(Sn.ItemSlot,{scope:s,value:r,disabled:a,textValue:f,children:n.jsx(Y.div,{role:"option","aria-labelledby":m,"data-highlighted":x?"":void 0,"aria-selected":u&&x,"data-state":u?"checked":"unchecked","aria-disabled":a||void 0,"data-disabled":a?"":void 0,tabIndex:a?void 0:-1,...l,ref:v,onFocus:z(l.onFocus,()=>h(!0)),onBlur:z(l.onBlur,()=>h(!1)),onClick:z(l.onClick,()=>{b.current!=="mouse"&&y()}),onPointerUp:z(l.onPointerUp,()=>{b.current==="mouse"&&y()}),onPointerDown:z(l.onPointerDown,g=>{b.current=g.pointerType}),onPointerMove:z(l.onPointerMove,g=>{var w;b.current=g.pointerType,a?(w=d.onItemLeave)==null||w.call(d):b.current==="mouse"&&g.currentTarget.focus({preventScroll:!0})}),onPointerLeave:z(l.onPointerLeave,g=>{var w;g.currentTarget===document.activeElement&&((w=d.onItemLeave)==null||w.call(d))}),onKeyDown:z(l.onKeyDown,g=>{var C;((C=d.searchRef)==null?void 0:C.current)!==""&&g.key===" "||(_c.includes(g.key)&&y(),g.key===" "&&g.preventDefault())})})})})});Na.displayName=dn;var zt="SelectItemText",Sa=i.forwardRef((e,t)=>{const{__scopeSelect:s,className:r,style:a,...o}=e,l=nt(zt,s),c=st(zt,s),d=Ca(zt,s),u=Ic(zt,s),[f,p]=i.useState(null),x=ge(t,y=>p(y),d.onItemTextChange,y=>{var g;return(g=c.itemTextRefCallback)==null?void 0:g.call(c,y,d.value,d.disabled)}),h=f==null?void 0:f.textContent,v=i.useMemo(()=>n.jsx("option",{value:d.value,disabled:d.disabled,children:h},d.value),[d.disabled,d.value,h]),{onNativeOptionAdd:m,onNativeOptionRemove:b}=u;return Ke(()=>(m(v),()=>b(v)),[m,b,v]),n.jsxs(n.Fragment,{children:[n.jsx(Y.span,{id:d.textId,...o,ref:x}),d.isSelected&&l.valueNode&&!l.valueNodeHasChildren?rt.createPortal(o.children,l.valueNode):null]})});Sa.displayName=zt;var _a="SelectItemIndicator",Ra=i.forwardRef((e,t)=>{const{__scopeSelect:s,...r}=e;return Ca(_a,s).isSelected?n.jsx(Y.span,{"aria-hidden":!0,...r,ref:t}):null});Ra.displayName=_a;var Zn="SelectScrollUpButton",Ma=i.forwardRef((e,t)=>{const s=st(Zn,e.__scopeSelect),r=Cs(Zn,e.__scopeSelect),[a,o]=i.useState(!1),l=ge(t,r.onScrollButtonChange);return Ke(()=>{if(s.viewport&&s.isPositioned){let c=function(){const u=d.scrollTop>0;o(u)};const d=s.viewport;return c(),d.addEventListener("scroll",c),()=>d.removeEventListener("scroll",c)}},[s.viewport,s.isPositioned]),a?n.jsx(Ia,{...e,ref:l,onAutoScroll:()=>{const{viewport:c,selectedItem:d}=s;c&&d&&(c.scrollTop=c.scrollTop-d.offsetHeight)}}):null});Ma.displayName=Zn;var Jn="SelectScrollDownButton",Da=i.forwardRef((e,t)=>{const s=st(Jn,e.__scopeSelect),r=Cs(Jn,e.__scopeSelect),[a,o]=i.useState(!1),l=ge(t,r.onScrollButtonChange);return Ke(()=>{if(s.viewport&&s.isPositioned){let c=function(){const u=d.scrollHeight-d.clientHeight,f=Math.ceil(d.scrollTop)<u;o(f)};const d=s.viewport;return c(),d.addEventListener("scroll",c),()=>d.removeEventListener("scroll",c)}},[s.viewport,s.isPositioned]),a?n.jsx(Ia,{...e,ref:l,onAutoScroll:()=>{const{viewport:c,selectedItem:d}=s;c&&d&&(c.scrollTop=c.scrollTop+d.offsetHeight)}}):null});Da.displayName=Jn;var Ia=i.forwardRef((e,t)=>{const{__scopeSelect:s,onAutoScroll:r,...a}=e,o=st("SelectScrollButton",s),l=i.useRef(null),c=_n(s),d=i.useCallback(()=>{l.current!==null&&(window.clearInterval(l.current),l.current=null)},[]);return i.useEffect(()=>()=>d(),[d]),Ke(()=>{var f;const u=c().find(p=>p.ref.current===document.activeElement);(f=u==null?void 0:u.ref.current)==null||f.scrollIntoView({block:"nearest"})},[c]),n.jsx(Y.div,{"aria-hidden":!0,...a,ref:t,style:{flexShrink:0,...a.style},onPointerDown:z(a.onPointerDown,()=>{l.current===null&&(l.current=window.setInterval(r,50))}),onPointerMove:z(a.onPointerMove,()=>{var u;(u=o.onItemLeave)==null||u.call(o),l.current===null&&(l.current=window.setInterval(r,50))}),onPointerLeave:z(a.onPointerLeave,()=>{d()})})}),Fc="SelectSeparator",ka=i.forwardRef((e,t)=>{const{__scopeSelect:s,...r}=e;return n.jsx(Y.div,{"aria-hidden":!0,...r,ref:t})});ka.displayName=Fc;var es="SelectArrow",Bc=i.forwardRef((e,t)=>{const{__scopeSelect:s,...r}=e,a=Rn(s),o=nt(es,s),l=st(es,s);return o.open&&l.position==="popper"?n.jsx(_l,{...a,...r,ref:t}):null});Bc.displayName=es;function Ea(e){return e===""||e===void 0}var Ta=i.forwardRef((e,t)=>{const{value:s,...r}=e,a=i.useRef(null),o=ge(t,a),l=oa(s);return i.useEffect(()=>{const c=a.current,d=window.HTMLSelectElement.prototype,f=Object.getOwnPropertyDescriptor(d,"value").set;if(l!==s&&f){const p=new Event("change",{bubbles:!0});f.call(c,s),c.dispatchEvent(p)}},[l,s]),n.jsx(Gl,{asChild:!0,children:n.jsx("select",{...r,ref:o,defaultValue:s})})});Ta.displayName="BubbleSelect";function Aa(e){const t=cl(e),s=i.useRef(""),r=i.useRef(0),a=i.useCallback(l=>{const c=s.current+l;t(c),function d(u){s.current=u,window.clearTimeout(r.current),u!==""&&(r.current=window.setTimeout(()=>d(""),1e3))}(c)},[t]),o=i.useCallback(()=>{s.current="",window.clearTimeout(r.current)},[]);return i.useEffect(()=>()=>window.clearTimeout(r.current),[]),[s,a,o]}function Pa(e,t,s){const a=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,o=s?e.indexOf(s):-1;let l=Vc(e,Math.max(o,0));a.length===1&&(l=l.filter(u=>u!==s));const d=l.find(u=>u.textValue.toLowerCase().startsWith(a.toLowerCase()));return d!==s?d:void 0}function Vc(e,t){return e.map((s,r)=>e[(t+r)%e.length])}var Hc=ia,Oa=ca,Gc=ua,Kc=fa,Uc=pa,La=ha,Wc=ba,qc=wa,$a=ja,za=Na,Yc=Sa,Xc=Ra,Fa=Ma,Ba=Da,Va=ka;const Ha=Hc,Ga=qc,Ka=Gc,Ns=j.forwardRef(({className:e,children:t,...s},r)=>n.jsxs(Oa,{ref:r,className:D("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...s,children:[t,n.jsx(Kc,{asChild:!0,children:n.jsx(Rl,{className:"size-4 opacity-50"})})]}));Ns.displayName=Oa.displayName;const Ua=j.forwardRef(({className:e,...t},s)=>n.jsx(Fa,{ref:s,className:D("flex cursor-default items-center justify-center py-1",e),...t,children:n.jsx(Ml,{})}));Ua.displayName=Fa.displayName;const Wa=j.forwardRef(({className:e,...t},s)=>n.jsx(Ba,{ref:s,className:D("flex cursor-default items-center justify-center py-1",e),...t,children:n.jsx(_r,{})}));Wa.displayName=Ba.displayName;const Ss=j.forwardRef(({className:e,children:t,position:s="popper",...r},a)=>n.jsx(Uc,{children:n.jsxs(La,{ref:a,className:D("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:s,...r,children:[n.jsx(Ua,{}),n.jsx(Wc,{className:D("p-1",s==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),n.jsx(Wa,{})]})}));Ss.displayName=La.displayName;const Qc=j.forwardRef(({className:e,...t},s)=>n.jsx($a,{ref:s,className:D("px-2 py-1.5 text-sm font-semibold",e),...t}));Qc.displayName=$a.displayName;const Ve=j.forwardRef(({className:e,children:t,...s},r)=>n.jsxs(za,{ref:r,className:D("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...s,children:[n.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:n.jsx(Xc,{children:n.jsx(xn,{className:"size-4"})})}),n.jsx(Yc,{children:t})]}));Ve.displayName=za.displayName;const Zc=j.forwardRef(({className:e,...t},s)=>n.jsx(Va,{ref:s,className:D("-mx-1 my-1 h-px bg-muted",e),...t}));Zc.displayName=Va.displayName;var _s="Collapsible",[Jc,qa]=St(_s),[ed,Rs]=Jc(_s),Ya=i.forwardRef((e,t)=>{const{__scopeCollapsible:s,open:r,defaultOpen:a,disabled:o,onOpenChange:l,...c}=e,[d=!1,u]=Ge({prop:r,defaultProp:a,onChange:l});return n.jsx(ed,{scope:s,disabled:o,contentId:ze(),open:d,onOpenToggle:i.useCallback(()=>u(f=>!f),[u]),children:n.jsx(Y.div,{"data-state":Ds(d),"data-disabled":o?"":void 0,...c,ref:t})})});Ya.displayName=_s;var Xa="CollapsibleTrigger",Qa=i.forwardRef((e,t)=>{const{__scopeCollapsible:s,...r}=e,a=Rs(Xa,s);return n.jsx(Y.button,{type:"button","aria-controls":a.contentId,"aria-expanded":a.open||!1,"data-state":Ds(a.open),"data-disabled":a.disabled?"":void 0,disabled:a.disabled,...r,ref:t,onClick:z(e.onClick,a.onOpenToggle)})});Qa.displayName=Xa;var Ms="CollapsibleContent",Za=i.forwardRef((e,t)=>{const{forceMount:s,...r}=e,a=Rs(Ms,e.__scopeCollapsible);return n.jsx(Cr,{present:s||a.open,children:({present:o})=>n.jsx(td,{...r,ref:t,present:o})})});Za.displayName=Ms;var td=i.forwardRef((e,t)=>{const{__scopeCollapsible:s,present:r,children:a,...o}=e,l=Rs(Ms,s),[c,d]=i.useState(r),u=i.useRef(null),f=ge(t,u),p=i.useRef(0),x=p.current,h=i.useRef(0),v=h.current,m=l.open||c,b=i.useRef(m),y=i.useRef(void 0);return i.useEffect(()=>{const g=requestAnimationFrame(()=>b.current=!1);return()=>cancelAnimationFrame(g)},[]),Ke(()=>{const g=u.current;if(g){y.current=y.current||{transitionDuration:g.style.transitionDuration,animationName:g.style.animationName},g.style.transitionDuration="0s",g.style.animationName="none";const w=g.getBoundingClientRect();p.current=w.height,h.current=w.width,b.current||(g.style.transitionDuration=y.current.transitionDuration,g.style.animationName=y.current.animationName),d(r)}},[l.open,r]),n.jsx(Y.div,{"data-state":Ds(l.open),"data-disabled":l.disabled?"":void 0,id:l.contentId,hidden:!m,...o,ref:f,style:{"--radix-collapsible-content-height":x?`${x}px`:void 0,"--radix-collapsible-content-width":v?`${v}px`:void 0,...e.style},children:m&&a})});function Ds(e){return e?"open":"closed"}var nd=Ya,sd=Qa,rd=Za,Ue="Accordion",ad=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[Is,od,id]=ms(Ue),[Mn,oh]=St(Ue,[id,qa]),ks=qa(),Ja=j.forwardRef((e,t)=>{const{type:s,...r}=e,a=r,o=r;return n.jsx(Is.Provider,{scope:e.__scopeAccordion,children:s==="multiple"?n.jsx(ud,{...o,ref:t}):n.jsx(dd,{...a,ref:t})})});Ja.displayName=Ue;var[eo,ld]=Mn(Ue),[to,cd]=Mn(Ue,{collapsible:!1}),dd=j.forwardRef((e,t)=>{const{value:s,defaultValue:r,onValueChange:a=()=>{},collapsible:o=!1,...l}=e,[c,d]=Ge({prop:s,defaultProp:r,onChange:a});return n.jsx(eo,{scope:e.__scopeAccordion,value:c?[c]:[],onItemOpen:d,onItemClose:j.useCallback(()=>o&&d(""),[o,d]),children:n.jsx(to,{scope:e.__scopeAccordion,collapsible:o,children:n.jsx(no,{...l,ref:t})})})}),ud=j.forwardRef((e,t)=>{const{value:s,defaultValue:r,onValueChange:a=()=>{},...o}=e,[l=[],c]=Ge({prop:s,defaultProp:r,onChange:a}),d=j.useCallback(f=>c((p=[])=>[...p,f]),[c]),u=j.useCallback(f=>c((p=[])=>p.filter(x=>x!==f)),[c]);return n.jsx(eo,{scope:e.__scopeAccordion,value:l,onItemOpen:d,onItemClose:u,children:n.jsx(to,{scope:e.__scopeAccordion,collapsible:!0,children:n.jsx(no,{...o,ref:t})})})}),[fd,Dn]=Mn(Ue),no=j.forwardRef((e,t)=>{const{__scopeAccordion:s,disabled:r,dir:a,orientation:o="vertical",...l}=e,c=j.useRef(null),d=ge(c,t),u=od(s),p=hs(a)==="ltr",x=z(e.onKeyDown,h=>{var M;if(!ad.includes(h.key))return;const v=h.target,m=u().filter(T=>{var N;return!((N=T.ref.current)!=null&&N.disabled)}),b=m.findIndex(T=>T.ref.current===v),y=m.length;if(b===-1)return;h.preventDefault();let g=b;const w=0,C=y-1,S=()=>{g=b+1,g>C&&(g=w)},_=()=>{g=b-1,g<w&&(g=C)};switch(h.key){case"Home":g=w;break;case"End":g=C;break;case"ArrowRight":o==="horizontal"&&(p?S():_());break;case"ArrowDown":o==="vertical"&&S();break;case"ArrowLeft":o==="horizontal"&&(p?_():S());break;case"ArrowUp":o==="vertical"&&_();break}const R=g%y;(M=m[R].ref.current)==null||M.focus()});return n.jsx(fd,{scope:s,disabled:r,direction:a,orientation:o,children:n.jsx(Is.Slot,{scope:s,children:n.jsx(Y.div,{...l,"data-orientation":o,ref:d,onKeyDown:r?void 0:x})})})}),un="AccordionItem",[pd,Es]=Mn(un),so=j.forwardRef((e,t)=>{const{__scopeAccordion:s,value:r,...a}=e,o=Dn(un,s),l=ld(un,s),c=ks(s),d=ze(),u=r&&l.value.includes(r)||!1,f=o.disabled||e.disabled;return n.jsx(pd,{scope:s,open:u,disabled:f,triggerId:d,children:n.jsx(nd,{"data-orientation":o.orientation,"data-state":co(u),...c,...a,ref:t,disabled:f,open:u,onOpenChange:p=>{p?l.onItemOpen(r):l.onItemClose(r)}})})});so.displayName=un;var ro="AccordionHeader",ao=j.forwardRef((e,t)=>{const{__scopeAccordion:s,...r}=e,a=Dn(Ue,s),o=Es(ro,s);return n.jsx(Y.h3,{"data-orientation":a.orientation,"data-state":co(o.open),"data-disabled":o.disabled?"":void 0,...r,ref:t})});ao.displayName=ro;var ts="AccordionTrigger",oo=j.forwardRef((e,t)=>{const{__scopeAccordion:s,...r}=e,a=Dn(Ue,s),o=Es(ts,s),l=cd(ts,s),c=ks(s);return n.jsx(Is.ItemSlot,{scope:s,children:n.jsx(sd,{"aria-disabled":o.open&&!l.collapsible||void 0,"data-orientation":a.orientation,id:o.triggerId,...c,...r,ref:t})})});oo.displayName=ts;var io="AccordionContent",lo=j.forwardRef((e,t)=>{const{__scopeAccordion:s,...r}=e,a=Dn(Ue,s),o=Es(io,s),l=ks(s);return n.jsx(rd,{role:"region","aria-labelledby":o.triggerId,"data-orientation":a.orientation,...l,...r,ref:t,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...e.style}})});lo.displayName=io;function co(e){return e?"open":"closed"}var hd=Ja,md=so,xd=ao,uo=oo,fo=lo;const In=hd,ot=j.forwardRef(({className:e,...t},s)=>n.jsx(md,{ref:s,className:D("border-b",e),...t}));ot.displayName="AccordionItem";const it=j.forwardRef(({className:e,children:t,iconPosition:s="left",...r},a)=>{const o=()=>n.jsx(_r,{className:"size-4 shrink-0 text-muted-foreground transition-transform duration-200"});return n.jsx(xd,{className:"flex",children:n.jsx(uo,{ref:a,className:D("flex flex-1 items-center py-4 gap-x-2 text-sm font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180 justify-between",e),...r,children:r.asChild?n.jsxs("div",{className:"flex",children:[s==="left"?o():null,t,s==="right"?o():null]}):n.jsxs(n.Fragment,{children:[s==="left"?o():null,t,s==="right"?o():null]})})})});it.displayName=uo.displayName;const lt=j.forwardRef(({className:e,children:t,...s},r)=>n.jsx(fo,{ref:r,className:"overflow-hidden text-sm data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...s,children:n.jsx("div",{className:D("pb-4 pt-0",e),children:t})}));lt.displayName=fo.displayName;const xe=j.forwardRef((e,t)=>n.jsx(q,{ref:t,variant:"ghost",className:"size-8 p-2 text-slate-500 hover:cursor-pointer hover:bg-primary-foreground hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-200",asChild:!0,...e}));xe.displayName="ListItemHeaderButton";function gd(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return i.useMemo(()=>r=>{t.forEach(a=>a(r))},t)}const kn=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Dt(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function Ts(e){return"nodeType"in e}function be(e){var t,s;return e?Dt(e)?e:Ts(e)&&(t=(s=e.ownerDocument)==null?void 0:s.defaultView)!=null?t:window:window}function As(e){const{Document:t}=be(e);return e instanceof t}function Wt(e){return Dt(e)?!1:e instanceof be(e).HTMLElement}function po(e){return e instanceof be(e).SVGElement}function It(e){return e?Dt(e)?e.document:Ts(e)?As(e)?e:Wt(e)||po(e)?e.ownerDocument:document:document:document}const Fe=kn?i.useLayoutEffect:i.useEffect;function Ps(e){const t=i.useRef(e);return Fe(()=>{t.current=e}),i.useCallback(function(){for(var s=arguments.length,r=new Array(s),a=0;a<s;a++)r[a]=arguments[a];return t.current==null?void 0:t.current(...r)},[])}function bd(){const e=i.useRef(null),t=i.useCallback((r,a)=>{e.current=setInterval(r,a)},[]),s=i.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,s]}function Ht(e,t){t===void 0&&(t=[e]);const s=i.useRef(e);return Fe(()=>{s.current!==e&&(s.current=e)},t),s}function qt(e,t){const s=i.useRef();return i.useMemo(()=>{const r=e(s.current);return s.current=r,r},[...t])}function fn(e){const t=Ps(e),s=i.useRef(null),r=i.useCallback(a=>{a!==s.current&&(t==null||t(a,s.current)),s.current=a},[]);return[s,r]}function ns(e){const t=i.useRef();return i.useEffect(()=>{t.current=e},[e]),t.current}let Bn={};function Yt(e,t){return i.useMemo(()=>{if(t)return t;const s=Bn[e]==null?0:Bn[e]+1;return Bn[e]=s,e+"-"+s},[e,t])}function ho(e){return function(t){for(var s=arguments.length,r=new Array(s>1?s-1:0),a=1;a<s;a++)r[a-1]=arguments[a];return r.reduce((o,l)=>{const c=Object.entries(l);for(const[d,u]of c){const f=o[d];f!=null&&(o[d]=f+e*u)}return o},{...t})}}const jt=ho(1),pn=ho(-1);function vd(e){return"clientX"in e&&"clientY"in e}function Os(e){if(!e)return!1;const{KeyboardEvent:t}=be(e.target);return t&&e instanceof t}function wd(e){if(!e)return!1;const{TouchEvent:t}=be(e.target);return t&&e instanceof t}function ss(e){if(wd(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:s}=e.touches[0];return{x:t,y:s}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:s}=e.changedTouches[0];return{x:t,y:s}}}return vd(e)?{x:e.clientX,y:e.clientY}:null}const dt=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:s}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(s?Math.round(s):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:s}=e;return"scaleX("+t+") scaleY("+s+")"}},Transform:{toString(e){if(e)return[dt.Translate.toString(e),dt.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:s,easing:r}=e;return t+" "+s+"ms "+r}}}),ir="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function yd(e){return e.matches(ir)?e:e.querySelector(ir)}const jd={display:"none"};function Cd(e){let{id:t,value:s}=e;return j.createElement("div",{id:t,style:jd},s)}function Nd(e){let{id:t,announcement:s,ariaLiveType:r="assertive"}=e;const a={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return j.createElement("div",{id:t,style:a,role:"status","aria-live":r,"aria-atomic":!0},s)}function Sd(){const[e,t]=i.useState("");return{announce:i.useCallback(r=>{r!=null&&t(r)},[]),announcement:e}}const mo=i.createContext(null);function _d(e){const t=i.useContext(mo);i.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function Rd(){const[e]=i.useState(()=>new Set),t=i.useCallback(r=>(e.add(r),()=>e.delete(r)),[e]);return[i.useCallback(r=>{let{type:a,event:o}=r;e.forEach(l=>{var c;return(c=l[a])==null?void 0:c.call(l,o)})},[e]),t]}const Md={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},Dd={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:s}=e;return s?"Draggable item "+t.id+" was moved over droppable area "+s.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:s}=e;return s?"Draggable item "+t.id+" was dropped over droppable area "+s.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function Id(e){let{announcements:t=Dd,container:s,hiddenTextDescribedById:r,screenReaderInstructions:a=Md}=e;const{announce:o,announcement:l}=Sd(),c=Yt("DndLiveRegion"),[d,u]=i.useState(!1);if(i.useEffect(()=>{u(!0)},[]),_d(i.useMemo(()=>({onDragStart(p){let{active:x}=p;o(t.onDragStart({active:x}))},onDragMove(p){let{active:x,over:h}=p;t.onDragMove&&o(t.onDragMove({active:x,over:h}))},onDragOver(p){let{active:x,over:h}=p;o(t.onDragOver({active:x,over:h}))},onDragEnd(p){let{active:x,over:h}=p;o(t.onDragEnd({active:x,over:h}))},onDragCancel(p){let{active:x,over:h}=p;o(t.onDragCancel({active:x,over:h}))}}),[o,t])),!d)return null;const f=j.createElement(j.Fragment,null,j.createElement(Cd,{id:r,value:a.draggable}),j.createElement(Nd,{id:c,announcement:l}));return s?rt.createPortal(f,s):f}var J;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(J||(J={}));function hn(){}function Ls(e,t){return i.useMemo(()=>({sensor:e,options:{}}),[e,t])}function $s(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return i.useMemo(()=>[...t].filter(r=>r!=null),[...t])}const Te=Object.freeze({x:0,y:0});function kd(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function Ed(e,t){let{data:{value:s}}=e,{data:{value:r}}=t;return s-r}function Td(e,t){let{data:{value:s}}=e,{data:{value:r}}=t;return r-s}function Ad(e,t){if(!e||e.length===0)return null;const[s]=e;return s[t]}function lr(e,t,s){return t===void 0&&(t=e.left),s===void 0&&(s=e.top),{x:t+e.width*.5,y:s+e.height*.5}}const zs=e=>{let{collisionRect:t,droppableRects:s,droppableContainers:r}=e;const a=lr(t,t.left,t.top),o=[];for(const l of r){const{id:c}=l,d=s.get(c);if(d){const u=kd(lr(d),a);o.push({id:c,data:{droppableContainer:l,value:u}})}}return o.sort(Ed)};function Pd(e,t){const s=Math.max(t.top,e.top),r=Math.max(t.left,e.left),a=Math.min(t.left+t.width,e.left+e.width),o=Math.min(t.top+t.height,e.top+e.height),l=a-r,c=o-s;if(r<a&&s<o){const d=t.width*t.height,u=e.width*e.height,f=l*c,p=f/(d+u-f);return Number(p.toFixed(4))}return 0}const Od=e=>{let{collisionRect:t,droppableRects:s,droppableContainers:r}=e;const a=[];for(const o of r){const{id:l}=o,c=s.get(l);if(c){const d=Pd(c,t);d>0&&a.push({id:l,data:{droppableContainer:o,value:d}})}}return a.sort(Td)};function Ld(e,t,s){return{...e,scaleX:t&&s?t.width/s.width:1,scaleY:t&&s?t.height/s.height:1}}function xo(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:Te}function $d(e){return function(s){for(var r=arguments.length,a=new Array(r>1?r-1:0),o=1;o<r;o++)a[o-1]=arguments[o];return a.reduce((l,c)=>({...l,top:l.top+e*c.y,bottom:l.bottom+e*c.y,left:l.left+e*c.x,right:l.right+e*c.x}),{...s})}}const zd=$d(1);function Fd(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function Bd(e,t,s){const r=Fd(t);if(!r)return e;const{scaleX:a,scaleY:o,x:l,y:c}=r,d=e.left-l-(1-a)*parseFloat(s),u=e.top-c-(1-o)*parseFloat(s.slice(s.indexOf(" ")+1)),f=a?e.width/a:e.width,p=o?e.height/o:e.height;return{width:f,height:p,top:u,right:d+f,bottom:u+p,left:d}}const Vd={ignoreTransform:!1};function kt(e,t){t===void 0&&(t=Vd);let s=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:u,transformOrigin:f}=be(e).getComputedStyle(e);u&&(s=Bd(s,u,f))}const{top:r,left:a,width:o,height:l,bottom:c,right:d}=s;return{top:r,left:a,width:o,height:l,bottom:c,right:d}}function cr(e){return kt(e,{ignoreTransform:!0})}function Hd(e){const t=e.innerWidth,s=e.innerHeight;return{top:0,left:0,right:t,bottom:s,width:t,height:s}}function Gd(e,t){return t===void 0&&(t=be(e).getComputedStyle(e)),t.position==="fixed"}function Kd(e,t){t===void 0&&(t=be(e).getComputedStyle(e));const s=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(a=>{const o=t[a];return typeof o=="string"?s.test(o):!1})}function Fs(e,t){const s=[];function r(a){if(t!=null&&s.length>=t||!a)return s;if(As(a)&&a.scrollingElement!=null&&!s.includes(a.scrollingElement))return s.push(a.scrollingElement),s;if(!Wt(a)||po(a)||s.includes(a))return s;const o=be(e).getComputedStyle(a);return a!==e&&Kd(a,o)&&s.push(a),Gd(a,o)?s:r(a.parentNode)}return e?r(e):s}function go(e){const[t]=Fs(e,1);return t??null}function Vn(e){return!kn||!e?null:Dt(e)?e:Ts(e)?As(e)||e===It(e).scrollingElement?window:Wt(e)?e:null:null}function bo(e){return Dt(e)?e.scrollX:e.scrollLeft}function vo(e){return Dt(e)?e.scrollY:e.scrollTop}function rs(e){return{x:bo(e),y:vo(e)}}var te;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(te||(te={}));function wo(e){return!kn||!e?!1:e===document.scrollingElement}function yo(e){const t={x:0,y:0},s=wo(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},r={x:e.scrollWidth-s.width,y:e.scrollHeight-s.height},a=e.scrollTop<=t.y,o=e.scrollLeft<=t.x,l=e.scrollTop>=r.y,c=e.scrollLeft>=r.x;return{isTop:a,isLeft:o,isBottom:l,isRight:c,maxScroll:r,minScroll:t}}const Ud={x:.2,y:.2};function Wd(e,t,s,r,a){let{top:o,left:l,right:c,bottom:d}=s;r===void 0&&(r=10),a===void 0&&(a=Ud);const{isTop:u,isBottom:f,isLeft:p,isRight:x}=yo(e),h={x:0,y:0},v={x:0,y:0},m={height:t.height*a.y,width:t.width*a.x};return!u&&o<=t.top+m.height?(h.y=te.Backward,v.y=r*Math.abs((t.top+m.height-o)/m.height)):!f&&d>=t.bottom-m.height&&(h.y=te.Forward,v.y=r*Math.abs((t.bottom-m.height-d)/m.height)),!x&&c>=t.right-m.width?(h.x=te.Forward,v.x=r*Math.abs((t.right-m.width-c)/m.width)):!p&&l<=t.left+m.width&&(h.x=te.Backward,v.x=r*Math.abs((t.left+m.width-l)/m.width)),{direction:h,speed:v}}function qd(e){if(e===document.scrollingElement){const{innerWidth:o,innerHeight:l}=window;return{top:0,left:0,right:o,bottom:l,width:o,height:l}}const{top:t,left:s,right:r,bottom:a}=e.getBoundingClientRect();return{top:t,left:s,right:r,bottom:a,width:e.clientWidth,height:e.clientHeight}}function jo(e){return e.reduce((t,s)=>jt(t,rs(s)),Te)}function Yd(e){return e.reduce((t,s)=>t+bo(s),0)}function Xd(e){return e.reduce((t,s)=>t+vo(s),0)}function Qd(e,t){if(t===void 0&&(t=kt),!e)return;const{top:s,left:r,bottom:a,right:o}=t(e);go(e)&&(a<=0||o<=0||s>=window.innerHeight||r>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const Zd=[["x",["left","right"],Yd],["y",["top","bottom"],Xd]];class Bs{constructor(t,s){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=Fs(s),a=jo(r);this.rect={...t},this.width=t.width,this.height=t.height;for(const[o,l,c]of Zd)for(const d of l)Object.defineProperty(this,d,{get:()=>{const u=c(r),f=a[o]-u;return this.rect[d]+f},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Ft{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(s=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...s)})},this.target=t}add(t,s,r){var a;(a=this.target)==null||a.addEventListener(t,s,r),this.listeners.push([t,s,r])}}function Jd(e){const{EventTarget:t}=be(e);return e instanceof t?e:It(e)}function Hn(e,t){const s=Math.abs(e.x),r=Math.abs(e.y);return typeof t=="number"?Math.sqrt(s**2+r**2)>t:"x"in t&&"y"in t?s>t.x&&r>t.y:"x"in t?s>t.x:"y"in t?r>t.y:!1}var Se;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(Se||(Se={}));function dr(e){e.preventDefault()}function eu(e){e.stopPropagation()}var H;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(H||(H={}));const Co={start:[H.Space,H.Enter],cancel:[H.Esc],end:[H.Space,H.Enter,H.Tab]},tu=(e,t)=>{let{currentCoordinates:s}=t;switch(e.code){case H.Right:return{...s,x:s.x+25};case H.Left:return{...s,x:s.x-25};case H.Down:return{...s,y:s.y+25};case H.Up:return{...s,y:s.y-25}}};class No{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:s}}=t;this.props=t,this.listeners=new Ft(It(s)),this.windowListeners=new Ft(be(s)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Se.Resize,this.handleCancel),this.windowListeners.add(Se.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Se.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:s}=this.props,r=t.node.current;r&&Qd(r),s(Te)}handleKeyDown(t){if(Os(t)){const{active:s,context:r,options:a}=this.props,{keyboardCodes:o=Co,coordinateGetter:l=tu,scrollBehavior:c="smooth"}=a,{code:d}=t;if(o.end.includes(d)){this.handleEnd(t);return}if(o.cancel.includes(d)){this.handleCancel(t);return}const{collisionRect:u}=r.current,f=u?{x:u.left,y:u.top}:Te;this.referenceCoordinates||(this.referenceCoordinates=f);const p=l(t,{active:s,context:r.current,currentCoordinates:f});if(p){const x=pn(p,f),h={x:0,y:0},{scrollableAncestors:v}=r.current;for(const m of v){const b=t.code,{isTop:y,isRight:g,isLeft:w,isBottom:C,maxScroll:S,minScroll:_}=yo(m),R=qd(m),M={x:Math.min(b===H.Right?R.right-R.width/2:R.right,Math.max(b===H.Right?R.left:R.left+R.width/2,p.x)),y:Math.min(b===H.Down?R.bottom-R.height/2:R.bottom,Math.max(b===H.Down?R.top:R.top+R.height/2,p.y))},T=b===H.Right&&!g||b===H.Left&&!w,N=b===H.Down&&!C||b===H.Up&&!y;if(T&&M.x!==p.x){const I=m.scrollLeft+x.x,P=b===H.Right&&I<=S.x||b===H.Left&&I>=_.x;if(P&&!x.y){m.scrollTo({left:I,behavior:c});return}P?h.x=m.scrollLeft-I:h.x=b===H.Right?m.scrollLeft-S.x:m.scrollLeft-_.x,h.x&&m.scrollBy({left:-h.x,behavior:c});break}else if(N&&M.y!==p.y){const I=m.scrollTop+x.y,P=b===H.Down&&I<=S.y||b===H.Up&&I>=_.y;if(P&&!x.x){m.scrollTo({top:I,behavior:c});return}P?h.y=m.scrollTop-I:h.y=b===H.Down?m.scrollTop-S.y:m.scrollTop-_.y,h.y&&m.scrollBy({top:-h.y,behavior:c});break}}this.handleMove(t,jt(pn(p,this.referenceCoordinates),h))}}}handleMove(t,s){const{onMove:r}=this.props;t.preventDefault(),r(s)}handleEnd(t){const{onEnd:s}=this.props;t.preventDefault(),this.detach(),s()}handleCancel(t){const{onCancel:s}=this.props;t.preventDefault(),this.detach(),s()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}No.activators=[{eventName:"onKeyDown",handler:(e,t,s)=>{let{keyboardCodes:r=Co,onActivation:a}=t,{active:o}=s;const{code:l}=e.nativeEvent;if(r.start.includes(l)){const c=o.activatorNode.current;return c&&e.target!==c?!1:(e.preventDefault(),a==null||a({event:e.nativeEvent}),!0)}return!1}}];function ur(e){return!!(e&&"distance"in e)}function fr(e){return!!(e&&"delay"in e)}class Vs{constructor(t,s,r){var a;r===void 0&&(r=Jd(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=s;const{event:o}=t,{target:l}=o;this.props=t,this.events=s,this.document=It(l),this.documentListeners=new Ft(this.document),this.listeners=new Ft(r),this.windowListeners=new Ft(be(l)),this.initialCoordinates=(a=ss(o))!=null?a:Te,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:s,bypassActivationConstraint:r}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(Se.Resize,this.handleCancel),this.windowListeners.add(Se.DragStart,dr),this.windowListeners.add(Se.VisibilityChange,this.handleCancel),this.windowListeners.add(Se.ContextMenu,dr),this.documentListeners.add(Se.Keydown,this.handleKeydown),s){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(fr(s)){this.timeoutId=setTimeout(this.handleStart,s.delay),this.handlePending(s);return}if(ur(s)){this.handlePending(s);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,s){const{active:r,onPending:a}=this.props;a(r,t,this.initialCoordinates,s)}handleStart(){const{initialCoordinates:t}=this,{onStart:s}=this.props;t&&(this.activated=!0,this.documentListeners.add(Se.Click,eu,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Se.SelectionChange,this.removeTextSelection),s(t))}handleMove(t){var s;const{activated:r,initialCoordinates:a,props:o}=this,{onMove:l,options:{activationConstraint:c}}=o;if(!a)return;const d=(s=ss(t))!=null?s:Te,u=pn(a,d);if(!r&&c){if(ur(c)){if(c.tolerance!=null&&Hn(u,c.tolerance))return this.handleCancel();if(Hn(u,c.distance))return this.handleStart()}if(fr(c)&&Hn(u,c.tolerance))return this.handleCancel();this.handlePending(c,u);return}t.cancelable&&t.preventDefault(),l(d)}handleEnd(){const{onAbort:t,onEnd:s}=this.props;this.detach(),this.activated||t(this.props.active),s()}handleCancel(){const{onAbort:t,onCancel:s}=this.props;this.detach(),this.activated||t(this.props.active),s()}handleKeydown(t){t.code===H.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const nu={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class Xt extends Vs{constructor(t){const{event:s}=t,r=It(s.target);super(t,nu,r)}}Xt.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:s}=e,{onActivation:r}=t;return!s.isPrimary||s.button!==0?!1:(r==null||r({event:s}),!0)}}];const su={move:{name:"mousemove"},end:{name:"mouseup"}};var as;(function(e){e[e.RightClick=2]="RightClick"})(as||(as={}));class ru extends Vs{constructor(t){super(t,su,It(t.event.target))}}ru.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:s}=e,{onActivation:r}=t;return s.button===as.RightClick?!1:(r==null||r({event:s}),!0)}}];const Gn={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class au extends Vs{constructor(t){super(t,Gn)}static setup(){return window.addEventListener(Gn.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(Gn.move.name,t)};function t(){}}}au.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:s}=e,{onActivation:r}=t;const{touches:a}=s;return a.length>1?!1:(r==null||r({event:s}),!0)}}];var Bt;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(Bt||(Bt={}));var mn;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(mn||(mn={}));function ou(e){let{acceleration:t,activator:s=Bt.Pointer,canScroll:r,draggingRect:a,enabled:o,interval:l=5,order:c=mn.TreeOrder,pointerCoordinates:d,scrollableAncestors:u,scrollableAncestorRects:f,delta:p,threshold:x}=e;const h=lu({delta:p,disabled:!o}),[v,m]=bd(),b=i.useRef({x:0,y:0}),y=i.useRef({x:0,y:0}),g=i.useMemo(()=>{switch(s){case Bt.Pointer:return d?{top:d.y,bottom:d.y,left:d.x,right:d.x}:null;case Bt.DraggableRect:return a}},[s,a,d]),w=i.useRef(null),C=i.useCallback(()=>{const _=w.current;if(!_)return;const R=b.current.x*y.current.x,M=b.current.y*y.current.y;_.scrollBy(R,M)},[]),S=i.useMemo(()=>c===mn.TreeOrder?[...u].reverse():u,[c,u]);i.useEffect(()=>{if(!o||!u.length||!g){m();return}for(const _ of S){if((r==null?void 0:r(_))===!1)continue;const R=u.indexOf(_),M=f[R];if(!M)continue;const{direction:T,speed:N}=Wd(_,M,g,t,x);for(const I of["x","y"])h[I][T[I]]||(N[I]=0,T[I]=0);if(N.x>0||N.y>0){m(),w.current=_,v(C,l),b.current=N,y.current=T;return}}b.current={x:0,y:0},y.current={x:0,y:0},m()},[t,C,r,m,o,l,JSON.stringify(g),JSON.stringify(h),v,u,S,f,JSON.stringify(x)])}const iu={x:{[te.Backward]:!1,[te.Forward]:!1},y:{[te.Backward]:!1,[te.Forward]:!1}};function lu(e){let{delta:t,disabled:s}=e;const r=ns(t);return qt(a=>{if(s||!r||!a)return iu;const o={x:Math.sign(t.x-r.x),y:Math.sign(t.y-r.y)};return{x:{[te.Backward]:a.x[te.Backward]||o.x===-1,[te.Forward]:a.x[te.Forward]||o.x===1},y:{[te.Backward]:a.y[te.Backward]||o.y===-1,[te.Forward]:a.y[te.Forward]||o.y===1}}},[s,t,r])}function cu(e,t){const s=t!=null?e.get(t):void 0,r=s?s.node.current:null;return qt(a=>{var o;return t==null?null:(o=r??a)!=null?o:null},[r,t])}function du(e,t){return i.useMemo(()=>e.reduce((s,r)=>{const{sensor:a}=r,o=a.activators.map(l=>({eventName:l.eventName,handler:t(l.handler,r)}));return[...s,...o]},[]),[e,t])}var Gt;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(Gt||(Gt={}));var os;(function(e){e.Optimized="optimized"})(os||(os={}));const pr=new Map;function uu(e,t){let{dragging:s,dependencies:r,config:a}=t;const[o,l]=i.useState(null),{frequency:c,measure:d,strategy:u}=a,f=i.useRef(e),p=b(),x=Ht(p),h=i.useCallback(function(y){y===void 0&&(y=[]),!x.current&&l(g=>g===null?y:g.concat(y.filter(w=>!g.includes(w))))},[x]),v=i.useRef(null),m=qt(y=>{if(p&&!s)return pr;if(!y||y===pr||f.current!==e||o!=null){const g=new Map;for(let w of e){if(!w)continue;if(o&&o.length>0&&!o.includes(w.id)&&w.rect.current){g.set(w.id,w.rect.current);continue}const C=w.node.current,S=C?new Bs(d(C),C):null;w.rect.current=S,S&&g.set(w.id,S)}return g}return y},[e,o,s,p,d]);return i.useEffect(()=>{f.current=e},[e]),i.useEffect(()=>{p||h()},[s,p]),i.useEffect(()=>{o&&o.length>0&&l(null)},[JSON.stringify(o)]),i.useEffect(()=>{p||typeof c!="number"||v.current!==null||(v.current=setTimeout(()=>{h(),v.current=null},c))},[c,p,h,...r]),{droppableRects:m,measureDroppableContainers:h,measuringScheduled:o!=null};function b(){switch(u){case Gt.Always:return!1;case Gt.BeforeDragging:return s;default:return!s}}}function So(e,t){return qt(s=>e?s||(typeof t=="function"?t(e):e):null,[t,e])}function fu(e,t){return So(e,t)}function pu(e){let{callback:t,disabled:s}=e;const r=Ps(t),a=i.useMemo(()=>{if(s||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:o}=window;return new o(r)},[r,s]);return i.useEffect(()=>()=>a==null?void 0:a.disconnect(),[a]),a}function En(e){let{callback:t,disabled:s}=e;const r=Ps(t),a=i.useMemo(()=>{if(s||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:o}=window;return new o(r)},[s]);return i.useEffect(()=>()=>a==null?void 0:a.disconnect(),[a]),a}function hu(e){return new Bs(kt(e),e)}function hr(e,t,s){t===void 0&&(t=hu);const[r,a]=i.useState(null);function o(){a(d=>{if(!e)return null;if(e.isConnected===!1){var u;return(u=d??s)!=null?u:null}const f=t(e);return JSON.stringify(d)===JSON.stringify(f)?d:f})}const l=pu({callback(d){if(e)for(const u of d){const{type:f,target:p}=u;if(f==="childList"&&p instanceof HTMLElement&&p.contains(e)){o();break}}}}),c=En({callback:o});return Fe(()=>{o(),e?(c==null||c.observe(e),l==null||l.observe(document.body,{childList:!0,subtree:!0})):(c==null||c.disconnect(),l==null||l.disconnect())},[e]),r}function mu(e){const t=So(e);return xo(e,t)}const mr=[];function xu(e){const t=i.useRef(e),s=qt(r=>e?r&&r!==mr&&e&&t.current&&e.parentNode===t.current.parentNode?r:Fs(e):mr,[e]);return i.useEffect(()=>{t.current=e},[e]),s}function gu(e){const[t,s]=i.useState(null),r=i.useRef(e),a=i.useCallback(o=>{const l=Vn(o.target);l&&s(c=>c?(c.set(l,rs(l)),new Map(c)):null)},[]);return i.useEffect(()=>{const o=r.current;if(e!==o){l(o);const c=e.map(d=>{const u=Vn(d);return u?(u.addEventListener("scroll",a,{passive:!0}),[u,rs(u)]):null}).filter(d=>d!=null);s(c.length?new Map(c):null),r.current=e}return()=>{l(e),l(o)};function l(c){c.forEach(d=>{const u=Vn(d);u==null||u.removeEventListener("scroll",a)})}},[a,e]),i.useMemo(()=>e.length?t?Array.from(t.values()).reduce((o,l)=>jt(o,l),Te):jo(e):Te,[e,t])}function xr(e,t){t===void 0&&(t=[]);const s=i.useRef(null);return i.useEffect(()=>{s.current=null},t),i.useEffect(()=>{const r=e!==Te;r&&!s.current&&(s.current=e),!r&&s.current&&(s.current=null)},[e]),s.current?pn(e,s.current):Te}function bu(e){i.useEffect(()=>{if(!kn)return;const t=e.map(s=>{let{sensor:r}=s;return r.setup==null?void 0:r.setup()});return()=>{for(const s of t)s==null||s()}},e.map(t=>{let{sensor:s}=t;return s}))}function vu(e,t){return i.useMemo(()=>e.reduce((s,r)=>{let{eventName:a,handler:o}=r;return s[a]=l=>{o(l,t)},s},{}),[e,t])}function _o(e){return i.useMemo(()=>e?Hd(e):null,[e])}const gr=[];function wu(e,t){t===void 0&&(t=kt);const[s]=e,r=_o(s?be(s):null),[a,o]=i.useState(gr);function l(){o(()=>e.length?e.map(d=>wo(d)?r:new Bs(t(d),d)):gr)}const c=En({callback:l});return Fe(()=>{c==null||c.disconnect(),l(),e.forEach(d=>c==null?void 0:c.observe(d))},[e]),a}function yu(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return Wt(t)?t:e}function ju(e){let{measure:t}=e;const[s,r]=i.useState(null),a=i.useCallback(u=>{for(const{target:f}of u)if(Wt(f)){r(p=>{const x=t(f);return p?{...p,width:x.width,height:x.height}:x});break}},[t]),o=En({callback:a}),l=i.useCallback(u=>{const f=yu(u);o==null||o.disconnect(),f&&(o==null||o.observe(f)),r(f?t(f):null)},[t,o]),[c,d]=fn(l);return i.useMemo(()=>({nodeRef:c,rect:s,setRef:d}),[s,c,d])}const Cu=[{sensor:Xt,options:{}},{sensor:No,options:{}}],Nu={current:{}},cn={draggable:{measure:cr},droppable:{measure:cr,strategy:Gt.WhileDragging,frequency:os.Optimized},dragOverlay:{measure:kt}};class Vt extends Map{get(t){var s;return t!=null&&(s=super.get(t))!=null?s:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:s}=t;return!s})}getNodeFor(t){var s,r;return(s=(r=this.get(t))==null?void 0:r.node.current)!=null?s:void 0}}const Su={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Vt,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:hn},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:cn,measureDroppableContainers:hn,windowRect:null,measuringScheduled:!1},_u={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:hn,draggableNodes:new Map,over:null,measureDroppableContainers:hn},Tn=i.createContext(_u),Ro=i.createContext(Su);function Ru(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Vt}}}function Mu(e,t){switch(t.type){case J.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case J.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case J.DragEnd:case J.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case J.RegisterDroppable:{const{element:s}=t,{id:r}=s,a=new Vt(e.droppable.containers);return a.set(r,s),{...e,droppable:{...e.droppable,containers:a}}}case J.SetDroppableDisabled:{const{id:s,key:r,disabled:a}=t,o=e.droppable.containers.get(s);if(!o||r!==o.key)return e;const l=new Vt(e.droppable.containers);return l.set(s,{...o,disabled:a}),{...e,droppable:{...e.droppable,containers:l}}}case J.UnregisterDroppable:{const{id:s,key:r}=t,a=e.droppable.containers.get(s);if(!a||r!==a.key)return e;const o=new Vt(e.droppable.containers);return o.delete(s),{...e,droppable:{...e.droppable,containers:o}}}default:return e}}function Du(e){let{disabled:t}=e;const{active:s,activatorEvent:r,draggableNodes:a}=i.useContext(Tn),o=ns(r),l=ns(s==null?void 0:s.id);return i.useEffect(()=>{if(!t&&!r&&o&&l!=null){if(!Os(o)||document.activeElement===o.target)return;const c=a.get(l);if(!c)return;const{activatorNode:d,node:u}=c;if(!d.current&&!u.current)return;requestAnimationFrame(()=>{for(const f of[d.current,u.current]){if(!f)continue;const p=yd(f);if(p){p.focus();break}}})}},[r,t,a,l,o]),null}function Iu(e,t){let{transform:s,...r}=t;return e!=null&&e.length?e.reduce((a,o)=>o({transform:a,...r}),s):s}function ku(e){return i.useMemo(()=>({draggable:{...cn.draggable,...e==null?void 0:e.draggable},droppable:{...cn.droppable,...e==null?void 0:e.droppable},dragOverlay:{...cn.dragOverlay,...e==null?void 0:e.dragOverlay}}),[e==null?void 0:e.draggable,e==null?void 0:e.droppable,e==null?void 0:e.dragOverlay])}function Eu(e){let{activeNode:t,measure:s,initialRect:r,config:a=!0}=e;const o=i.useRef(!1),{x:l,y:c}=typeof a=="boolean"?{x:a,y:a}:a;Fe(()=>{if(!l&&!c||!t){o.current=!1;return}if(o.current||!r)return;const u=t==null?void 0:t.node.current;if(!u||u.isConnected===!1)return;const f=s(u),p=xo(f,r);if(l||(p.x=0),c||(p.y=0),o.current=!0,Math.abs(p.x)>0||Math.abs(p.y)>0){const x=go(u);x&&x.scrollBy({top:p.y,left:p.x})}},[t,l,c,r,s])}const Mo=i.createContext({...Te,scaleX:1,scaleY:1});var Ze;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(Ze||(Ze={}));const Hs=i.memo(function(t){var s,r,a,o;let{id:l,accessibility:c,autoScroll:d=!0,children:u,sensors:f=Cu,collisionDetection:p=Od,measuring:x,modifiers:h,...v}=t;const m=i.useReducer(Mu,void 0,Ru),[b,y]=m,[g,w]=Rd(),[C,S]=i.useState(Ze.Uninitialized),_=C===Ze.Initialized,{draggable:{active:R,nodes:M,translate:T},droppable:{containers:N}}=b,I=R!=null?M.get(R):null,P=i.useRef({initial:null,translated:null}),L=i.useMemo(()=>{var ue;return R!=null?{id:R,data:(ue=I==null?void 0:I.data)!=null?ue:Nu,rect:P}:null},[R,I]),A=i.useRef(null),[V,G]=i.useState(null),[K,se]=i.useState(null),X=Ht(v,Object.values(v)),Me=Yt("DndDescribedBy",l),De=i.useMemo(()=>N.getEnabled(),[N]),Q=ku(x),{droppableRects:pe,measureDroppableContainers:de,measuringScheduled:je}=uu(De,{dragging:_,dependencies:[T.x,T.y],config:Q.droppable}),Z=cu(M,R),E=i.useMemo(()=>K?ss(K):null,[K]),F=ll(),U=fu(Z,Q.draggable.measure);Eu({activeNode:R!=null?M.get(R):null,config:F.layoutShiftCompensation,initialRect:U,measure:Q.draggable.measure});const k=hr(Z,Q.draggable.measure,U),B=hr(Z?Z.parentElement:null),O=i.useRef({activatorEvent:null,active:null,activeNode:Z,collisionRect:null,collisions:null,droppableRects:pe,draggableNodes:M,draggingNode:null,draggingNodeRect:null,droppableContainers:N,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),re=N.getNodeFor((s=O.current.over)==null?void 0:s.id),ae=ju({measure:Q.dragOverlay.measure}),Ae=(r=ae.nodeRef.current)!=null?r:Z,Pe=_?(a=ae.rect)!=null?a:k:null,ut=!!(ae.nodeRef.current&&ae.rect),Js=mu(ut?null:k),Ln=_o(Ae?be(Ae):null),We=xu(_?re??Z:null),sn=wu(We),rn=Iu(h,{transform:{x:T.x-Js.x,y:T.y-Js.y,scaleX:1,scaleY:1},activatorEvent:K,active:L,activeNodeRect:k,containerNodeRect:B,draggingNodeRect:Pe,over:O.current.over,overlayNodeRect:ae.rect,scrollableAncestors:We,scrollableAncestorRects:sn,windowRect:Ln}),er=E?jt(E,T):null,tr=gu(We),tl=xr(tr),nl=xr(tr,[k]),ft=jt(rn,tl),pt=Pe?zd(Pe,rn):null,Tt=L&&pt?p({active:L,collisionRect:pt,droppableRects:pe,droppableContainers:De,pointerCoordinates:er}):null,nr=Ad(Tt,"id"),[qe,sr]=i.useState(null),sl=ut?rn:jt(rn,nl),rl=Ld(sl,(o=qe==null?void 0:qe.rect)!=null?o:null,k),$n=i.useRef(null),rr=i.useCallback((ue,ve)=>{let{sensor:we,options:Ye}=ve;if(A.current==null)return;const Ce=M.get(A.current);if(!Ce)return;const ye=ue.nativeEvent,Oe=new we({active:A.current,activeNode:Ce,event:ye,options:Ye,context:O,onAbort(oe){if(!M.get(oe))return;const{onDragAbort:Le}=X.current,Be={id:oe};Le==null||Le(Be),g({type:"onDragAbort",event:Be})},onPending(oe,Xe,Le,Be){if(!M.get(oe))return;const{onDragPending:Pt}=X.current,Qe={id:oe,constraint:Xe,initialCoordinates:Le,offset:Be};Pt==null||Pt(Qe),g({type:"onDragPending",event:Qe})},onStart(oe){const Xe=A.current;if(Xe==null)return;const Le=M.get(Xe);if(!Le)return;const{onDragStart:Be}=X.current,At={activatorEvent:ye,active:{id:Xe,data:Le.data,rect:P}};rt.unstable_batchedUpdates(()=>{Be==null||Be(At),S(Ze.Initializing),y({type:J.DragStart,initialCoordinates:oe,active:Xe}),g({type:"onDragStart",event:At}),G($n.current),se(ye)})},onMove(oe){y({type:J.DragMove,coordinates:oe})},onEnd:ht(J.DragEnd),onCancel:ht(J.DragCancel)});$n.current=Oe;function ht(oe){return async function(){const{active:Le,collisions:Be,over:At,scrollAdjustedTranslate:Pt}=O.current;let Qe=null;if(Le&&Pt){const{cancelDrop:Ot}=X.current;Qe={activatorEvent:ye,active:Le,collisions:Be,delta:Pt,over:At},oe===J.DragEnd&&typeof Ot=="function"&&await Promise.resolve(Ot(Qe))&&(oe=J.DragCancel)}A.current=null,rt.unstable_batchedUpdates(()=>{y({type:oe}),S(Ze.Uninitialized),sr(null),G(null),se(null),$n.current=null;const Ot=oe===J.DragEnd?"onDragEnd":"onDragCancel";if(Qe){const zn=X.current[Ot];zn==null||zn(Qe),g({type:Ot,event:Qe})}})}}},[M]),al=i.useCallback((ue,ve)=>(we,Ye)=>{const Ce=we.nativeEvent,ye=M.get(Ye);if(A.current!==null||!ye||Ce.dndKit||Ce.defaultPrevented)return;const Oe={active:ye};ue(we,ve.options,Oe)===!0&&(Ce.dndKit={capturedBy:ve.sensor},A.current=Ye,rr(we,ve))},[M,rr]),ar=du(f,al);bu(f),Fe(()=>{k&&C===Ze.Initializing&&S(Ze.Initialized)},[k,C]),i.useEffect(()=>{const{onDragMove:ue}=X.current,{active:ve,activatorEvent:we,collisions:Ye,over:Ce}=O.current;if(!ve||!we)return;const ye={active:ve,activatorEvent:we,collisions:Ye,delta:{x:ft.x,y:ft.y},over:Ce};rt.unstable_batchedUpdates(()=>{ue==null||ue(ye),g({type:"onDragMove",event:ye})})},[ft.x,ft.y]),i.useEffect(()=>{const{active:ue,activatorEvent:ve,collisions:we,droppableContainers:Ye,scrollAdjustedTranslate:Ce}=O.current;if(!ue||A.current==null||!ve||!Ce)return;const{onDragOver:ye}=X.current,Oe=Ye.get(nr),ht=Oe&&Oe.rect.current?{id:Oe.id,rect:Oe.rect.current,data:Oe.data,disabled:Oe.disabled}:null,oe={active:ue,activatorEvent:ve,collisions:we,delta:{x:Ce.x,y:Ce.y},over:ht};rt.unstable_batchedUpdates(()=>{sr(ht),ye==null||ye(oe),g({type:"onDragOver",event:oe})})},[nr]),Fe(()=>{O.current={activatorEvent:K,active:L,activeNode:Z,collisionRect:pt,collisions:Tt,droppableRects:pe,draggableNodes:M,draggingNode:Ae,draggingNodeRect:Pe,droppableContainers:N,over:qe,scrollableAncestors:We,scrollAdjustedTranslate:ft},P.current={initial:Pe,translated:pt}},[L,Z,Tt,pt,M,Ae,Pe,pe,N,qe,We,ft]),ou({...F,delta:T,draggingRect:pt,pointerCoordinates:er,scrollableAncestors:We,scrollableAncestorRects:sn});const ol=i.useMemo(()=>({active:L,activeNode:Z,activeNodeRect:k,activatorEvent:K,collisions:Tt,containerNodeRect:B,dragOverlay:ae,draggableNodes:M,droppableContainers:N,droppableRects:pe,over:qe,measureDroppableContainers:de,scrollableAncestors:We,scrollableAncestorRects:sn,measuringConfiguration:Q,measuringScheduled:je,windowRect:Ln}),[L,Z,k,K,Tt,B,ae,M,N,pe,qe,de,We,sn,Q,je,Ln]),il=i.useMemo(()=>({activatorEvent:K,activators:ar,active:L,activeNodeRect:k,ariaDescribedById:{draggable:Me},dispatch:y,draggableNodes:M,over:qe,measureDroppableContainers:de}),[K,ar,L,k,y,Me,M,qe,de]);return j.createElement(mo.Provider,{value:w},j.createElement(Tn.Provider,{value:il},j.createElement(Ro.Provider,{value:ol},j.createElement(Mo.Provider,{value:rl},u)),j.createElement(Du,{disabled:(c==null?void 0:c.restoreFocus)===!1})),j.createElement(Id,{...c,hiddenTextDescribedById:Me}));function ll(){const ue=(V==null?void 0:V.autoScrollEnabled)===!1,ve=typeof d=="object"?d.enabled===!1:d===!1,we=_&&!ue&&!ve;return typeof d=="object"?{...d,enabled:we}:{enabled:we}}}),Tu=i.createContext(null),br="button",Au="Draggable";function Pu(e){let{id:t,data:s,disabled:r=!1,attributes:a}=e;const o=Yt(Au),{activators:l,activatorEvent:c,active:d,activeNodeRect:u,ariaDescribedById:f,draggableNodes:p,over:x}=i.useContext(Tn),{role:h=br,roleDescription:v="draggable",tabIndex:m=0}=a??{},b=(d==null?void 0:d.id)===t,y=i.useContext(b?Mo:Tu),[g,w]=fn(),[C,S]=fn(),_=vu(l,t),R=Ht(s);Fe(()=>(p.set(t,{id:t,key:o,node:g,activatorNode:C,data:R}),()=>{const T=p.get(t);T&&T.key===o&&p.delete(t)}),[p,t]);const M=i.useMemo(()=>({role:h,tabIndex:m,"aria-disabled":r,"aria-pressed":b&&h===br?!0:void 0,"aria-roledescription":v,"aria-describedby":f.draggable}),[r,h,m,b,v,f.draggable]);return{active:d,activatorEvent:c,activeNodeRect:u,attributes:M,isDragging:b,listeners:r?void 0:_,node:g,over:x,setNodeRef:w,setActivatorNodeRef:S,transform:y}}function Ou(){return i.useContext(Ro)}const Lu="Droppable",$u={timeout:25};function zu(e){let{data:t,disabled:s=!1,id:r,resizeObserverConfig:a}=e;const o=Yt(Lu),{active:l,dispatch:c,over:d,measureDroppableContainers:u}=i.useContext(Tn),f=i.useRef({disabled:s}),p=i.useRef(!1),x=i.useRef(null),h=i.useRef(null),{disabled:v,updateMeasurementsFor:m,timeout:b}={...$u,...a},y=Ht(m??r),g=i.useCallback(()=>{if(!p.current){p.current=!0;return}h.current!=null&&clearTimeout(h.current),h.current=setTimeout(()=>{u(Array.isArray(y.current)?y.current:[y.current]),h.current=null},b)},[b]),w=En({callback:g,disabled:v||!l}),C=i.useCallback((M,T)=>{w&&(T&&(w.unobserve(T),p.current=!1),M&&w.observe(M))},[w]),[S,_]=fn(C),R=Ht(t);return i.useEffect(()=>{!w||!S.current||(w.disconnect(),p.current=!1,w.observe(S.current))},[S,w]),i.useEffect(()=>(c({type:J.RegisterDroppable,element:{id:r,key:o,disabled:s,node:S,rect:x,data:R}}),()=>c({type:J.UnregisterDroppable,key:o,id:r})),[r]),i.useEffect(()=>{s!==f.current.disabled&&(c({type:J.SetDroppableDisabled,id:r,key:o,disabled:s}),f.current.disabled=s)},[r,o,s,c]),{active:l,rect:x,isOver:(d==null?void 0:d.id)===r,node:S,over:d,setNodeRef:_}}function Qt(e,t,s){const r=e.slice();return r.splice(s<0?r.length+s:s,0,r.splice(t,1)[0]),r}function Fu(e,t){return e.reduce((s,r,a)=>{const o=t.get(r);return o&&(s[a]=o),s},Array(e.length))}function on(e){return e!==null&&e>=0}function Bu(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let s=0;s<e.length;s++)if(e[s]!==t[s])return!1;return!0}function Vu(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const Do=e=>{let{rects:t,activeIndex:s,overIndex:r,index:a}=e;const o=Qt(t,r,s),l=t[a],c=o[a];return!c||!l?null:{x:c.left-l.left,y:c.top-l.top,scaleX:c.width/l.width,scaleY:c.height/l.height}},ln={scaleX:1,scaleY:1},Gs=e=>{var t;let{activeIndex:s,activeNodeRect:r,index:a,rects:o,overIndex:l}=e;const c=(t=o[s])!=null?t:r;if(!c)return null;if(a===s){const u=o[l];return u?{x:0,y:s<l?u.top+u.height-(c.top+c.height):u.top-c.top,...ln}:null}const d=Hu(o,a,s);return a>s&&a<=l?{x:0,y:-c.height-d,...ln}:a<s&&a>=l?{x:0,y:c.height+d,...ln}:{x:0,y:0,...ln}};function Hu(e,t,s){const r=e[t],a=e[t-1],o=e[t+1];return r?s<t?a?r.top-(a.top+a.height):o?o.top-(r.top+r.height):0:o?o.top-(r.top+r.height):a?r.top-(a.top+a.height):0:0}const Io="Sortable",ko=j.createContext({activeIndex:-1,containerId:Io,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:Do,disabled:{draggable:!1,droppable:!1}});function Ks(e){let{children:t,id:s,items:r,strategy:a=Do,disabled:o=!1}=e;const{active:l,dragOverlay:c,droppableRects:d,over:u,measureDroppableContainers:f}=Ou(),p=Yt(Io,s),x=c.rect!==null,h=i.useMemo(()=>r.map(_=>typeof _=="object"&&"id"in _?_.id:_),[r]),v=l!=null,m=l?h.indexOf(l.id):-1,b=u?h.indexOf(u.id):-1,y=i.useRef(h),g=!Bu(h,y.current),w=b!==-1&&m===-1||g,C=Vu(o);Fe(()=>{g&&v&&f(h)},[g,h,v,f]),i.useEffect(()=>{y.current=h},[h]);const S=i.useMemo(()=>({activeIndex:m,containerId:p,disabled:C,disableTransforms:w,items:h,overIndex:b,useDragOverlay:x,sortedRects:Fu(h,d),strategy:a}),[m,p,C.draggable,C.droppable,w,h,b,d,x,a]);return j.createElement(ko.Provider,{value:S},t)}const Gu=e=>{let{id:t,items:s,activeIndex:r,overIndex:a}=e;return Qt(s,r,a).indexOf(t)},Ku=e=>{let{containerId:t,isSorting:s,wasDragging:r,index:a,items:o,newIndex:l,previousItems:c,previousContainerId:d,transition:u}=e;return!u||!r||c!==o&&a===l?!1:s?!0:l!==a&&t===d},Uu={duration:200,easing:"ease"},Eo="transform",Wu=dt.Transition.toString({property:Eo,duration:0,easing:"linear"}),qu={roleDescription:"sortable"};function Yu(e){let{disabled:t,index:s,node:r,rect:a}=e;const[o,l]=i.useState(null),c=i.useRef(s);return Fe(()=>{if(!t&&s!==c.current&&r.current){const d=a.current;if(d){const u=kt(r.current,{ignoreTransform:!0}),f={x:d.left-u.left,y:d.top-u.top,scaleX:d.width/u.width,scaleY:d.height/u.height};(f.x||f.y)&&l(f)}}s!==c.current&&(c.current=s)},[t,s,r,a]),i.useEffect(()=>{o&&l(null)},[o]),o}function An(e){let{animateLayoutChanges:t=Ku,attributes:s,disabled:r,data:a,getNewIndex:o=Gu,id:l,strategy:c,resizeObserverConfig:d,transition:u=Uu}=e;const{items:f,containerId:p,activeIndex:x,disabled:h,disableTransforms:v,sortedRects:m,overIndex:b,useDragOverlay:y,strategy:g}=i.useContext(ko),w=Xu(r,h),C=f.indexOf(l),S=i.useMemo(()=>({sortable:{containerId:p,index:C,items:f},...a}),[p,a,C,f]),_=i.useMemo(()=>f.slice(f.indexOf(l)),[f,l]),{rect:R,node:M,isOver:T,setNodeRef:N}=zu({id:l,data:S,disabled:w.droppable,resizeObserverConfig:{updateMeasurementsFor:_,...d}}),{active:I,activatorEvent:P,activeNodeRect:L,attributes:A,setNodeRef:V,listeners:G,isDragging:K,over:se,setActivatorNodeRef:X,transform:Me}=Pu({id:l,data:S,attributes:{...qu,...s},disabled:w.draggable}),De=gd(N,V),Q=!!I,pe=Q&&!v&&on(x)&&on(b),de=!y&&K,je=de&&pe?Me:null,E=pe?je??(c??g)({rects:m,activeNodeRect:L,activeIndex:x,overIndex:b,index:C}):null,F=on(x)&&on(b)?o({id:l,items:f,activeIndex:x,overIndex:b}):C,U=I==null?void 0:I.id,k=i.useRef({activeId:U,items:f,newIndex:F,containerId:p}),B=f!==k.current.items,O=t({active:I,containerId:p,isDragging:K,isSorting:Q,id:l,index:C,items:f,newIndex:k.current.newIndex,previousItems:k.current.items,previousContainerId:k.current.containerId,transition:u,wasDragging:k.current.activeId!=null}),re=Yu({disabled:!O,index:C,node:M,rect:R});return i.useEffect(()=>{Q&&k.current.newIndex!==F&&(k.current.newIndex=F),p!==k.current.containerId&&(k.current.containerId=p),f!==k.current.items&&(k.current.items=f)},[Q,F,p,f]),i.useEffect(()=>{if(U===k.current.activeId)return;if(U&&!k.current.activeId){k.current.activeId=U;return}const Ae=setTimeout(()=>{k.current.activeId=U},50);return()=>clearTimeout(Ae)},[U]),{active:I,activeIndex:x,attributes:A,data:S,rect:R,index:C,newIndex:F,items:f,isOver:T,isSorting:Q,isDragging:K,listeners:G,node:M,overIndex:b,over:se,setNodeRef:De,setActivatorNodeRef:X,setDroppableNodeRef:N,setDraggableNodeRef:V,transform:re??E,transition:ae()};function ae(){if(re||B&&k.current.newIndex===C)return Wu;if(!(de&&!Os(P)||!u)&&(Q||O))return dt.Transition.toString({...u,property:Eo})}}function Xu(e,t){var s,r;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(s=e==null?void 0:e.draggable)!=null?s:t.draggable,droppable:(r=e==null?void 0:e.droppable)!=null?r:t.droppable}}H.Down,H.Right,H.Up,H.Left;var Us="DropdownMenu",[Qu,ih]=St(Us,[xs]),me=xs(),[Zu,To]=Qu(Us),Ao=e=>{const{__scopeDropdownMenu:t,children:s,dir:r,open:a,defaultOpen:o,onOpenChange:l,modal:c=!0}=e,d=me(t),u=i.useRef(null),[f=!1,p]=Ge({prop:a,defaultProp:o,onChange:l});return n.jsx(Zu,{scope:t,triggerId:ze(),triggerRef:u,contentId:ze(),open:f,onOpenChange:p,onOpenToggle:i.useCallback(()=>p(x=>!x),[p]),modal:c,children:n.jsx(Rr,{...d,open:f,onOpenChange:p,dir:r,modal:c,children:s})})};Ao.displayName=Us;var Po="DropdownMenuTrigger",Oo=i.forwardRef((e,t)=>{const{__scopeDropdownMenu:s,disabled:r=!1,...a}=e,o=To(Po,s),l=me(s);return n.jsx(Mr,{asChild:!0,...l,children:n.jsx(Y.button,{type:"button",id:o.triggerId,"aria-haspopup":"menu","aria-expanded":o.open,"aria-controls":o.open?o.contentId:void 0,"data-state":o.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...a,ref:jr(t,o.triggerRef),onPointerDown:z(e.onPointerDown,c=>{!r&&c.button===0&&c.ctrlKey===!1&&(o.onOpenToggle(),o.open||c.preventDefault())}),onKeyDown:z(e.onKeyDown,c=>{r||(["Enter"," "].includes(c.key)&&o.onOpenToggle(),c.key==="ArrowDown"&&o.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(c.key)&&c.preventDefault())})})})});Oo.displayName=Po;var Ju="DropdownMenuPortal",Lo=e=>{const{__scopeDropdownMenu:t,...s}=e,r=me(t);return n.jsx(Dr,{...r,...s})};Lo.displayName=Ju;var $o="DropdownMenuContent",zo=i.forwardRef((e,t)=>{const{__scopeDropdownMenu:s,...r}=e,a=To($o,s),o=me(s),l=i.useRef(!1);return n.jsx(Ir,{id:a.contentId,"aria-labelledby":a.triggerId,...o,...r,ref:t,onCloseAutoFocus:z(e.onCloseAutoFocus,c=>{var d;l.current||(d=a.triggerRef.current)==null||d.focus(),l.current=!1,c.preventDefault()}),onInteractOutside:z(e.onInteractOutside,c=>{const d=c.detail.originalEvent,u=d.button===0&&d.ctrlKey===!0,f=d.button===2||u;(!a.modal||f)&&(l.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});zo.displayName=$o;var ef="DropdownMenuGroup",Fo=i.forwardRef((e,t)=>{const{__scopeDropdownMenu:s,...r}=e,a=me(s);return n.jsx(kr,{...a,...r,ref:t})});Fo.displayName=ef;var tf="DropdownMenuLabel",Bo=i.forwardRef((e,t)=>{const{__scopeDropdownMenu:s,...r}=e,a=me(s);return n.jsx(Er,{...a,...r,ref:t})});Bo.displayName=tf;var nf="DropdownMenuItem",Vo=i.forwardRef((e,t)=>{const{__scopeDropdownMenu:s,...r}=e,a=me(s);return n.jsx(Ar,{...a,...r,ref:t})});Vo.displayName=nf;var sf="DropdownMenuCheckboxItem",Ho=i.forwardRef((e,t)=>{const{__scopeDropdownMenu:s,...r}=e,a=me(s);return n.jsx(Pr,{...a,...r,ref:t})});Ho.displayName=sf;var rf="DropdownMenuRadioGroup",af=i.forwardRef((e,t)=>{const{__scopeDropdownMenu:s,...r}=e,a=me(s);return n.jsx(Or,{...a,...r,ref:t})});af.displayName=rf;var of="DropdownMenuRadioItem",Go=i.forwardRef((e,t)=>{const{__scopeDropdownMenu:s,...r}=e,a=me(s);return n.jsx(Lr,{...a,...r,ref:t})});Go.displayName=of;var lf="DropdownMenuItemIndicator",Ko=i.forwardRef((e,t)=>{const{__scopeDropdownMenu:s,...r}=e,a=me(s);return n.jsx($r,{...a,...r,ref:t})});Ko.displayName=lf;var cf="DropdownMenuSeparator",Uo=i.forwardRef((e,t)=>{const{__scopeDropdownMenu:s,...r}=e,a=me(s);return n.jsx(Tr,{...a,...r,ref:t})});Uo.displayName=cf;var df="DropdownMenuArrow",uf=i.forwardRef((e,t)=>{const{__scopeDropdownMenu:s,...r}=e,a=me(s);return n.jsx(zr,{...a,...r,ref:t})});uf.displayName=df;var ff="DropdownMenuSubTrigger",Wo=i.forwardRef((e,t)=>{const{__scopeDropdownMenu:s,...r}=e,a=me(s);return n.jsx(Fr,{...a,...r,ref:t})});Wo.displayName=ff;var pf="DropdownMenuSubContent",qo=i.forwardRef((e,t)=>{const{__scopeDropdownMenu:s,...r}=e,a=me(s);return n.jsx(Br,{...a,...r,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});qo.displayName=pf;var hf=Ao,mf=Oo,xf=Lo,Yo=zo,gf=Fo,Xo=Bo,Qo=Vo,Zo=Ho,Jo=Go,ei=Ko,ti=Uo,ni=Wo,si=qo;const Zt=hf,Jt=mf,Je=gf,bf=j.forwardRef(({className:e,inset:t,children:s,...r},a)=>n.jsxs(ni,{ref:a,className:D("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",t&&"pl-8",e),...r,children:[s,n.jsx(Vr,{className:"ml-auto size-4"})]}));bf.displayName=ni.displayName;const vf=j.forwardRef(({className:e,...t},s)=>n.jsx(si,{ref:s,className:D("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t}));vf.displayName=si.displayName;const Et=j.forwardRef(({className:e,sideOffset:t=4,...s},r)=>n.jsx(xf,{children:n.jsx(Yo,{ref:r,sideOffset:t,className:D("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...s})}));Et.displayName=Yo.displayName;const $e=j.forwardRef(({className:e,inset:t,...s},r)=>n.jsx(Qo,{ref:r,className:D("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t&&"pl-8",e),...s}));$e.displayName=Qo.displayName;const wf=j.forwardRef(({className:e,children:t,checked:s,...r},a)=>n.jsxs(Zo,{ref:a,className:D("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:s,...r,children:[n.jsx("span",{className:"absolute left-2 flex size-3.5 items-center justify-center",children:n.jsx(ei,{children:n.jsx(xn,{className:"size-4"})})}),t]}));wf.displayName=Zo.displayName;const yf=j.forwardRef(({className:e,children:t,...s},r)=>n.jsxs(Jo,{ref:r,className:D("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...s,children:[n.jsx("span",{className:"absolute left-2 flex size-3.5 items-center justify-center",children:n.jsx(ei,{children:n.jsx(Hr,{className:"size-4 fill-current"})})}),t]}));yf.displayName=Jo.displayName;const en=j.forwardRef(({className:e,inset:t,...s},r)=>n.jsx(Xo,{ref:r,className:D("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...s}));en.displayName=Xo.displayName;const He=j.forwardRef(({className:e,...t},s)=>n.jsx(ti,{ref:s,className:D("-mx-1 my-1 h-px bg-muted",e),...t}));He.displayName=ti.displayName;const jf=({table:e})=>{const{updateTable:t,removeTable:s,createIndex:r,createField:a,createTable:o,schemas:l,filteredSchemas:c}=ne(),{openTableSchemaDialog:d}=gn(),{t:u}=ee(),{fitView:f,setNodes:p}=_t(),{hideSidePanel:x}=he(),[h,v]=j.useState(!1),[m,b]=j.useState(e.name),{isMd:y}=Rt("md"),g=j.useRef(null),{listeners:w}=An({id:e.id}),C=i.useCallback(()=>{h&&(m.trim()&&t(e.id,{name:m.trim()}),v(!1))},[m,e.id,t,h]),S=i.useCallback(()=>{v(!1),b(e.name)},[e.name]);bn(g,C),Ct("Enter",C),Ct("Escape",S);const _=A=>{A.stopPropagation(),v(!0)},R=i.useCallback(A=>{A.stopPropagation(),p(V=>V.map(G=>G.id==e.id?{...G,selected:!0}:{...G,selected:!1})),f({duration:500,maxZoom:1,minZoom:1,nodes:[{id:e.id}]}),y||x()},[f,e.id,p,x,y]),M=i.useCallback(()=>{s(e.id)},[e.id,s]),T=i.useCallback(A=>{t(e.id,{schema:A})},[e.id,t]),N=i.useCallback(()=>{d({table:e,schemas:l,onConfirm:T})},[d,e,l,T]),I=i.useCallback(A=>{A.stopPropagation();const V=dl(e);V.name=`${V.name}_copy`,V.x+=30,V.y+=50,o(V)},[o,e]),P=i.useCallback(()=>n.jsxs(Zt,{children:[n.jsx(Jt,{children:n.jsx(xe,{children:n.jsx(Nn,{})})}),n.jsxs(Et,{className:"w-fit min-w-40",children:[n.jsx(en,{children:u("side_panel.tables_section.table.table_actions.title")}),n.jsx(He,{}),l.length>0?n.jsxs(n.Fragment,{children:[n.jsx(Je,{children:n.jsxs($e,{className:"flex justify-between gap-4",onClick:A=>{A.stopPropagation(),N()},children:[u("side_panel.tables_section.table.table_actions.change_schema"),n.jsx(ys,{className:"size-3.5"})]})}),n.jsx(He,{})]}):null,n.jsxs(Je,{children:[n.jsxs($e,{className:"flex justify-between gap-4",onClick:A=>{A.stopPropagation(),a(e.id)},children:[u("side_panel.tables_section.table.table_actions.add_field"),n.jsx(Un,{className:"size-3.5"})]}),n.jsxs($e,{className:"flex justify-between gap-4",onClick:A=>{A.stopPropagation(),r(e.id)},children:[u("side_panel.tables_section.table.table_actions.add_index"),n.jsx(qn,{className:"size-3.5"})]})]}),n.jsx(He,{}),n.jsx(Je,{children:n.jsxs($e,{onClick:I,className:"flex justify-between",children:[u("side_panel.tables_section.table.table_actions.duplicate_table"),n.jsx(Dl,{className:"size-3.5"})]})}),n.jsx(He,{}),n.jsx(Je,{children:n.jsxs($e,{onClick:M,className:"flex justify-between !text-red-700",children:[u("side_panel.tables_section.table.table_actions.delete_table"),n.jsx(tt,{className:"size-3.5 text-red-700"})]})})]})]}),[e.id,a,r,M,I,u,N,l.length]);let L;return l.length>1&&c&&c.length>1&&(L=e.schema),n.jsxs("div",{className:"group flex h-11 flex-1 items-center justify-between gap-1 overflow-hidden",children:[n.jsx("div",{className:"flex cursor-move items-center justify-center",...w,children:n.jsx(js,{className:"size-4 text-muted-foreground"})}),n.jsx("div",{className:"flex min-w-0 flex-1 px-1",children:h?n.jsx(_e,{ref:g,autoFocus:!0,type:"text",placeholder:e.name,value:m,onClick:A=>A.stopPropagation(),onChange:A=>b(A.target.value),className:"h-7 w-full focus-visible:ring-0"}):n.jsxs(ie,{children:[n.jsx(le,{asChild:!0,children:n.jsxs("div",{onDoubleClick:_,className:"text-editable truncate px-2 py-0.5",children:[e.name,n.jsx("span",{className:"text-xs text-muted-foreground",children:L?` (${L})`:""})]})}),n.jsx(ce,{children:u("tool_tips.double_click_to_edit")})]})}),n.jsx("div",{className:"flex flex-row-reverse",children:h?n.jsx(xe,{onClick:C,children:n.jsx(wn,{})}):n.jsxs(n.Fragment,{children:[n.jsx("div",{children:P()}),n.jsxs("div",{className:"flex flex-row-reverse md:hidden md:group-hover:flex",children:[n.jsx(xe,{onClick:_,children:n.jsx(gs,{})}),n.jsx(xe,{onClick:R,children:n.jsx(vn,{})})]})]})})]})},tn=j.forwardRef(({className:e,variant:t,size:s,...r},a)=>n.jsx(Wr,{ref:a,className:D(Kl({variant:t,size:s,className:e})),...r}));tn.displayName=Wr.displayName;const is=j.forwardRef((e,t)=>n.jsx(tn,{...e,ref:t,variant:"default",className:"h-8 w-[32px] p-2 text-xs text-slate-500 hover:bg-primary-foreground hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-200"}));is.displayName=tn.displayName;var Ws="Checkbox",[Cf,lh]=St(Ws),[Nf,Sf]=Cf(Ws),ri=i.forwardRef((e,t)=>{const{__scopeCheckbox:s,name:r,checked:a,defaultChecked:o,required:l,disabled:c,value:d="on",onCheckedChange:u,form:f,...p}=e,[x,h]=i.useState(null),v=ge(t,C=>h(C)),m=i.useRef(!1),b=x?f||!!x.closest("form"):!0,[y=!1,g]=Ge({prop:a,defaultProp:o,onChange:u}),w=i.useRef(y);return i.useEffect(()=>{const C=x==null?void 0:x.form;if(C){const S=()=>g(w.current);return C.addEventListener("reset",S),()=>C.removeEventListener("reset",S)}},[x,g]),n.jsxs(Nf,{scope:s,state:y,disabled:c,children:[n.jsx(Y.button,{type:"button",role:"checkbox","aria-checked":et(y)?"mixed":y,"aria-required":l,"data-state":ii(y),"data-disabled":c?"":void 0,disabled:c,value:d,...p,ref:v,onKeyDown:z(e.onKeyDown,C=>{C.key==="Enter"&&C.preventDefault()}),onClick:z(e.onClick,C=>{g(S=>et(S)?!0:!S),b&&(m.current=C.isPropagationStopped(),m.current||C.stopPropagation())})}),b&&n.jsx(_f,{control:x,bubbles:!m.current,name:r,value:d,checked:y,required:l,disabled:c,form:f,style:{transform:"translateX(-100%)"},defaultChecked:et(o)?!1:o})]})});ri.displayName=Ws;var ai="CheckboxIndicator",oi=i.forwardRef((e,t)=>{const{__scopeCheckbox:s,forceMount:r,...a}=e,o=Sf(ai,s);return n.jsx(Cr,{present:r||et(o.state)||o.state===!0,children:n.jsx(Y.span,{"data-state":ii(o.state),"data-disabled":o.disabled?"":void 0,...a,ref:t,style:{pointerEvents:"none",...e.style}})})});oi.displayName=ai;var _f=e=>{const{control:t,checked:s,bubbles:r=!0,defaultChecked:a,...o}=e,l=i.useRef(null),c=oa(s),d=ul(t);i.useEffect(()=>{const f=l.current,p=window.HTMLInputElement.prototype,h=Object.getOwnPropertyDescriptor(p,"checked").set;if(c!==s&&h){const v=new Event("click",{bubbles:r});f.indeterminate=et(s),h.call(f,et(s)?!1:s),f.dispatchEvent(v)}},[c,s,r]);const u=i.useRef(et(s)?!1:s);return n.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:a??u.current,...o,tabIndex:-1,ref:l,style:{...e.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function et(e){return e==="indeterminate"}function ii(e){return et(e)?"indeterminate":e?"checked":"unchecked"}var li=ri,Rf=oi;const qs=j.forwardRef(({className:e,...t},s)=>n.jsx(li,{ref:s,className:D("peer h-4 w-4 shrink-0 rounded-sm border border-primary shadow focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...t,children:n.jsx(Rf,{className:D("flex items-center justify-center text-current"),children:n.jsx(xn,{className:"size-4"})})}));qs.displayName=li.displayName;const Ys=j.forwardRef(({className:e,...t},s)=>n.jsx("textarea",{className:D("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",e),ref:s,...t}));Ys.displayName="Textarea";const Mf=({field:e,updateField:t,removeField:s})=>{var c;const{t:r}=ee(),[a,o]=j.useState(e),l=i.useRef(null);return i.useEffect(()=>(l.current=fl(d=>{t({comments:d==null?void 0:d.comments,characterMaximumLength:d==null?void 0:d.characterMaximumLength,unique:d==null?void 0:d.unique})},200),()=>{l.current=null}),[t]),i.useEffect(()=>{l.current&&!ic(e,a)&&l.current(a)},[a,e]),n.jsxs(bs,{onOpenChange:d=>{d&&o(e)},children:[n.jsx(vs,{asChild:!0,children:n.jsx(q,{variant:"ghost",className:"h-8 w-[32px] p-2 text-slate-500 hover:bg-primary-foreground hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-200",children:n.jsx(sa,{className:"size-3.5"})})}),n.jsx(ws,{className:"w-52",children:n.jsxs("div",{className:"flex flex-col gap-2",children:[n.jsx("div",{className:"text-sm font-semibold",children:r("side_panel.tables_section.table.field_actions.title")}),n.jsx(Nt,{orientation:"horizontal"}),n.jsxs("div",{className:"flex flex-col gap-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx(at,{htmlFor:"width",className:"text-subtitle",children:r("side_panel.tables_section.table.field_actions.unique")}),n.jsx(qs,{checked:a.unique,disabled:e.primaryKey,onCheckedChange:d=>o(u=>({...u,unique:!!d}))})]}),(c=Il(e.type.id))!=null&&c.hasCharMaxLength?n.jsxs("div",{className:"flex flex-col gap-2",children:[n.jsx(at,{htmlFor:"width",className:"text-subtitle",children:r("side_panel.tables_section.table.field_actions.character_length")}),n.jsx(_e,{value:a.characterMaximumLength??"",type:"number",onChange:d=>o(u=>({...u,characterMaximumLength:d.target.value})),className:"w-full rounded-md bg-muted text-sm"})]}):null,n.jsxs("div",{className:"flex flex-col gap-2",children:[n.jsx(at,{htmlFor:"width",className:"text-subtitle",children:r("side_panel.tables_section.table.field_actions.comments")}),n.jsx(Ys,{value:a.comments,onChange:d=>o(u=>({...u,comments:d.target.value})),placeholder:r("side_panel.tables_section.table.field_actions.no_comments"),className:"w-full rounded-md bg-muted text-sm"})]})]}),n.jsx(Nt,{orientation:"horizontal"}),n.jsxs(q,{variant:"outline",className:"flex gap-2 !text-red-700",onClick:s,children:[n.jsx(tt,{className:"size-3.5 text-red-700"}),r("side_panel.tables_section.table.field_actions.delete_field")]})]})})]})},Df=({field:e,updateField:t,removeField:s})=>{const{databaseType:r}=ne(),{t:a}=ee(),{attributes:o,listeners:l,setNodeRef:c,transform:d,transition:u}=An({id:e.id}),f=Fn[r].map(h=>({label:h.name,value:h.id,regex:h.hasCharMaxLength?`^${h.name}\\(\\d+\\)$`:void 0,extractRegex:h.hasCharMaxLength?/\((\d+)\)/:void 0})),p=i.useCallback((h,v)=>{const m=Fn[r].find(y=>y.id===h)??{id:h,name:h};let b;v!=null&&v.length&&(m!=null&&m.hasCharMaxLength)?b=v[1]:e.characterMaximumLength&&(m!=null&&m.hasCharMaxLength)&&(b=e.characterMaximumLength),t({characterMaximumLength:b,type:kl(m??{id:h,name:h})})},[t,r,e.characterMaximumLength]),x={transform:dt.Translate.toString(d),transition:u};return n.jsxs("div",{className:"flex flex-1 touch-none flex-row justify-between p-1",ref:c,style:x,...o,children:[n.jsxs("div",{className:"flex w-8/12 items-center justify-start gap-1 overflow-hidden",children:[n.jsx("div",{className:"flex w-4 shrink-0 cursor-move items-center justify-center",...l,children:n.jsx(js,{className:"size-3.5  text-muted-foreground"})}),n.jsxs(ie,{children:[n.jsx(le,{asChild:!0,children:n.jsx("span",{className:"w-5/12",children:n.jsx(_e,{className:"h-8 w-full !truncate focus-visible:ring-0",type:"text",placeholder:a("side_panel.tables_section.table.field_name"),value:e.name,onChange:h=>t({name:h.target.value})})})}),n.jsx(ce,{children:e.name})]}),n.jsxs(ie,{children:[n.jsx(le,{className:"flex h-8 !w-5/12",asChild:!0,children:n.jsx("span",{children:n.jsx(yn,{className:"flex h-8 min-h-8 w-full",options:f,placeholder:a("side_panel.tables_section.table.field_type"),value:e.type.id,valueSuffix:e.characterMaximumLength?`(${e.characterMaximumLength})`:"",optionSuffix:h=>{const v=Fn[r].find(m=>m.id===h.value);return v&&v.hasCharMaxLength?`(${e.characterMaximumLength?e.characterMaximumLength:"n"})`:""},onChange:p,emptyPlaceholder:a("side_panel.tables_section.table.no_types_found")})})}),n.jsxs(ce,{children:[e.type.name,e.characterMaximumLength?`(${e.characterMaximumLength})`:""]})]})]}),n.jsxs("div",{className:"flex w-4/12 justify-end gap-1 overflow-hidden",children:[n.jsxs(ie,{children:[n.jsx(le,{asChild:!0,children:n.jsx("span",{children:n.jsx(is,{pressed:e.nullable,onPressedChange:h=>t({nullable:h}),children:"N"})})}),n.jsx(ce,{children:a("side_panel.tables_section.table.nullable")})]}),n.jsxs(ie,{children:[n.jsx(le,{asChild:!0,children:n.jsx("span",{children:n.jsx(is,{pressed:e.primaryKey,onPressedChange:h=>t({unique:h,primaryKey:h}),children:n.jsx(El,{className:"h-3.5"})})})}),n.jsx(ce,{children:a("side_panel.tables_section.table.primary_key")})]}),n.jsx(Mf,{field:e,updateField:t,removeField:s})]})]})},ci=j.forwardRef((e,t)=>n.jsx(tn,{...e,ref:t,variant:"default",className:"h-8 w-[32px] p-2 text-xs text-slate-500 hover:bg-primary-foreground hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-200"}));ci.displayName=tn.displayName;const If=({fields:e,index:t,updateIndex:s,removeIndex:r})=>{const{t:a}=ee(),o=e.map(c=>({label:c.name,value:c.id})),l=c=>{const d=Array.isArray(c)?c:[c];s({fieldIds:d})};return n.jsxs("div",{className:"flex flex-1 flex-row justify-between gap-2 p-1",children:[n.jsx(yn,{className:"flex h-8 min-h-8 min-w-0 flex-1",multiple:!0,oneLine:!0,options:o,placeholder:a("side_panel.tables_section.table.index_select_fields"),value:t.fieldIds,onChange:l,emptyPlaceholder:a("side_panel.tables_section.table.no_types_found"),keepOrder:!0}),n.jsxs("div",{className:"flex shrink-0 gap-1",children:[n.jsxs(ie,{children:[n.jsx(le,{asChild:!0,children:n.jsx("span",{children:n.jsx(ci,{pressed:t.unique,onPressedChange:c=>s({unique:!!c}),children:"U"})})}),n.jsx(ce,{children:a("side_panel.tables_section.table.index_actions.unique")})]}),n.jsxs(bs,{children:[n.jsx(vs,{asChild:!0,children:n.jsx(q,{variant:"ghost",className:"h-8 w-[32px] p-2 text-slate-500 hover:bg-primary-foreground hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-200",children:n.jsx(sa,{className:"size-3.5"})})}),n.jsx(ws,{className:"w-52",children:n.jsxs("div",{className:"flex flex-col gap-2",children:[n.jsx("div",{className:"text-sm font-semibold",children:a("side_panel.tables_section.table.index_actions.title")}),n.jsx(Nt,{orientation:"horizontal"}),n.jsxs("div",{className:"flex flex-col gap-2",children:[n.jsx(at,{htmlFor:"width",className:"text-subtitle",children:a("side_panel.tables_section.table.index_actions.name")}),n.jsx(_e,{value:t.name,onChange:c=>s({name:c.target.value})})]}),n.jsxs("div",{className:"mt-2 flex items-center justify-between",children:[n.jsx(at,{htmlFor:"width",className:"text-subtitle",children:a("side_panel.tables_section.table.index_actions.unique")}),n.jsx(qs,{checked:t.unique,onCheckedChange:c=>s({unique:!!c})})]}),n.jsx(Nt,{orientation:"horizontal"}),n.jsxs(q,{variant:"outline",className:"flex gap-2 !text-red-700",onClick:r,children:[n.jsx(tt,{className:"size-3.5 text-red-700"}),a("side_panel.tables_section.table.index_actions.delete_index")]})]})})]})]})]})},Xs=j.forwardRef(({color:e,onChange:t},s)=>n.jsxs(bs,{children:[n.jsx(vs,{asChild:!0,ref:s,children:n.jsx("div",{className:"h-6 w-8 cursor-pointer rounded-md border-2 border-muted transition-shadow hover:shadow-md",style:{backgroundColor:e}})}),n.jsx(ws,{className:"w-fit",children:n.jsx("div",{className:"grid grid-cols-4 gap-2",children:lc.map(r=>n.jsx("div",{className:"size-8 cursor-pointer rounded-md border-2 border-muted transition-shadow hover:shadow-md",style:{backgroundColor:r},onClick:()=>t(r)},r))})})]}));Xs.displayName="ColorPicker";const kf=({table:e})=>{const{updateField:t,removeField:s,createField:r,createIndex:a,removeIndex:o,updateIndex:l,updateTable:c}=ne(),{t:d}=ee(),{color:u}=e,[f,p]=j.useState(["fields"]),x=$s(Ls(Xt)),h=b=>{const{active:y,over:g}=b;if((y==null?void 0:y.id)!==(g==null?void 0:g.id)&&g&&y){const w=e.fields,C=w.findIndex(_=>_.id===y.id),S=w.findIndex(_=>_.id===g.id);c(e.id,{fields:Qt(w,C,S)})}},v=i.useCallback(b=>{b.stopPropagation(),p(y=>y.includes("indexes")?y:[...y,"indexes"]),a(e.id)},[a,e.id,p]),m=i.useCallback(b=>{b.stopPropagation(),r(e.id)},[r,e.id]);return n.jsxs("div",{className:"flex flex-col gap-1 rounded-b-md border-l-[6px] px-1",style:{borderColor:u},children:[n.jsxs(In,{type:"multiple",className:"w-full",value:f,onValueChange:b=>p(b),children:[n.jsxs(ot,{value:"fields",className:"mb-2 border-y-0",children:[n.jsx(it,{iconPosition:"right",className:"group flex flex-1 p-0 px-2 py-1 text-xs text-subtitle hover:bg-secondary",asChild:!0,children:n.jsxs("div",{className:"flex flex-1 items-center justify-between",children:[n.jsxs("div",{className:"flex flex-row items-center gap-1",children:[n.jsx(Un,{className:"size-4"}),d("side_panel.tables_section.table.fields")]}),n.jsx("div",{className:"flex flex-row-reverse",children:n.jsx("div",{className:"hidden flex-row-reverse group-hover:flex",children:n.jsx(q,{variant:"ghost",className:"size-4 p-0 text-xs hover:bg-primary-foreground",onClick:m,children:n.jsx(an,{className:"size-4 shrink-0 text-muted-foreground transition-transform duration-200"})})})})]})}),n.jsx(lt,{className:"flex flex-col pb-0 pt-1",children:n.jsxs(Hs,{sensors:x,collisionDetection:zs,onDragEnd:h,children:[n.jsx(Ks,{items:e.fields,strategy:Gs,children:e.fields.map(b=>n.jsx(Df,{field:b,updateField:y=>t(e.id,b.id,y),removeField:()=>s(e.id,b.id)},b.id))}),n.jsx("div",{className:"flex justify-start p-1",children:n.jsxs(q,{variant:"ghost",className:"flex h-7 items-center gap-1 px-2 text-xs",onClick:m,children:[n.jsx(an,{className:"size-4 text-muted-foreground"}),d("side_panel.tables_section.table.add_field")]})})]})})]}),n.jsxs(ot,{value:"indexes",className:"mb-2 border-y-0",children:[n.jsx(it,{iconPosition:"right",className:"group flex flex-1 p-0 px-2 py-1 text-xs text-subtitle hover:bg-secondary",asChild:!0,children:n.jsxs("div",{className:"flex flex-1 items-center justify-between",children:[n.jsxs("div",{className:"flex flex-row items-center gap-1",children:[n.jsx(qn,{className:"size-4"}),d("side_panel.tables_section.table.indexes")]}),n.jsx("div",{className:"flex flex-row-reverse",children:n.jsx("div",{className:"hidden flex-row-reverse group-hover:flex",children:n.jsx(q,{variant:"ghost",className:"size-4 p-0 text-xs hover:bg-primary-foreground",onClick:v,children:n.jsx(an,{className:"size-4 shrink-0 text-muted-foreground transition-transform duration-200"})})})})]})}),n.jsxs(lt,{className:"pb-0 pt-1",children:[e.indexes.map(b=>n.jsx(If,{index:b,removeIndex:()=>o(e.id,b.id),updateIndex:y=>l(e.id,b.id,y),fields:e.fields},b.id)),n.jsx("div",{className:"flex justify-start p-1",children:n.jsxs(q,{variant:"ghost",className:"flex h-7 items-center gap-1 px-2 text-xs",onClick:v,children:[n.jsx(an,{className:"size-4 text-muted-foreground"}),d("side_panel.tables_section.table.add_index")]})})]})]}),n.jsxs(ot,{value:"comments",className:"border-y-0",children:[n.jsx(it,{iconPosition:"right",className:"group flex flex-1 p-0 px-2 py-1 text-xs text-subtitle hover:bg-secondary",asChild:!0,children:n.jsx("div",{className:"flex flex-1 items-center justify-between",children:n.jsxs("div",{className:"flex flex-row items-center gap-1",children:[n.jsx(Tl,{className:"size-4"}),d("side_panel.tables_section.table.comments")]})})}),n.jsx(lt,{className:"pb-0 pt-1",children:n.jsx(Ys,{value:e.comments,onChange:b=>c(e.id,{comments:b.target.value}),placeholder:d("side_panel.tables_section.table.no_comments"),className:"w-full rounded-md bg-muted text-sm focus-visible:ring-0"})})]})]}),n.jsx(Nt,{className:""}),n.jsxs("div",{className:"flex flex-1 items-center justify-between",children:[n.jsx(Xs,{color:u,onChange:b=>c(e.id,{color:b})}),n.jsxs("div",{className:"flex gap-1",children:[n.jsxs(q,{variant:"outline",className:"h-8 p-2 text-xs",onClick:v,children:[n.jsx(qn,{className:"h-4"}),d("side_panel.tables_section.table.add_index")]}),n.jsxs(q,{variant:"outline",className:"h-8 p-2 text-xs",onClick:m,children:[n.jsx(Un,{className:"h-4"}),d("side_panel.tables_section.table.add_field")]})]})]})]})},di=j.forwardRef(({table:e},t)=>{const{attributes:s,setNodeRef:r,transform:a,transition:o}=An({id:e.id}),l={transform:dt.Translate.toString(a),transition:o};return n.jsx(ot,{value:e.id,className:"border-none",ref:t,children:n.jsxs("div",{className:"w-full rounded-md border-b",ref:r,style:l,...s,children:[n.jsx(it,{className:"w-full rounded-md border-l-[6px] px-2 py-0 hover:bg-accent hover:no-underline data-[state=open]:rounded-b-none",style:{borderColor:e.color},asChild:!0,children:n.jsx(jf,{table:e})}),n.jsx(lt,{children:n.jsx(kf,{table:e})})]})})});di.displayName="TableListItem";const Ef=({tables:e})=>{const{updateTablesState:t}=ne(),{openTableFromSidebar:s,openedTableInSidebar:r}=he(),a=j.useRef(null),o=i.useMemo(()=>e.reduce((f,p)=>(f[p.id]=j.createRef(),f),{}),[e]),l=i.useCallback(f=>{var p,x;return(x=(p=o[f])==null?void 0:p.current)==null?void 0:x.scrollIntoView({behavior:"smooth",block:"start"})},[o]),c=$s(Ls(Xt)),d=f=>{const{active:p,over:x}=f;if((p==null?void 0:p.id)!==(x==null?void 0:x.id)&&x&&p){const h=e.findIndex(b=>b.id===p.id),v=e.findIndex(b=>b.id===x.id),m=Qt(e,h,v).reduce((b,y,g)=>(b.set(y.id,g),b),new Map);t(b=>b.map(y=>({id:y.id,order:m.get(y.id)})))}},u=i.useCallback(()=>{r&&a.current!==r&&(a.current=r,l(r))},[l,r]);return n.jsx(In,{type:"single",collapsible:!0,className:"flex w-full flex-col gap-1",value:r,onValueChange:s,onAnimationEnd:u,children:n.jsx(Hs,{sensors:c,collisionDetection:zs,onDragEnd:d,children:n.jsx(Ks,{items:e,strategy:Gs,children:e.sort((f,p)=>f.order&&p.order===void 0?-1:f.order===void 0&&p.order?1:f.order!==void 0&&p.order!==void 0?f.order-p.order:f.isView===p.isView?f.name.localeCompare(p.name):f.isView?1:-1).map(f=>n.jsx(di,{table:f,ref:o[f.id]},f.id))})})})},Tf="/assets/empty_state-FM0xVkGj.png",Af="/assets/empty_state_dark-CGFOiUtp.png",nn=i.forwardRef(({title:e,description:t,className:s,titleClassName:r,descriptionClassName:a,imageClassName:o},l)=>{const{effectiveTheme:c}=Cn();return n.jsxs("div",{ref:l,className:D("flex flex-1 flex-col items-center justify-center space-y-1",s),children:[n.jsx("img",{src:c==="dark"?Af:Tf,alt:"Empty state",className:D("mb-2 w-20",o)}),n.jsx(at,{className:D("text-base",r),children:e}),n.jsx(at,{className:D("text-sm font-normal text-muted-foreground",a),children:t})]})});nn.displayName="EmptyState";const Pf=e=>e==="dark"?"dbml-dark":"dbml-light",Of=e=>{switch(e){case W.SQL_SERVER:return"mssql";case W.MYSQL:case W.MARIADB:return"mysql";case W.POSTGRESQL:case W.COCKROACHDB:case W.SQLITE:return"postgres";default:return"postgres"}},Lf=e=>{var r,a;const t=((r=e.tables)==null?void 0:r.map(o=>{const l={...o};return o.name==="relation"&&(l.fields=o.fields.map(c=>{const d={...c};return c.name==="from"?d.name="source":c.name==="to"&&(d.name="target"),d})),l}))||[],s=((a=e.relationships)==null?void 0:a.map(o=>{var f;const l=(f=e.tables)==null?void 0:f.find(p=>p.name==="relation");if(!l)return o;const c={...o},d=l.fields.find(p=>p.name==="from");if(d&&o.targetFieldId===d.id){const p=t.find(h=>h.name==="relation"),x=p==null?void 0:p.fields.find(h=>h.name==="source");x&&(c.targetFieldId=x.id)}const u=l.fields.find(p=>p.name==="to");if(u&&o.targetFieldId===u.id){const p=t.find(h=>h.name==="relation"),x=p==null?void 0:p.fields.find(h=>h.name==="target");x&&(c.targetFieldId=x.id)}return c}))||[];return{...e,tables:t,relationships:s}},$f=e=>{let t=e;const s=new Set;let r=0;return t=t.replace(/ADD CONSTRAINT (\w+) FOREIGN KEY/g,(a,o)=>s.has(o)?`ADD CONSTRAINT ${o}_${++r} FOREIGN KEY`:(s.add(o),a)),t=t.replace(/\?\?/g,"__"),t},zf=e=>{const t=/Ref\s+"([^"]+)"\s*:\s*"([^"]+)"\."([^"]+)"\s*([<>*])\s*"([^"]+)"\."([^"]+)"/g,s=[];let r;for(;(r=t.exec(e))!==null;)s.push({refName:r[1],sourceTable:r[2],sourceField:r[3],direction:r[4],targetTable:r[5],targetField:r[6]});const a={},o=/Table\s+"([^"]+)"\s*{([^}]*)}/g;let l;for(;(l=o.exec(e))!==null;){const h=l[1];a[h]={start:l.index,end:l.index+l[0].length,content:l[2]}}if(s.length===0||Object.keys(a).length===0)return e;const c=new Map(Object.entries(a));s.forEach(h=>{let v,m,b;h.direction==="<"?(v=h.targetTable,m=h.targetField,b=`[ref: < "${h.sourceTable}"."${h.sourceField}"]`):(v=h.sourceTable,m=h.sourceField,b=`[ref: > "${h.targetTable}"."${h.targetField}"]`);const y=c.get(v);if(y){const g=new RegExp(`("(${m})"[^
]*?)([ 	]*[[].*?[]])?([ 	]*//.*)?$`,"m");let w=y.content;w=w.replace(g,(C,S,_,R,M)=>C.includes("[ref:")?C:`${S.trim()} ${b}${R||""}${M||""}`),w!==y.content&&(y.content=w,c.set(v,y))}});let d="",u=0;const f=Object.entries(a).sort(([,h],[,v])=>h.start-v.start);for(const[h,v]of f)d+=e.substring(u,v.start),d+=`Table "${h}" {${v.content}}`,u=v.end;return d+=e.substring(u),d.split(`
`).filter(h=>!h.trim().startsWith("Ref ")).join(`
`).trim()},vr=e=>new Set(["CASE","ORDER","GROUP","FROM","TO","USER"]).has(e.toUpperCase()),wr=e=>e.replace(/"char "/g,"char").replace(/"char \(([0-9]+)\)"/g,"char($1)").replace(/"character \(([0-9]+)\)"/g,"character($1)"),Ff=({filteredTables:e})=>{const{currentDiagram:t}=ne(),{effectiveTheme:s}=Cn(),{toast:r}=Al(),[a,o]=i.useState("standard");i.useEffect(()=>{let f=!1;const p=new Set;if(e.forEach(x=>{x.fields.forEach(h=>{h.name===""&&(f=!0,p.add(x.name))})}),f){const x=Array.from(p).join(", ");r({title:"Warning",description:`Some fields had empty names in tables: [${x}] and were excluded from the DBML export.`,variant:"default"})}},[e,r]);const{standardDbml:l,inlineDbml:c}=i.useMemo(()=>{var w,C,S;const f=e.map(_=>{const R=_.fields.filter(M=>M.name!=="");return{..._,fields:R}}),p={...t,tables:f,relationships:((w=t.relationships)==null?void 0:w.filter(_=>{const R=f.find(I=>I.id===_.sourceTableId),M=f.find(I=>I.id===_.targetTableId),T=R==null?void 0:R.fields.some(I=>I.id===_.sourceFieldId),N=M==null?void 0:M.fields.some(I=>I.id===_.targetFieldId);return R&&M&&T&&N}))??[]},x=Lf(p),h=new Map,v=[],m={...x,tables:((C=x.tables)==null?void 0:C.map(_=>{const R=_.name;let M=R.replace(/[^\w]/g,"_");if(vr(M)){const I=`${M}_table`;h.set(I,R),M=I}const T=new Map,N=_.fields.map(I=>{const P=I.name.replace(/[^\w]/g,"_");let L=P;const A=T.get(P)||0;A>0&&(L=`${P}_${A+1}`),T.set(P,A+1);const V={...I,name:L};if(delete V.comments,vr(L)){const G=`${L}_field`;v.push({table:M,originalName:L,newName:G}),V.name=G}return V});return{..._,name:M,fields:N,indexes:(_.indexes||[]).map(I=>({...I,name:I.name?I.name.replace(/[^\w]/g,"_"):`idx_${Math.random().toString(36).substring(2,8)}`}))}}))??[],relationships:((S=x.relationships)==null?void 0:S.map((_,R)=>({..._,name:`fk_${R}_${_.name?_.name.replace(/[^\w]/g,"_"):Math.random().toString(36).substring(2,8)}`})))??[]};let b="",y="",g="";try{g=Ul({diagram:m,targetDatabaseType:t.databaseType,isDBMLFlow:!0}),g=$f(g),h.forEach((_,R)=>{const M=_.replace(/'/g,"\\'");g+=`
COMMENT ON TABLE "${R}" IS 'Original name was "${M}" (renamed due to SQL keyword conflict).';`}),v.forEach(({table:_,originalName:R,newName:M})=>{const T=R.replace(/'/g,"\\'");g+=`
COMMENT ON COLUMN "${_}"."${M}" IS 'Original name was "${T}" (renamed due to SQL keyword conflict).';`}),b=wr(Wl.importer.import(g,Of(t.databaseType))),y=wr(zf(b))}catch(_){console.error("Error during DBML generation process:",_,"Input SQL was:",g);const R=`// Error generating DBML: ${_ instanceof Error?_.message:"Unknown error"}`;b=R,y=R,_ instanceof Error?r({title:"DBML Export Error",description:`Could not generate DBML: ${_.message.substring(0,100)}${_.message.length>100?"...":""}`,variant:"destructive"}):r({title:"DBML Export Error",description:"Could not generate DBML due to an unknown error",variant:"destructive"})}return{standardDbml:b,inlineDbml:y}},[t,e,r]),d=a==="inline"?c:l,u=()=>{o(f=>f==="inline"?"standard":"inline")};return n.jsx(ql,{code:d,className:"my-0.5",actions:[{label:`Show ${a==="inline"?"Standard":"Inline"} Refs`,icon:hc,onClick:u}],editorProps:{height:"100%",defaultLanguage:"dbml",beforeMount:Yl,loading:!1,theme:Pf(s),options:{wordWrap:"off",mouseWheelZoom:!1,domReadOnly:!0}}})},Bf=()=>{const{createTable:e,tables:t,filteredSchemas:s,schemas:r}=ne(),{openTableSchemaDialog:a}=gn(),o=Gr(),{t:l}=ee(),{openTableFromSidebar:c}=he(),[d,u]=j.useState(""),[f,p]=i.useState(!1),x=j.useRef(null),h=i.useMemo(()=>{const g=C=>{var S;return!((S=d==null?void 0:d.trim)!=null&&S.call(d))||C.name.toLowerCase().includes(d.toLowerCase())},w=C=>Pl(C,s);return t.filter(w).filter(g)},[t,d,s]),v=i.useCallback(async g=>{const C=-o.x/o.zoom+80/o.zoom,S=-o.y/o.zoom+80/o.zoom,_=await e({x:C,y:S,schema:g});c(_.id)},[e,c,o.x,o.y,o.zoom]),m=i.useCallback(async()=>{var g;if(u(""),((s==null?void 0:s.length)??0)>1)a({onConfirm:v,schemas:r.filter(w=>s==null?void 0:s.includes(w.id))});else{const w=(s==null?void 0:s.length)===1?(g=r.find(C=>C.id===s[0]))==null?void 0:g.name:void 0;v(w)}},[v,s,a,r,u]),b=i.useCallback(()=>{u("")},[]),y=i.useMemo(()=>Nr(),[]);return Wn(y==="mac"?"meta+f":"ctrl+f",()=>{var g;(g=x.current)==null||g.focus()},{preventDefault:!0},[x]),Wn(y==="mac"?"meta+p":"ctrl+p",()=>{p(g=>!g)},{preventDefault:!0},[p]),n.jsxs("section",{className:"flex flex-1 flex-col overflow-hidden px-2","data-vaul-no-drag":!0,children:[n.jsxs("div",{className:"flex items-center justify-between gap-4 py-1",children:[n.jsx("div",{children:n.jsxs(ie,{children:[n.jsx(le,{asChild:!0,children:n.jsx("span",{children:n.jsx(q,{variant:"ghost",className:"size-8 p-0",onClick:()=>p(g=>!g),children:f?n.jsx(bc,{className:"size-4"}):n.jsx(Xl,{className:"size-4"})})})}),n.jsxs(ce,{children:[l(f?"side_panel.tables_section.show_list":"side_panel.tables_section.show_dbml"),y==="mac"?" (⌘P)":" (Ctrl+P)"]})]})}),n.jsx("div",{className:"flex-1",children:n.jsx(_e,{ref:x,type:"text",placeholder:l("side_panel.tables_section.filter"),className:"h-8 w-full focus-visible:ring-0",value:d,onChange:g=>u(g.target.value)})}),n.jsxs(q,{variant:"secondary",className:"h-8 p-2 text-xs",onClick:m,children:[n.jsx(na,{className:"h-4"}),l("side_panel.tables_section.add_table")]})]}),n.jsx("div",{className:"flex flex-1 flex-col overflow-hidden",children:f?n.jsx(Ff,{filteredTables:h}):n.jsx(jn,{className:"h-full",children:t.length===0?n.jsx(nn,{title:l("side_panel.tables_section.empty_state.title"),description:l("side_panel.tables_section.empty_state.description"),className:"mt-20"}):d&&h.length===0?n.jsxs("div",{className:"mt-10 flex flex-col items-center gap-2",children:[n.jsx("div",{className:"text-sm text-muted-foreground",children:l("side_panel.tables_section.no_results")}),n.jsxs(q,{variant:"outline",size:"sm",onClick:b,className:"gap-1",children:[n.jsx(qr,{className:"size-3.5"}),l("side_panel.tables_section.clear")]})]}):n.jsx(Ef,{tables:h})})})]})},Vf=({relationship:e})=>{const{updateRelationship:t,removeRelationship:s}=ne(),{fitView:r,deleteElements:a,setEdges:o}=_t(),{t:l}=ee(),{hideSidePanel:c}=he(),[d,u]=j.useState(!1),{isMd:f}=Rt("md"),[p,x]=j.useState(e.name),h=j.useRef(null),v=i.useCallback(()=>{d&&(p.trim()&&p!==e.name&&t(e.id,{name:p.trim()}),u(!1))},[p,e.id,t,d,e.name]);bn(h,v),Ct("Enter",v);const m=w=>{w.stopPropagation(),u(!0)},b=i.useCallback(w=>{w.stopPropagation(),o(C=>C.map(S=>S.id==e.id?{...S,selected:!0}:{...S,selected:!1})),r({duration:500,maxZoom:1,minZoom:1,nodes:[{id:e.sourceTableId},{id:e.targetTableId}]}),f||c()},[r,e.sourceTableId,e.targetTableId,o,e.id,f,c]),y=i.useCallback(()=>{s(e.id),a({edges:[{id:e.id}]})},[e.id,s,a]),g=i.useCallback(()=>n.jsxs(Zt,{children:[n.jsx(Jt,{children:n.jsx(xe,{children:n.jsx(Nn,{})})}),n.jsxs(Et,{className:"w-40",children:[n.jsx(en,{children:l("side_panel.relationships_section.relationship.relationship_actions.title")}),n.jsx(He,{}),n.jsx(Je,{children:n.jsxs($e,{onClick:y,className:"flex justify-between !text-red-700",children:[l("side_panel.relationships_section.relationship.relationship_actions.delete_relationship"),n.jsx(tt,{className:"size-3.5 text-red-700"})]})})]})]}),[y,l]);return n.jsxs("div",{className:"group flex h-11 flex-1 items-center justify-between overflow-hidden",children:[n.jsx("div",{className:"flex min-w-0 flex-1",children:d?n.jsx(_e,{ref:h,autoFocus:!0,type:"text",placeholder:e.name,value:p,onClick:w=>w.stopPropagation(),onChange:w=>x(w.target.value),className:"h-7 w-full focus-visible:ring-0"}):n.jsx("div",{className:"truncate",children:e.name})}),n.jsx("div",{className:"flex flex-row-reverse",children:d?n.jsx(xe,{onClick:v,children:n.jsx(wn,{})}):n.jsxs(n.Fragment,{children:[n.jsx("div",{children:g()}),n.jsxs("div",{className:"flex flex-row-reverse md:hidden md:group-hover:flex",children:[n.jsx(xe,{onClick:m,children:n.jsx(gs,{})}),n.jsx(xe,{onClick:b,children:n.jsx(vn,{})})]})]})})]})},Hf=({relationship:e})=>{const{getTable:t,getField:s,updateRelationship:r,removeRelationship:a}=ne(),{deleteElements:o}=_t(),{t:l}=ee(),c=i.useMemo(()=>uc({sourceCardinality:e.sourceCardinality,targetCardinality:e.targetCardinality}),[e.sourceCardinality,e.targetCardinality]),d=i.useCallback(v=>{const{sourceCardinality:m,targetCardinality:b}=fc(v);r(e.id,{sourceCardinality:m,targetCardinality:b})},[e.id,r]),u=t(e.targetTableId),f=s(e.targetTableId,e.targetFieldId),p=t(e.sourceTableId),x=s(e.sourceTableId,e.sourceFieldId),h=i.useCallback(()=>{a(e.id),o({edges:[{id:e.id}]})},[e.id,a,o]);return n.jsxs("div",{className:"my-1 flex flex-col rounded-b-md px-1",children:[n.jsxs("div",{className:"flex flex-col gap-6",children:[n.jsxs("div",{className:"flex items-center justify-between gap-1 text-xs",children:[n.jsxs("div",{className:"flex basis-1/2 flex-col gap-2 overflow-hidden text-xs",children:[n.jsxs("div",{className:"flex flex-row items-center gap-1",children:[n.jsx(Yr,{className:"size-4 text-subtitle"}),n.jsx("div",{className:"font-bold text-subtitle",children:l("side_panel.relationships_section.relationship.primary")})]}),n.jsxs(ie,{children:[n.jsx(le,{children:n.jsxs("div",{className:"truncate text-left text-sm",children:[p!=null&&p.schema?`${p.schema}.`:"",p==null?void 0:p.name,"(",x==null?void 0:x.name,")"]})}),n.jsxs(ce,{children:[p!=null&&p.schema?`${p.schema}.`:"",p==null?void 0:p.name,"(",x==null?void 0:x.name,")"]})]})]}),n.jsxs("div",{className:"flex basis-1/2 flex-col gap-2 overflow-hidden text-xs",children:[n.jsxs("div",{className:"flex flex-row items-center gap-1",children:[n.jsx(Xr,{className:"size-4 text-subtitle"}),n.jsx("div",{className:"font-bold text-subtitle",children:l("side_panel.relationships_section.relationship.foreign")})]}),n.jsxs(ie,{children:[n.jsx(le,{children:n.jsxs("div",{className:"truncate text-left text-sm",children:[u!=null&&u.schema?`${u.schema}.`:"",u==null?void 0:u.name,"(",f==null?void 0:f.name,")"]})}),n.jsxs(ce,{children:[u!=null&&u.schema?`${u.schema}.`:"",u==null?void 0:u.name,"(",f==null?void 0:f.name,")"]})]})]})]}),n.jsxs("div",{className:"flex flex-col gap-2 text-xs",children:[n.jsxs("div",{className:"flex flex-row items-center gap-1",children:[n.jsx(xc,{className:"size-4 text-subtitle"}),n.jsx("div",{className:"font-bold text-subtitle",children:l("side_panel.relationships_section.relationship.cardinality")})]}),n.jsxs(Ha,{value:c,onValueChange:d,children:[n.jsx(Ns,{className:"h-8",children:n.jsx(Ka,{})}),n.jsx(Ss,{children:n.jsxs(Ga,{children:[n.jsx(Ve,{value:"one_to_one",children:l("relationship_type.one_to_one")}),n.jsx(Ve,{value:"one_to_many",children:l("relationship_type.one_to_many")}),n.jsx(Ve,{value:"many_to_one",children:l("relationship_type.many_to_one")}),n.jsx(Ve,{value:"many_to_many",children:l("relationship_type.many_to_many")})]})})]})]})]}),n.jsx("div",{className:"flex flex-1 items-center justify-center pt-2",children:n.jsxs(q,{variant:"ghost",className:"h-8 p-2 text-xs",onClick:h,children:[n.jsx(tt,{className:"mr-1 size-3.5 text-red-700"}),n.jsx("div",{className:"text-red-700",children:l("side_panel.relationships_section.relationship.delete_relationship")})]})})]})},ui=j.forwardRef(({relationship:e},t)=>n.jsxs(ot,{value:e.id,className:"rounded-md",ref:t,children:[n.jsx(it,{asChild:!0,className:"w-full rounded-md px-2 py-0 hover:bg-accent hover:no-underline data-[state=open]:rounded-b-none",children:n.jsx(Vf,{relationship:e})}),n.jsx(lt,{className:"p-1 pb-0",children:n.jsx(Hf,{relationship:e})})]}));ui.displayName="RelationshipListItem";const Gf=({relationships:e})=>{const{openRelationshipFromSidebar:t,openedRelationshipInSidebar:s}=he(),r=j.useRef(null),a=e.reduce((c,d)=>(c[d.id]=j.createRef(),c),{}),o=i.useCallback(c=>{var d,u;return(u=(d=a[c])==null?void 0:d.current)==null?void 0:u.scrollIntoView({behavior:"smooth",block:"start"})},[a]),l=i.useCallback(()=>{s&&r.current!==s&&(r.current=s,o(s))},[o,s]);return n.jsx(In,{type:"single",collapsible:!0,className:"flex w-full flex-col gap-1",value:s,onValueChange:t,onAnimationEnd:l,children:e.map(c=>n.jsx(ui,{relationship:c,ref:a[c.id]},c.id))})},Kf=()=>{const{relationships:e,filteredSchemas:t}=ne(),[s,r]=j.useState(""),{closeAllRelationshipsInSidebar:a}=he(),{t:o}=ee(),{openCreateRelationshipDialog:l}=gn(),c=i.useMemo(()=>{const u=p=>{var x;return!((x=s==null?void 0:s.trim)!=null&&x.call(s))||p.name.toLowerCase().includes(s.toLowerCase())},f=p=>pc(p,t);return e.filter(f).filter(u)},[e,s,t]),d=i.useCallback(async()=>{r(""),l()},[l,r]);return n.jsxs("section",{className:"flex flex-1 flex-col overflow-hidden px-2",children:[n.jsxs("div",{className:"flex items-center justify-between gap-4 py-1",children:[n.jsx("div",{children:n.jsxs(ie,{children:[n.jsx(le,{asChild:!0,children:n.jsx("span",{children:n.jsx(q,{variant:"ghost",className:"size-8 p-0",onClick:a,children:n.jsx(ra,{className:"size-4"})})})}),n.jsx(ce,{children:o("side_panel.relationships_section.collapse")})]})}),n.jsx("div",{className:"flex-1",children:n.jsx(_e,{type:"text",placeholder:o("side_panel.relationships_section.filter"),className:"h-8 w-full focus-visible:ring-0",value:s,onChange:u=>r(u.target.value)})}),n.jsxs(q,{variant:"secondary",className:"h-8 p-2 text-xs",onClick:d,children:[n.jsx(Kr,{className:"h-4"}),o("side_panel.relationships_section.add_relationship")]})]}),n.jsx("div",{className:"flex flex-1 flex-col overflow-hidden",children:n.jsx(jn,{className:"h-full",children:e.length===0?n.jsx(nn,{title:o("side_panel.relationships_section.empty_state.title"),description:o("side_panel.relationships_section.empty_state.description"),className:"mt-20"}):n.jsx(Gf,{relationships:c})})})]})},Uf=({dependency:e})=>{const{removeDependency:t,getTable:s}=ne(),{fitView:r,deleteElements:a,setEdges:o}=_t(),{t:l}=ee(),{hideSidePanel:c}=he(),{isMd:d}=Rt("md"),u=i.useMemo(()=>{const h=s(e.tableId),v=s(e.dependentTableId);return!h||!v?"":`${v.name} -> ${h.name}`},[e.tableId,e.dependentTableId,s]),f=i.useCallback(h=>{h.stopPropagation(),o(v=>v.map(m=>m.id==e.id?{...m,selected:!0}:{...m,selected:!1})),r({duration:500,maxZoom:1,minZoom:1,nodes:[{id:e.tableId},{id:e.dependentTableId}]}),d||c()},[r,e.tableId,e.dependentTableId,o,e.id,d,c]),p=i.useCallback(()=>{t(e.id),a({edges:[{id:e.id}]})},[e.id,t,a]),x=i.useCallback(()=>n.jsxs(Zt,{children:[n.jsx(Jt,{children:n.jsx(xe,{children:n.jsx(Nn,{})})}),n.jsxs(Et,{className:"w-40",children:[n.jsx(en,{children:l("side_panel.dependencies_section.dependency.dependency_actions.title")}),n.jsx(He,{}),n.jsx(Je,{children:n.jsxs($e,{onClick:p,className:"flex justify-between !text-red-700",children:[l("side_panel.dependencies_section.dependency.dependency_actions.delete_dependency"),n.jsx(tt,{className:"size-3.5 text-red-700"})]})})]})]}),[p,l]);return n.jsxs("div",{className:"group flex h-11 flex-1 items-center justify-between overflow-hidden",children:[n.jsx("div",{className:"flex min-w-0 flex-1",children:n.jsx("div",{className:"truncate",children:u})}),n.jsxs("div",{className:"flex flex-row-reverse",children:[n.jsx("div",{children:x()}),n.jsx("div",{className:"flex flex-row-reverse md:hidden md:group-hover:flex",children:n.jsx(xe,{onClick:f,children:n.jsx(vn,{})})})]})]})},Wf=({dependency:e})=>{const{getTable:t,removeDependency:s}=ne(),{deleteElements:r}=_t(),{t:a}=ee(),o=t(e.tableId),l=t(e.dependentTableId),c=i.useCallback(()=>{s(e.id),r({edges:[{id:e.id}]})},[e.id,s,r]);return n.jsxs("div",{className:"my-1 flex flex-col rounded-b-md px-1",children:[n.jsx("div",{className:"flex flex-col gap-6",children:n.jsxs("div",{className:"flex items-center justify-between gap-1 text-xs",children:[n.jsxs("div",{className:"flex basis-1/2 flex-col gap-2 overflow-hidden text-xs",children:[n.jsxs("div",{className:"flex flex-row items-center gap-1",children:[n.jsx(Xr,{className:"size-4 text-subtitle"}),n.jsx("div",{className:"font-bold text-subtitle",children:a("side_panel.dependencies_section.dependency.dependent_table")})]}),n.jsxs(ie,{children:[n.jsx(le,{children:n.jsx("div",{className:"truncate text-left text-sm	",children:l==null?void 0:l.name})}),n.jsx(ce,{children:l==null?void 0:l.name})]})]}),n.jsxs("div",{className:"flex basis-1/2 flex-col gap-2 overflow-hidden text-xs",children:[n.jsxs("div",{className:"flex flex-row items-center gap-1",children:[n.jsx(Yr,{className:"size-4 text-subtitle"}),n.jsx("div",{className:"font-bold text-subtitle",children:a("side_panel.dependencies_section.dependency.table")})]}),n.jsxs(ie,{children:[n.jsx(le,{children:n.jsx("div",{className:"truncate text-left text-sm",children:o==null?void 0:o.name})}),n.jsx(ce,{children:o==null?void 0:o.name})]})]})]})}),n.jsx("div",{className:"flex flex-1 items-center justify-center pt-2",children:n.jsxs(q,{variant:"ghost",className:"h-8 p-2 text-xs",onClick:c,children:[n.jsx(tt,{className:"mr-1 size-3.5 text-red-700"}),n.jsx("div",{className:"text-red-700",children:a("side_panel.dependencies_section.dependency.delete_dependency")})]})})]})},fi=j.forwardRef(({dependency:e},t)=>n.jsxs(ot,{value:e.id,className:"rounded-md",ref:t,children:[n.jsx(it,{asChild:!0,className:"w-full rounded-md px-2 py-0 hover:bg-accent hover:no-underline data-[state=open]:rounded-b-none",children:n.jsx(Uf,{dependency:e})}),n.jsx(lt,{className:"p-1 pb-0",children:n.jsx(Wf,{dependency:e})})]}));fi.displayName="DependencyListItem";const qf=({dependencies:e})=>{const{openDependencyFromSidebar:t,openedDependencyInSidebar:s}=he(),r=j.useRef(null),a=e.reduce((c,d)=>(c[d.id]=j.createRef(),c),{}),o=i.useCallback(c=>{var d,u;return(u=(d=a[c])==null?void 0:d.current)==null?void 0:u.scrollIntoView({behavior:"smooth",block:"start"})},[a]),l=i.useCallback(()=>{s&&r.current!==s&&(r.current=s,o(s))},[o,s]);return n.jsx(In,{type:"single",collapsible:!0,className:"flex w-full flex-col gap-1",value:s,onValueChange:t,onAnimationEnd:l,children:e.map(c=>n.jsx(fi,{dependency:c,ref:a[c.id]},c.id))})},Yf=()=>{const{dependencies:e,filteredSchemas:t,getTable:s}=ne(),[r,a]=j.useState(""),{closeAllDependenciesInSidebar:o}=he(),{t:l}=ee(),c=i.useMemo(()=>{const d=f=>{var h,v,m;if(!((h=r==null?void 0:r.trim)!=null&&h.call(r)))return!0;const p=((v=s(f.tableId))==null?void 0:v.name)??"",x=((m=s(f.dependentTableId))==null?void 0:m.name)??"";return p.toLowerCase().includes(r.toLowerCase())||x.toLowerCase().includes(r.toLowerCase())},u=f=>Ql(f,t);return e.filter(u).filter(d).sort((f,p)=>{const x=s(f.dependentTableId),h=s(f.tableId),v=s(p.dependentTableId),m=s(p.tableId);return`${x==null?void 0:x.name}${h==null?void 0:h.name}`.localeCompare(`${v==null?void 0:v.name}${m==null?void 0:m.name}`)})},[e,r,t,s]);return n.jsxs("section",{className:"flex flex-1 flex-col overflow-hidden px-2",children:[n.jsxs("div",{className:"flex items-center justify-between gap-4 py-1",children:[n.jsx("div",{children:n.jsxs(ie,{children:[n.jsx(le,{asChild:!0,children:n.jsx("span",{children:n.jsx(q,{variant:"ghost",className:"size-8 p-0",onClick:o,children:n.jsx(ra,{className:"size-4"})})})}),n.jsx(ce,{children:l("side_panel.dependencies_section.collapse")})]})}),n.jsx("div",{className:"flex-1",children:n.jsx(_e,{type:"text",placeholder:l("side_panel.dependencies_section.filter"),className:"h-8 w-full focus-visible:ring-0",value:r,onChange:d=>a(d.target.value)})})]}),n.jsx("div",{className:"flex flex-1 flex-col overflow-hidden",children:n.jsx(jn,{className:"h-full",children:e.length===0?n.jsx(nn,{title:l("side_panel.dependencies_section.empty_state.title"),description:l("side_panel.dependencies_section.empty_state.description"),className:"mt-20"}):n.jsx(qf,{dependencies:c})})})]})},pi=j.forwardRef(({area:e},t)=>{const{updateArea:s,removeArea:r}=ne(),{t:a}=ee(),{fitView:o,setNodes:l}=_t(),{hideSidePanel:c}=he(),{isMd:d}=Rt("md"),[u,f]=j.useState(!1),[p,x]=j.useState(e.name),h=j.useRef(null),{attributes:v,listeners:m,setNodeRef:b,transform:y,transition:g}=An({id:e.id}),w=pl(t,b),C={transform:dt.Translate.toString(y),transition:g},S=i.useCallback(()=>{u&&(p.trim()&&s(e.id,{name:p.trim()}),f(!1))},[p,e.id,s,u]),_=i.useCallback(()=>{f(!1),x(e.name)},[e.name]),R=i.useCallback(P=>{P.stopPropagation(),f(!0)},[]),M=i.useCallback(()=>{r(e.id)},[e.id,r]),T=i.useCallback(P=>{s(e.id,{color:P})},[e.id,s]),N=i.useCallback(P=>{P.stopPropagation(),l(L=>L.map(A=>A.id==e.id?{...A,selected:!0}:{...A,selected:!1})),o({duration:500,maxZoom:1,minZoom:1,nodes:[{id:e.id}]}),d||c()},[o,e.id,l,c,d]);bn(h,S),Ct("Enter",S),Ct("Escape",_);const I=i.useCallback(()=>n.jsxs(Zt,{children:[n.jsx(Jt,{children:n.jsx(xe,{children:n.jsx(Nn,{})})}),n.jsxs(Et,{className:"w-fit min-w-40",children:[n.jsx(en,{children:a("side_panel.areas_section.area.area_actions.title")}),n.jsx(He,{}),n.jsx(Je,{children:n.jsxs($e,{className:"flex justify-between gap-4",onClick:P=>{P.stopPropagation(),R(P)},children:[a("side_panel.areas_section.area.area_actions.edit_name"),n.jsx(gs,{className:"size-3.5"})]})}),n.jsx(He,{}),n.jsx(Je,{children:n.jsxs($e,{onClick:M,className:"flex justify-between !text-red-700",children:[a("side_panel.areas_section.area.area_actions.delete_area"),n.jsx(tt,{className:"size-3.5 text-red-700"})]})})]})]}),[R,M,a]);return n.jsx("div",{className:"w-full rounded-md border border-border hover:bg-accent/5",ref:w,style:{...C,borderLeftWidth:"6px",borderLeftColor:e.color},...v,children:n.jsxs("div",{className:"group flex h-11 items-center justify-between gap-1 overflow-hidden p-2",children:[n.jsx("div",{className:"flex cursor-move items-center justify-center",...m,children:n.jsx(js,{className:"size-4 text-muted-foreground"})}),n.jsx("div",{className:"flex min-w-0 flex-1",children:u?n.jsx(_e,{ref:h,autoFocus:!0,type:"text",placeholder:e.name,value:p,onClick:P=>P.stopPropagation(),onChange:P=>x(P.target.value),className:"h-7 w-full focus-visible:ring-0"}):n.jsxs(ie,{children:[n.jsx(le,{asChild:!0,children:n.jsx("div",{onDoubleClick:R,className:"text-editable truncate px-2 py-0.5 text-sm font-medium",children:e.name})}),n.jsx(ce,{children:a("tool_tips.double_click_to_edit")})]})}),n.jsx("div",{className:"flex items-center gap-1",children:u?n.jsx(xe,{onClick:S,children:n.jsx(wn,{})}):n.jsxs("div",{className:"flex flex-row-reverse items-center gap-1",children:[I(),n.jsx(Xs,{color:e.color,onChange:T}),n.jsx("div",{className:"hidden md:group-hover:flex",children:n.jsx(xe,{onClick:N,children:n.jsx(vn,{})})})]})})]})})});pi.displayName="AreaListItem";const Xf=({areas:e})=>{const{updateArea:t}=ne(),{openedAreaInSidebar:s}=he(),r=j.useRef(null),a=i.useMemo(()=>e.reduce((u,f)=>(u[f.id]=j.createRef(),u),{}),[e]),o=i.useCallback(u=>{var f,p;return(p=(f=a[u])==null?void 0:f.current)==null?void 0:p.scrollIntoView({behavior:"smooth",block:"start"})},[a]),l=$s(Ls(Xt)),c=u=>{const{active:f,over:p}=u;if((f==null?void 0:f.id)!==(p==null?void 0:p.id)&&p&&f){const x=e.findIndex(m=>m.id===f.id),h=e.findIndex(m=>m.id===p.id);Qt(e,x,h).forEach((m,b)=>{t(m.id,{order:b})})}},d=i.useCallback(()=>{s&&r.current!==s&&(r.current=s,o(s))},[o,s]);return j.useEffect(()=>{d()},[s,d]),n.jsx("div",{className:"flex w-full flex-col gap-1",children:n.jsx(Hs,{sensors:l,collisionDetection:zs,onDragEnd:c,children:n.jsx(Ks,{items:e,strategy:Gs,children:e.sort((u,f)=>u.order&&f.order===void 0?-1:u.order===void 0&&f.order?1:u.order!==void 0&&f.order!==void 0?u.order-f.order:u.name.localeCompare(f.name)).map(u=>n.jsx(pi,{area:u,ref:a[u.id]},u.id))})})})},Qf=()=>{const{createArea:e,areas:t}=ne(),s=Gr(),{t:r}=ee(),{openAreaFromSidebar:a}=he(),[o,l]=j.useState(""),c=j.useRef(null),d=i.useMemo(()=>{const h=v=>{var m;return!((m=o==null?void 0:o.trim)!=null&&m.call(o))||v.name.toLowerCase().includes(o.toLowerCase())};return t.filter(h)},[t,o]),u=i.useCallback(async()=>{const v=-s.x/s.zoom+80/s.zoom,m=-s.y/s.zoom+80/s.zoom,b=await e({x:v,y:m});a&&a(b.id)},[e,a,s.x,s.y,s.zoom]),f=i.useCallback(async()=>{l(""),u()},[u,l]),p=i.useCallback(()=>{l("")},[]),x=i.useMemo(()=>Nr(),[]);return Wn(x==="mac"?"meta+f":"ctrl+f",()=>{var h;(h=c.current)==null||h.focus()},{preventDefault:!0},[c]),n.jsxs("section",{className:"flex flex-1 flex-col overflow-hidden px-2","data-vaul-no-drag":!0,children:[n.jsxs("div",{className:"flex items-center justify-between gap-4 py-1",children:[n.jsx("div",{className:"flex-1",children:n.jsx(_e,{ref:c,type:"text",placeholder:r("side_panel.areas_section.filter"),className:"h-8 w-full focus-visible:ring-0",value:o,onChange:h=>l(h.target.value)})}),n.jsxs(q,{variant:"secondary",className:"h-8 p-2 text-xs",onClick:f,children:[n.jsx(ys,{className:"h-4"}),r("side_panel.areas_section.add_area")]})]}),n.jsx("div",{className:"flex flex-1 flex-col overflow-hidden",children:n.jsx(jn,{className:"h-full",children:t.length===0?n.jsx(nn,{title:r("side_panel.areas_section.empty_state.title"),description:r("side_panel.areas_section.empty_state.description"),className:"mt-20"}):o&&d.length===0?n.jsxs("div",{className:"mt-10 flex flex-col items-center gap-2",children:[n.jsx("div",{className:"text-sm text-muted-foreground",children:r("side_panel.areas_section.no_results")}),n.jsxs(q,{variant:"outline",size:"sm",onClick:p,className:"gap-1",children:[n.jsx(qr,{className:"size-3.5"}),r("side_panel.areas_section.clear")]})]}):n.jsx(Xf,{areas:d})})})]})},ch=()=>{const{t:e}=ee(),{schemas:t,filterSchemas:s,filteredSchemas:r}=ne(),{selectSidebarSection:a,selectedSidebarSection:o,isSelectSchemaOpen:l,openSelectSchema:c,closeSelectSchema:d}=he(),{isMd:u}=Rt("md"),f=i.useMemo(()=>t.map(x=>({label:x.name,value:x.id,description:`(${x.tableCount} tables)`})),[t]),p=i.useCallback(x=>{x?c():d()},[c,d]);return n.jsxs("aside",{className:"flex h-full flex-col overflow-hidden",children:[f.length>0?n.jsxs("div",{className:"flex items-center justify-center border-b pl-3 pt-0.5",children:[n.jsx("div",{className:"shrink-0 text-sm font-semibold",children:e("side_panel.schema")}),n.jsx("div",{className:"flex min-w-0 flex-1",children:n.jsx(yn,{oneLine:!0,className:"w-full rounded-none border-none",selectAll:!0,deselectAll:!0,options:f,value:r??[],onChange:x=>{s(x)},placeholder:e("side_panel.filter_by_schema"),inputPlaceholder:e("side_panel.search_schema"),emptyPlaceholder:e("side_panel.no_schemas_found"),multiple:!0,open:l,onOpenChange:p})})]}):null,u?null:n.jsx("div",{className:"flex justify-center border-b pt-0.5",children:n.jsxs(Ha,{value:o,onValueChange:x=>a(x),children:[n.jsxs(Ns,{className:"rounded-none border-none font-semibold shadow-none hover:bg-secondary hover:underline focus:border-transparent focus:ring-0",children:[n.jsx(Ka,{}),n.jsx("div",{className:"flex flex-1 justify-end px-2 text-xs font-normal text-muted-foreground",children:e("side_panel.view_all_options")})]}),n.jsx(Ss,{children:n.jsxs(Ga,{children:[n.jsx(Ve,{value:"tables",children:e("side_panel.tables_section.tables")}),n.jsx(Ve,{value:"relationships",children:e("side_panel.relationships_section.relationships")}),n.jsx(Ve,{value:"dependencies",children:e("side_panel.dependencies_section.dependencies")}),n.jsx(Ve,{value:"areas",children:e("side_panel.areas_section.areas")})]})})]})}),o==="tables"?n.jsx(Bf,{}):o==="relationships"?n.jsx(Kf,{}):o==="dependencies"?n.jsx(Yf,{}):n.jsx(Qf,{})]})},Kn=768;function Zf(){const[e,t]=i.useState(void 0);return i.useEffect(()=>{const s=window.matchMedia(`(max-width: ${Kn-1}px)`),r=()=>{t(window.innerWidth<Kn)};return s.addEventListener("change",r),t(window.innerWidth<Kn),()=>s.removeEventListener("change",r)},[]),!!e}const Jf=Zl,ep=Jl,hi=i.forwardRef(({className:e,...t},s)=>n.jsx(ea,{className:D("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:s}));hi.displayName=ea.displayName;const tp=ta("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500 data-[state=open]:animate-in data-[state=closed]:animate-out",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4 border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),mi=i.forwardRef(({side:e="right",className:t,children:s,...r},a)=>n.jsxs(ep,{children:[n.jsx(hi,{}),n.jsxs(Qr,{ref:a,className:D(tp({side:e}),t),...r,children:[n.jsxs(ec,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[n.jsx(Ol,{className:"size-4"}),n.jsx("span",{className:"sr-only",children:"Close"})]}),s]})]}));mi.displayName=Qr.displayName;const xi=({className:e,...t})=>n.jsx("div",{className:D("flex flex-col space-y-2 text-center sm:text-left",e),...t});xi.displayName="SheetHeader";const gi=i.forwardRef(({className:e,...t},s)=>n.jsx(Zr,{ref:s,className:D("text-lg font-semibold text-foreground",e),...t}));gi.displayName=Zr.displayName;const bi=i.forwardRef(({className:e,...t},s)=>n.jsx(Jr,{ref:s,className:D("text-sm text-muted-foreground",e),...t}));bi.displayName=Jr.displayName;function yr({className:e,...t}){return n.jsx("div",{className:D("animate-pulse rounded-md bg-primary/10",e),...t})}const Pn=()=>{const e=j.useContext(vi);if(!e)throw new Error("useSidebar must be used within a SidebarProvider.");return e},np="sidebar_state",sp=60*60*24*7,rp="16rem",ap="18rem",op="3rem",ip="b",vi=i.createContext(null),lp=i.forwardRef(({defaultOpen:e=!0,open:t,onOpenChange:s,className:r,style:a,children:o,...l},c)=>{const d=Zf(),[u,f]=i.useState(!1),[p,x]=i.useState(e),h=t??p,v=i.useCallback(g=>{const w=typeof g=="function"?g(h):g;s?s(w):x(w),document.cookie=`${np}=${w}; path=/; max-age=${sp}`},[s,h]),m=i.useCallback(()=>d?f(g=>!g):v(g=>!g),[d,v,f]);i.useEffect(()=>{const g=w=>{w.key===ip&&(w.metaKey||w.ctrlKey)&&(w.preventDefault(),m())};return window.addEventListener("keydown",g),()=>window.removeEventListener("keydown",g)},[m]);const b=h?"expanded":"collapsed",y=i.useMemo(()=>({state:b,open:h,setOpen:v,isMobile:d,openMobile:u,setOpenMobile:f,toggleSidebar:m}),[b,h,v,d,u,f,m]);return n.jsx(vi.Provider,{value:y,children:n.jsx(hl,{delayDuration:0,children:n.jsx("div",{style:{"--sidebar-width":rp,"--sidebar-width-icon":op,...a},className:D("group/sidebar-wrapper flex min-h-svh w-full has-[[data-variant=inset]]:bg-sidebar",r),ref:c,...l,children:o})})})});lp.displayName="SidebarProvider";const wi=i.forwardRef(({side:e="left",variant:t="sidebar",collapsible:s="offcanvas",className:r,children:a,...o},l)=>{const{isMobile:c,state:d,openMobile:u,setOpenMobile:f}=Pn();return s==="none"?n.jsx("div",{className:D("flex h-full w-[--sidebar-width] flex-col bg-sidebar text-sidebar-foreground",r),ref:l,...o,children:a}):c?n.jsx(Jf,{open:u,onOpenChange:f,...o,children:n.jsxs(mi,{"data-sidebar":"sidebar","data-mobile":"true",className:"w-[--sidebar-width] bg-sidebar p-0 text-sidebar-foreground [&>button]:hidden",style:{"--sidebar-width":ap},side:e,children:[n.jsxs(xi,{className:"sr-only",children:[n.jsx(gi,{children:"Sidebar"}),n.jsx(bi,{children:"Displays the mobile sidebar."})]}),n.jsx("div",{className:"flex size-full flex-col",children:a})]})}):n.jsxs("div",{ref:l,className:"group peer hidden text-sidebar-foreground md:block","data-state":d,"data-collapsible":d==="collapsed"?s:"","data-variant":t,"data-side":e,children:[n.jsx("div",{className:D("relative w-[--sidebar-width] bg-transparent transition-[width] duration-200 ease-linear","group-data-[collapsible=offcanvas]:w-0","group-data-[side=right]:rotate-180",t==="floating"||t==="inset"?"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4))]":"group-data-[collapsible=icon]:w-[--sidebar-width-icon]")}),n.jsx("div",{className:D("fixed inset-y-0 z-10 hidden h-svh w-[--sidebar-width] transition-[left,right,width] duration-200 ease-linear md:flex",e==="left"?"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]":"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]",t==="floating"||t==="inset"?"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4)_+2px)]":"group-data-[collapsible=icon]:w-[--sidebar-width-icon] group-data-[side=left]:border-r group-data-[side=right]:border-l",r),...o,children:n.jsx("div",{"data-sidebar":"sidebar",className:"flex size-full flex-col bg-sidebar group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:border-sidebar-border group-data-[variant=floating]:shadow",children:a})})]})});wi.displayName="Sidebar";const cp=i.forwardRef(({className:e,onClick:t,...s},r)=>{const{toggleSidebar:a}=Pn();return n.jsxs(q,{ref:r,"data-sidebar":"trigger",variant:"ghost",size:"icon",className:D("h-7 w-7",e),onClick:o=>{t==null||t(o),a()},...s,children:[n.jsx(Ll,{}),n.jsx("span",{className:"sr-only",children:"Toggle Sidebar"})]})});cp.displayName="SidebarTrigger";const dp=i.forwardRef(({className:e,...t},s)=>{const{toggleSidebar:r}=Pn();return n.jsx("button",{ref:s,"data-sidebar":"rail","aria-label":"Toggle Sidebar",tabIndex:-1,onClick:r,title:"Toggle Sidebar",className:D("absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] hover:after:bg-sidebar-border group-data-[side=left]:-right-4 group-data-[side=right]:left-0 sm:flex","[[data-side=left]_&]:cursor-w-resize [[data-side=right]_&]:cursor-e-resize","[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize","group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full group-data-[collapsible=offcanvas]:hover:bg-sidebar","[[data-side=left][data-collapsible=offcanvas]_&]:-right-2","[[data-side=right][data-collapsible=offcanvas]_&]:-left-2",e),...t})});dp.displayName="SidebarRail";const up=i.forwardRef(({className:e,...t},s)=>n.jsx("main",{ref:s,className:D("relative flex w-full flex-1 flex-col bg-background","md:peer-data-[variant=inset]:m-2 md:peer-data-[state=collapsed]:peer-data-[variant=inset]:ml-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow",e),...t}));up.displayName="SidebarInset";const fp=i.forwardRef(({className:e,...t},s)=>n.jsx(_e,{ref:s,"data-sidebar":"input",className:D("h-8 w-full bg-background shadow-none focus-visible:ring-2 focus-visible:ring-sidebar-ring",e),...t}));fp.displayName="SidebarInput";const yi=i.forwardRef(({className:e,...t},s)=>n.jsx("div",{ref:s,"data-sidebar":"header",className:D("flex flex-col gap-2 p-2",e),...t}));yi.displayName="SidebarHeader";const ji=i.forwardRef(({className:e,...t},s)=>n.jsx("div",{ref:s,"data-sidebar":"footer",className:D("flex flex-col gap-2 p-2",e),...t}));ji.displayName="SidebarFooter";const pp=i.forwardRef(({className:e,...t},s)=>n.jsx(Nt,{ref:s,"data-sidebar":"separator",className:D("mx-2 w-auto bg-sidebar-border",e),...t}));pp.displayName="SidebarSeparator";const Ci=i.forwardRef(({className:e,...t},s)=>n.jsx("div",{ref:s,"data-sidebar":"content",className:D("flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden",e),...t}));Ci.displayName="SidebarContent";const Ni=i.forwardRef(({className:e,...t},s)=>n.jsx("div",{ref:s,"data-sidebar":"group",className:D("relative flex w-full min-w-0 flex-col p-2",e),...t}));Ni.displayName="SidebarGroup";const hp=i.forwardRef(({className:e,asChild:t=!1,...s},r)=>{const a=t?Kt:"div";return n.jsx(a,{ref:r,"data-sidebar":"group-label",className:D("flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium text-sidebar-foreground/70 outline-none ring-sidebar-ring transition-[margin,opacity] duration-200 ease-linear focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0",e),...s})});hp.displayName="SidebarGroupLabel";const mp=i.forwardRef(({className:e,asChild:t=!1,...s},r)=>{const a=t?Kt:"button";return n.jsx(a,{ref:r,"data-sidebar":"group-action",className:D("absolute right-3 top-3.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","after:absolute after:-inset-2 after:md:hidden","group-data-[collapsible=icon]:hidden",e),...s})});mp.displayName="SidebarGroupAction";const Si=i.forwardRef(({className:e,...t},s)=>n.jsx("div",{ref:s,"data-sidebar":"group-content",className:D("w-full text-sm",e),...t}));Si.displayName="SidebarGroupContent";const ls=i.forwardRef(({className:e,...t},s)=>n.jsx("ul",{ref:s,"data-sidebar":"menu",className:D("flex w-full min-w-0 flex-col gap-1",e),...t}));ls.displayName="SidebarMenu";const cs=i.forwardRef(({className:e,...t},s)=>n.jsx("li",{ref:s,"data-sidebar":"menu-item",className:D("group/menu-item relative",e),...t}));cs.displayName="SidebarMenuItem";const xp=ta("peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-none ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-[[data-sidebar=menu-action]]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:!size-8 group-data-[collapsible=icon]:!p-2 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0",{variants:{variant:{default:"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground",outline:"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]"},size:{default:"h-8 text-sm",sm:"h-7 text-xs",lg:"h-12 text-sm group-data-[collapsible=icon]:!p-0"}},defaultVariants:{variant:"default",size:"default"}}),ds=i.forwardRef(({asChild:e=!1,isActive:t=!1,variant:s="default",size:r="default",tooltip:a,className:o,...l},c)=>{const d=e?Kt:"button",{isMobile:u,state:f}=Pn(),p=n.jsx(d,{ref:c,"data-sidebar":"menu-button","data-size":r,"data-active":t,className:D(xp({variant:s,size:r}),o),...l});return a?(typeof a=="string"&&(a={children:a}),n.jsxs(ie,{children:[n.jsx(le,{asChild:!0,children:p}),n.jsx(ce,{side:"right",align:"center",hidden:f!=="collapsed"||u,...a})]})):p});ds.displayName="SidebarMenuButton";const gp=i.forwardRef(({className:e,asChild:t=!1,showOnHover:s=!1,...r},a)=>{const o=t?Kt:"button";return n.jsx(o,{ref:a,"data-sidebar":"menu-action",className:D("absolute right-1 top-1.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 peer-hover/menu-button:text-sidebar-accent-foreground [&>svg]:size-4 [&>svg]:shrink-0","after:absolute after:-inset-2 after:md:hidden","peer-data-[size=sm]/menu-button:top-1","peer-data-[size=default]/menu-button:top-1.5","peer-data-[size=lg]/menu-button:top-2.5","group-data-[collapsible=icon]:hidden",s&&"group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 peer-data-[active=true]/menu-button:text-sidebar-accent-foreground md:opacity-0",e),...r})});gp.displayName="SidebarMenuAction";const bp=i.forwardRef(({className:e,...t},s)=>n.jsx("div",{ref:s,"data-sidebar":"menu-badge",className:D("pointer-events-none absolute right-1 flex h-5 min-w-5 select-none items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums text-sidebar-foreground","peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground","peer-data-[size=sm]/menu-button:top-1","peer-data-[size=default]/menu-button:top-1.5","peer-data-[size=lg]/menu-button:top-2.5","group-data-[collapsible=icon]:hidden",e),...t}));bp.displayName="SidebarMenuBadge";const vp=i.forwardRef(({className:e,showIcon:t=!1,...s},r)=>{const a=i.useMemo(()=>`${Math.floor(Math.random()*40)+50}%`,[]);return n.jsxs("div",{ref:r,"data-sidebar":"menu-skeleton",className:D("flex h-8 items-center gap-2 rounded-md px-2",e),...s,children:[t&&n.jsx(yr,{className:"size-4 rounded-md","data-sidebar":"menu-skeleton-icon"}),n.jsx(yr,{className:"h-4 max-w-[--skeleton-width] flex-1","data-sidebar":"menu-skeleton-text",style:{"--skeleton-width":a}})]})});vp.displayName="SidebarMenuSkeleton";const wp=i.forwardRef(({className:e,...t},s)=>n.jsx("ul",{ref:s,"data-sidebar":"menu-sub",className:D("mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l border-sidebar-border px-2.5 py-0.5","group-data-[collapsible=icon]:hidden",e),...t}));wp.displayName="SidebarMenuSub";const yp=i.forwardRef(({...e},t)=>n.jsx("li",{ref:t,...e}));yp.displayName="SidebarMenuSubItem";const jp=i.forwardRef(({asChild:e=!1,size:t="md",isActive:s,className:r,...a},o)=>{const l=e?Kt:"a";return n.jsx(l,{ref:o,"data-sidebar":"menu-sub-button","data-size":t,"data-active":s,className:D("flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 text-sidebar-foreground outline-none ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0 [&>svg]:text-sidebar-accent-foreground","data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground",t==="sm"&&"text-xs",t==="md"&&"text-sm","group-data-[collapsible=icon]:hidden",r),...a})});jp.displayName="SidebarMenuSubButton";const dh=()=>{const{selectSidebarSection:e,selectedSidebarSection:t,showSidePanel:s}=he(),{t:r}=ee(),{isMd:a}=Rt("md"),{effectiveTheme:o}=Cn(),l=i.useMemo(()=>[{title:r("side_panel.tables_section.tables"),icon:na,onClick:()=>{s(),e("tables")},active:t==="tables"},{title:r("side_panel.relationships_section.relationships"),icon:Kr,onClick:()=>{s(),e("relationships")},active:t==="relationships"},{title:r("side_panel.dependencies_section.dependencies"),icon:vc,onClick:()=>{s(),e("dependencies")},active:t==="dependencies"},{title:r("side_panel.areas_section.areas"),icon:ys,onClick:()=>{s(),e("areas")},active:t==="areas"}],[e,t,r,s]),c=i.useMemo(()=>[{title:"Discord",icon:$l,onClick:()=>window.open("https://discord.gg/QeFwyWSKwC","_blank"),active:!1},{title:"Twitter",icon:wc,onClick:()=>window.open("https://x.com/intent/follow?screen_name=jonathanfishner","_blank"),active:!1},{title:"Documentation",icon:mc,onClick:()=>window.open("https://docs.chartdb.io","_blank"),active:!1}],[]);return n.jsxs(wi,{side:"left",collapsible:"icon",variant:"sidebar",className:"relative h-full",children:[a?null:n.jsx(yi,{children:n.jsx("a",{href:"https://chartdb.io",className:"cursor-pointer",rel:"noreferrer",children:n.jsx("img",{src:o==="light"?cc:dc,alt:"chartDB",className:"h-4 max-w-fit"})})}),n.jsx(Ci,{children:n.jsx(Ni,{children:n.jsx(Si,{children:n.jsx(ls,{children:l.map(d=>n.jsx(cs,{children:n.jsx(ds,{className:"hover:bg-gray-200 data-[active=true]:bg-gray-100 data-[active=true]:text-pink-600 data-[active=true]:hover:bg-pink-100 dark:hover:bg-gray-800 dark:data-[active=true]:bg-gray-900 dark:data-[active=true]:text-pink-400 dark:data-[active=true]:hover:bg-pink-950",isActive:d.active,asChild:!0,tooltip:d.title,children:n.jsxs("button",{onClick:d.onClick,children:[n.jsx(d.icon,{}),n.jsx("span",{children:d.title})]})})},d.title))})})})}),n.jsx(ji,{children:n.jsx(ls,{children:c.map(d=>n.jsxs(cs,{children:[d.badge&&n.jsx("span",{className:"absolute -right-1 -top-1 rounded-full bg-pink-500 px-[3px] py-px text-[8px] font-semibold text-white",children:d.badge}),n.jsx(ds,{className:"hover:bg-gray-200 data-[active=true]:bg-gray-100 data-[active=true]:text-pink-600 data-[active=true]:hover:bg-pink-100 dark:hover:bg-gray-800 dark:data-[active=true]:bg-gray-900 dark:data-[active=true]:text-pink-400 dark:data-[active=true]:hover:bg-pink-950",isActive:d.active,asChild:!0,tooltip:d.title,children:n.jsxs("button",{onClick:d.onClick,children:[n.jsx(d.icon,{}),n.jsx("span",{children:d.title})]})})]},d.title))})})]})},uh=()=>{const{diagramName:e,updateDiagramName:t,currentDiagram:s}=ne(),{t:r}=ee(),[a,o]=i.useState(!1),[l,c]=j.useState(e),d=j.useRef(null);i.useEffect(()=>{c(e)},[e]);const u=i.useCallback(()=>{a&&(l.trim()&&t(l.trim()),o(!1))},[l,t,a]);bn(d,u),Ct("Enter",u);const f=p=>{p.stopPropagation(),o(!0)};return n.jsx("div",{className:"group",children:n.jsxs("div",{className:D("flex flex-1 flex-row items-center justify-center px-2 py-1 whitespace-nowrap",{"text-editable":!a}),children:[n.jsx(tc,{databaseType:s.databaseType,databaseEdition:s.databaseEdition}),n.jsx("div",{className:"flex flex-row items-center gap-1",children:a?n.jsxs(n.Fragment,{children:[n.jsx(_e,{ref:d,autoFocus:!0,type:"text",placeholder:e,value:l,onClick:p=>p.stopPropagation(),onChange:p=>c(p.target.value),className:"ml-1 h-7 focus-visible:ring-0"}),n.jsx(q,{variant:"ghost",className:"flex size-7 p-2 text-slate-500 hover:bg-primary-foreground hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-300",onClick:u,children:n.jsx(wn,{})})]}):n.jsx(n.Fragment,{children:n.jsxs(ie,{children:[n.jsx(le,{asChild:!0,children:n.jsx("h1",{className:D(rc(),"group-hover:underline"),onDoubleClick:p=>{f(p)},children:e})}),n.jsx(ce,{children:r("tool_tips.double_click_to_edit")})]})})})]})})},fh=()=>{const{t:e,i18n:t}=ee(),[s,r]=i.useState(!1),a=ml.map(c=>({label:c.nativeName,value:c.code,description:`(${c.name})`})),o=i.useCallback(c=>{t.changeLanguage(c),r(!1)},[t]),l=i.useMemo(()=>{var c;return(c=t.languages.map(d=>a.find(u=>u.value===d)).find(d=>d!==void 0))==null?void 0:c.value},[t,a]);return n.jsxs(Zt,{open:s,onOpenChange:r,children:[n.jsxs(ie,{children:[n.jsx(le,{asChild:!0,children:n.jsx(Jt,{asChild:!0,children:n.jsxs("div",{className:D(ac({variant:"outline",size:"icon"}),"size-6 rounded-full md:size-8 cursor-pointer"),children:[n.jsx(gc,{className:"size-3.5 md:size-4"}),n.jsx("span",{className:"sr-only",children:"Change language"})]})})}),n.jsx(ce,{children:e("language_select.change_language")})]}),n.jsx(Et,{className:"w-56",children:n.jsx("div",{className:"p-2",children:n.jsx(yn,{className:"flex h-8 min-h-8 w-full",options:a,value:l,onChange:o})})})]})};var On="Menubar",[us,Cp,Np]=ms(On),[_i,ph]=St(On,[Np,Ur]),fe=xs(),Ri=Ur(),[Sp,Qs]=_i(On),Mi=i.forwardRef((e,t)=>{const{__scopeMenubar:s,value:r,onValueChange:a,defaultValue:o,loop:l=!0,dir:c,...d}=e,u=hs(c),f=Ri(s),[p="",x]=Ge({prop:r,onChange:a,defaultProp:o}),[h,v]=i.useState(null);return n.jsx(Sp,{scope:s,value:p,onMenuOpen:i.useCallback(m=>{x(m),v(m)},[x]),onMenuClose:i.useCallback(()=>x(""),[x]),onMenuToggle:i.useCallback(m=>{x(b=>b?"":m),v(m)},[x]),dir:u,loop:l,children:n.jsx(us.Provider,{scope:s,children:n.jsx(us.Slot,{scope:s,children:n.jsx(Fl,{asChild:!0,...f,orientation:"horizontal",loop:l,dir:u,currentTabStopId:h,onCurrentTabStopIdChange:v,children:n.jsx(Y.div,{role:"menubar",...d,ref:t})})})})})});Mi.displayName=On;var Zs="MenubarMenu",[_p,Di]=_i(Zs),Ii=e=>{const{__scopeMenubar:t,value:s,...r}=e,a=ze(),o=s||a||"LEGACY_REACT_AUTO_VALUE",l=Qs(Zs,t),c=fe(t),d=i.useRef(null),u=i.useRef(!1),f=l.value===o;return i.useEffect(()=>{f||(u.current=!1)},[f]),n.jsx(_p,{scope:t,value:o,triggerId:ze(),triggerRef:d,contentId:ze(),wasKeyboardTriggerOpenRef:u,children:n.jsx(Rr,{...c,open:f,onOpenChange:p=>{p||l.onMenuClose()},modal:!1,dir:l.dir,...r})})};Ii.displayName=Zs;var fs="MenubarTrigger",ki=i.forwardRef((e,t)=>{const{__scopeMenubar:s,disabled:r=!1,...a}=e,o=Ri(s),l=fe(s),c=Qs(fs,s),d=Di(fs,s),u=i.useRef(null),f=ge(t,u,d.triggerRef),[p,x]=i.useState(!1),h=c.value===d.value;return n.jsx(us.ItemSlot,{scope:s,value:d.value,disabled:r,children:n.jsx(Bl,{asChild:!0,...o,focusable:!r,tabStopId:d.value,children:n.jsx(Mr,{asChild:!0,...l,children:n.jsx(Y.button,{type:"button",role:"menuitem",id:d.triggerId,"aria-haspopup":"menu","aria-expanded":h,"aria-controls":h?d.contentId:void 0,"data-highlighted":p?"":void 0,"data-state":h?"open":"closed","data-disabled":r?"":void 0,disabled:r,...a,ref:f,onPointerDown:z(e.onPointerDown,v=>{!r&&v.button===0&&v.ctrlKey===!1&&(c.onMenuOpen(d.value),h||v.preventDefault())}),onPointerEnter:z(e.onPointerEnter,()=>{var m;!!c.value&&!h&&(c.onMenuOpen(d.value),(m=u.current)==null||m.focus())}),onKeyDown:z(e.onKeyDown,v=>{r||(["Enter"," "].includes(v.key)&&c.onMenuToggle(d.value),v.key==="ArrowDown"&&c.onMenuOpen(d.value),["Enter"," ","ArrowDown"].includes(v.key)&&(d.wasKeyboardTriggerOpenRef.current=!0,v.preventDefault()))}),onFocus:z(e.onFocus,()=>x(!0)),onBlur:z(e.onBlur,()=>x(!1))})})})})});ki.displayName=fs;var Rp="MenubarPortal",Ei=e=>{const{__scopeMenubar:t,...s}=e,r=fe(t);return n.jsx(Dr,{...r,...s})};Ei.displayName=Rp;var ps="MenubarContent",Ti=i.forwardRef((e,t)=>{const{__scopeMenubar:s,align:r="start",...a}=e,o=fe(s),l=Qs(ps,s),c=Di(ps,s),d=Cp(s),u=i.useRef(!1);return n.jsx(Ir,{id:c.contentId,"aria-labelledby":c.triggerId,"data-radix-menubar-content":"",...o,...a,ref:t,align:r,onCloseAutoFocus:z(e.onCloseAutoFocus,f=>{var x;!!!l.value&&!u.current&&((x=c.triggerRef.current)==null||x.focus()),u.current=!1,f.preventDefault()}),onFocusOutside:z(e.onFocusOutside,f=>{const p=f.target;d().some(h=>{var v;return(v=h.ref.current)==null?void 0:v.contains(p)})&&f.preventDefault()}),onInteractOutside:z(e.onInteractOutside,()=>{u.current=!0}),onEntryFocus:f=>{c.wasKeyboardTriggerOpenRef.current||f.preventDefault()},onKeyDown:z(e.onKeyDown,f=>{if(["ArrowRight","ArrowLeft"].includes(f.key)){const p=f.target,x=p.hasAttribute("data-radix-menubar-subtrigger"),h=p.closest("[data-radix-menubar-content]")!==f.currentTarget,m=(l.dir==="rtl"?"ArrowRight":"ArrowLeft")===f.key;if(!m&&x||h&&m)return;let g=d().filter(S=>!S.disabled).map(S=>S.value);m&&g.reverse();const w=g.indexOf(c.value);g=l.loop?Hp(g,w+1):g.slice(w+1);const[C]=g;C&&l.onMenuOpen(C)}},{checkForDefaultPrevented:!1}),style:{...e.style,"--radix-menubar-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-menubar-content-available-width":"var(--radix-popper-available-width)","--radix-menubar-content-available-height":"var(--radix-popper-available-height)","--radix-menubar-trigger-width":"var(--radix-popper-anchor-width)","--radix-menubar-trigger-height":"var(--radix-popper-anchor-height)"}})});Ti.displayName=ps;var Mp="MenubarGroup",Dp=i.forwardRef((e,t)=>{const{__scopeMenubar:s,...r}=e,a=fe(s);return n.jsx(kr,{...a,...r,ref:t})});Dp.displayName=Mp;var Ip="MenubarLabel",Ai=i.forwardRef((e,t)=>{const{__scopeMenubar:s,...r}=e,a=fe(s);return n.jsx(Er,{...a,...r,ref:t})});Ai.displayName=Ip;var kp="MenubarItem",Pi=i.forwardRef((e,t)=>{const{__scopeMenubar:s,...r}=e,a=fe(s);return n.jsx(Ar,{...a,...r,ref:t})});Pi.displayName=kp;var Ep="MenubarCheckboxItem",Oi=i.forwardRef((e,t)=>{const{__scopeMenubar:s,...r}=e,a=fe(s);return n.jsx(Pr,{...a,...r,ref:t})});Oi.displayName=Ep;var Tp="MenubarRadioGroup",Ap=i.forwardRef((e,t)=>{const{__scopeMenubar:s,...r}=e,a=fe(s);return n.jsx(Or,{...a,...r,ref:t})});Ap.displayName=Tp;var Pp="MenubarRadioItem",Li=i.forwardRef((e,t)=>{const{__scopeMenubar:s,...r}=e,a=fe(s);return n.jsx(Lr,{...a,...r,ref:t})});Li.displayName=Pp;var Op="MenubarItemIndicator",$i=i.forwardRef((e,t)=>{const{__scopeMenubar:s,...r}=e,a=fe(s);return n.jsx($r,{...a,...r,ref:t})});$i.displayName=Op;var Lp="MenubarSeparator",zi=i.forwardRef((e,t)=>{const{__scopeMenubar:s,...r}=e,a=fe(s);return n.jsx(Tr,{...a,...r,ref:t})});zi.displayName=Lp;var $p="MenubarArrow",zp=i.forwardRef((e,t)=>{const{__scopeMenubar:s,...r}=e,a=fe(s);return n.jsx(zr,{...a,...r,ref:t})});zp.displayName=$p;var Fp="MenubarSub",Fi=e=>{const{__scopeMenubar:t,children:s,open:r,onOpenChange:a,defaultOpen:o}=e,l=fe(t),[c=!1,d]=Ge({prop:r,defaultProp:o,onChange:a});return n.jsx(zl,{...l,open:c,onOpenChange:d,children:s})};Fi.displayName=Fp;var Bp="MenubarSubTrigger",Bi=i.forwardRef((e,t)=>{const{__scopeMenubar:s,...r}=e,a=fe(s);return n.jsx(Fr,{"data-radix-menubar-subtrigger":"",...a,...r,ref:t})});Bi.displayName=Bp;var Vp="MenubarSubContent",Vi=i.forwardRef((e,t)=>{const{__scopeMenubar:s,...r}=e,a=fe(s);return n.jsx(Br,{...a,"data-radix-menubar-content":"",...r,ref:t,style:{...e.style,"--radix-menubar-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-menubar-content-available-width":"var(--radix-popper-available-width)","--radix-menubar-content-available-height":"var(--radix-popper-available-height)","--radix-menubar-trigger-width":"var(--radix-popper-anchor-width)","--radix-menubar-trigger-height":"var(--radix-popper-anchor-height)"}})});Vi.displayName=Vp;function Hp(e,t){return e.map((s,r)=>e[(t+r)%e.length])}var Hi=Mi,Gp=Ii,Gi=ki,Kp=Ei,Ki=Ti,Ui=Ai,Wi=Pi,qi=Oi,Yi=Li,Xi=$i,Qi=zi,Up=Fi,Zi=Bi,Ji=Vi;const Lt=Gp,$t=Up,el=j.forwardRef(({className:e,...t},s)=>n.jsx(Hi,{ref:s,className:D("flex h-9 items-center space-x-1 rounded-md border bg-background p-1 shadow-sm",e),...t}));el.displayName=Hi.displayName;const gt=j.forwardRef(({className:e,...t},s)=>n.jsx(Gi,{ref:s,className:D("flex cursor-default select-none items-center rounded-sm px-3 py-1 text-sm font-medium outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground",e),...t}));gt.displayName=Gi.displayName;const bt=j.forwardRef(({className:e,inset:t,children:s,...r},a)=>n.jsxs(Zi,{ref:a,className:D("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground",t&&"pl-8",e),...r,children:[s,n.jsx(Vr,{className:"ml-auto size-4"})]}));bt.displayName=Zi.displayName;const vt=j.forwardRef(({className:e,...t},s)=>n.jsx(Ji,{ref:s,className:D("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t}));vt.displayName=Ji.displayName;const wt=j.forwardRef(({className:e,align:t="start",alignOffset:s=-4,sideOffset:r=8,...a},o)=>n.jsx(Kp,{children:n.jsx(Ki,{ref:o,align:t,alignOffset:s,sideOffset:r,className:D("z-50 min-w-[12rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...a})}));wt.displayName=Ki.displayName;const $=j.forwardRef(({className:e,inset:t,...s},r)=>n.jsx(Wi,{ref:r,className:D("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t&&"pl-8",e),...s}));$.displayName=Wi.displayName;const yt=j.forwardRef(({className:e,children:t,checked:s,...r},a)=>n.jsxs(qi,{ref:a,className:D("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:s,...r,children:[n.jsx("span",{className:"absolute left-2 flex size-3.5 items-center justify-center",children:n.jsx(Xi,{children:n.jsx(xn,{className:"size-4"})})}),t]}));yt.displayName=qi.displayName;const Wp=j.forwardRef(({className:e,children:t,...s},r)=>n.jsxs(Yi,{ref:r,className:D("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...s,children:[n.jsx("span",{className:"absolute left-2 flex size-3.5 items-center justify-center",children:n.jsx(Xi,{children:n.jsx(Hr,{className:"size-4 fill-current"})})}),t]}));Wp.displayName=Yi.displayName;const qp=j.forwardRef(({className:e,inset:t,...s},r)=>n.jsx(Ui,{ref:r,className:D("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...s}));qp.displayName=Ui.displayName;const ke=j.forwardRef(({className:e,...t},s)=>n.jsx(Qi,{ref:s,className:D("-mx-1 my-1 h-px bg-muted",e),...t}));ke.displayName=Qi.displayName;const Ne=({className:e,...t})=>n.jsx("span",{className:D("ml-auto text-xs tracking-widest text-muted-foreground",e),...t});Ne.displayname="MenubarShortcut";const hh=()=>{const{clearDiagramData:e,deleteDiagram:t,updateDiagramUpdatedAt:s,databaseType:r}=ne(),{openCreateDiagramDialog:a,openOpenDiagramDialog:o,openExportSQLDialog:l,openImportDatabaseDialog:c,openExportImageDialog:d,openExportDiagramDialog:u,openImportDiagramDialog:f,openImportDBMLDialog:p}=gn(),{showAlert:x}=Vl(),{setTheme:h,theme:v}=Cn(),{hideSidePanel:m,isSidePanelShowed:b,showSidePanel:y}=he(),{scrollAction:g,setScrollAction:w,setShowCardinality:C,showCardinality:S,setShowDependenciesOnCanvas:_,showDependenciesOnCanvas:R,setShowMiniMapOnCanvas:M,showMiniMapOnCanvas:T}=oc(),{t:N}=ee(),{redo:I,undo:P,hasRedo:L,hasUndo:A}=Hl(),{config:V,updateConfig:G}=nc(),{exportImage:K}=sc(),se=xl(),X=i.useCallback(()=>{t(),se("/")},[t,se]),Me=()=>{a()},De=()=>{o()},Q=i.useCallback(()=>{K("svg",1)},[K]),pe=i.useCallback(()=>{d({format:"png"})},[d]),de=i.useCallback(()=>{d({format:"jpeg"})},[d]),je=i.useCallback(()=>{window.open("https://docs.chartdb.io","_blank")},[]),Z=i.useCallback(()=>{window.open("https://discord.gg/QeFwyWSKwC","_blank")},[]),E=i.useCallback(re=>{if(re===W.GENERIC){l({targetDatabaseType:W.GENERIC});return}l({targetDatabaseType:re})},[V==null?void 0:V.exportActions,G,x,l]),F=i.useCallback(()=>{b?m():y()},[b,y,m]),U=i.useCallback(()=>{C(!S)},[S,C]),k=i.useCallback(()=>{_(!R)},[R,_]),B=i.useCallback(()=>{M(!T)},[T,M]),O="✨";return n.jsxs(el,{className:"h-8 border-none py-2 shadow-none md:h-10 md:py-0",children:[n.jsxs(Lt,{children:[n.jsx(gt,{children:N("menu.file.file")}),n.jsxs(wt,{children:[n.jsx($,{onClick:Me,children:N("menu.file.new")}),n.jsxs($,{onClick:De,children:[N("menu.file.open"),n.jsx(Ne,{children:mt[xt.OPEN_DIAGRAM].keyCombinationLabel})]}),n.jsxs($,{onClick:s,children:[N("menu.file.save"),n.jsx(Ne,{children:mt[xt.SAVE_DIAGRAM].keyCombinationLabel})]}),n.jsx(ke,{}),n.jsxs($t,{children:[n.jsx(bt,{children:N("menu.file.import")}),n.jsxs(vt,{children:[n.jsx($,{onClick:f,children:".json"}),n.jsx($,{onClick:()=>p(),children:".dbml"}),n.jsx(ke,{}),n.jsx($,{onClick:()=>c({databaseType:W.POSTGRESQL}),children:Ie.postgresql}),n.jsx($,{onClick:()=>c({databaseType:W.MYSQL}),children:Ie.mysql}),n.jsx($,{onClick:()=>c({databaseType:W.SQL_SERVER}),children:Ie.sql_server}),n.jsx($,{onClick:()=>c({databaseType:W.MARIADB}),children:Ie.mariadb}),n.jsx($,{onClick:()=>c({databaseType:W.SQLITE}),children:Ie.sqlite})]})]}),n.jsx(ke,{}),n.jsxs($t,{children:[n.jsx(bt,{children:N("menu.file.export_sql")}),n.jsxs(vt,{children:[n.jsx($,{onClick:()=>E(W.GENERIC),children:Ie.generic}),n.jsxs($,{onClick:()=>E(W.POSTGRESQL),children:[Ie.postgresql,r!==W.POSTGRESQL&&n.jsx(Ne,{className:"text-base",children:O})]}),n.jsxs($,{onClick:()=>E(W.MYSQL),children:[Ie.mysql,r!==W.MYSQL&&n.jsx(Ne,{className:"text-base",children:O})]}),n.jsxs($,{onClick:()=>E(W.SQL_SERVER),children:[Ie.sql_server,r!==W.SQL_SERVER&&n.jsx(Ne,{className:"text-base",children:O})]}),n.jsxs($,{onClick:()=>E(W.MARIADB),children:[Ie.mariadb,r!==W.MARIADB&&n.jsx(Ne,{className:"text-base",children:O})]}),n.jsxs($,{onClick:()=>E(W.SQLITE),children:[Ie.sqlite,r!==W.SQLITE&&n.jsx(Ne,{className:"text-base",children:O})]})]})]}),n.jsxs($t,{children:[n.jsx(bt,{children:N("menu.file.export_as")}),n.jsxs(vt,{children:[n.jsx($,{onClick:pe,children:"PNG"}),n.jsx($,{onClick:de,children:"JPG"}),n.jsx($,{onClick:Q,children:"SVG"}),n.jsx(ke,{}),n.jsx($,{onClick:u,children:"JSON"})]})]}),n.jsx(ke,{}),n.jsx($,{onClick:()=>x({title:N("delete_diagram_alert.title"),description:N("delete_diagram_alert.description"),actionLabel:N("delete_diagram_alert.delete"),closeLabel:N("delete_diagram_alert.cancel"),onAction:X}),children:N("menu.file.delete_diagram")}),n.jsx(ke,{}),n.jsx($,{children:N("menu.file.exit")})]})]}),n.jsxs(Lt,{children:[n.jsx(gt,{children:N("menu.edit.edit")}),n.jsxs(wt,{children:[n.jsxs($,{onClick:P,disabled:!A,children:[N("menu.edit.undo"),n.jsx(Ne,{children:mt[xt.UNDO].keyCombinationLabel})]}),n.jsxs($,{onClick:I,disabled:!L,children:[N("menu.edit.redo"),n.jsx(Ne,{children:mt[xt.REDO].keyCombinationLabel})]}),n.jsx(ke,{}),n.jsx($,{onClick:()=>x({title:N("clear_diagram_alert.title"),description:N("clear_diagram_alert.description"),actionLabel:N("clear_diagram_alert.clear"),closeLabel:N("clear_diagram_alert.cancel"),onAction:e}),children:N("menu.edit.clear")})]})]}),n.jsxs(Lt,{children:[n.jsx(gt,{children:N("menu.view.view")}),n.jsxs(wt,{children:[n.jsxs($,{onClick:F,children:[N(b?"menu.view.hide_sidebar":"menu.view.show_sidebar"),n.jsx(Ne,{children:mt[xt.TOGGLE_SIDE_PANEL].keyCombinationLabel})]}),n.jsx(ke,{}),n.jsx($,{onClick:U,children:N(S?"menu.view.hide_cardinality":"menu.view.show_cardinality")}),r!==W.CLICKHOUSE?n.jsx($,{onClick:k,children:N(R?"menu.view.hide_dependencies":"menu.view.show_dependencies")}):null,n.jsx($,{onClick:B,children:N(T?"menu.view.hide_minimap":"menu.view.show_minimap")}),n.jsx(ke,{}),n.jsxs($t,{children:[n.jsx(bt,{children:N("menu.view.zoom_on_scroll")}),n.jsxs(vt,{children:[n.jsx(yt,{checked:g==="zoom",onClick:()=>w("zoom"),children:N("zoom.on")}),n.jsx(yt,{checked:g==="pan",onClick:()=>w("pan"),children:N("zoom.off")})]})]}),n.jsx(ke,{}),n.jsxs($t,{children:[n.jsxs(bt,{className:"flex items-center gap-1",children:[n.jsx("span",{children:N("menu.view.theme")}),n.jsx("div",{className:"flex-1"}),n.jsx(Ne,{children:mt[xt.TOGGLE_THEME].keyCombinationLabel})]}),n.jsxs(vt,{children:[n.jsx(yt,{checked:v==="system",onClick:()=>h("system"),children:N("theme.system")}),n.jsx(yt,{checked:v==="light",onClick:()=>h("light"),children:N("theme.light")}),n.jsx(yt,{checked:v==="dark",onClick:()=>h("dark"),children:N("theme.dark")})]})]})]})]}),n.jsxs(Lt,{children:[n.jsx(gt,{children:N("menu.backup.backup")}),n.jsxs(wt,{children:[n.jsx($,{onClick:u,children:N("menu.backup.export_diagram")}),n.jsx($,{onClick:f,children:N("menu.backup.restore_diagram")})]})]}),n.jsxs(Lt,{children:[n.jsx(gt,{children:N("menu.help.help")}),n.jsxs(wt,{children:[n.jsx($,{onClick:je,children:N("menu.help.docs_website")}),n.jsx($,{onClick:Z,children:N("menu.help.join_discord")})]})]})]})};export{uh as D,dh as E,fh as L,hh as M,lp as S,ch as a,Pn as u};
