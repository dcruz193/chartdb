import{R as r,r as ue,j as m,b as ce}from"./index-D22tuFcn.js";import{u as St,L as Rt,M as Tt,D as Dt,S as Et,E as Ot,a as Ct}from"./menu-5d140pYd.js";import{S as $t,C as Nt}from"./canvas-FyVWAmZ1.js";import{u as Mt}from"./canvas-utils-C5DtV3-P.js";import{T as Pt,D as jt,R as At,P as It,C as kt,O as Ht,a as Lt}from"./code-editor-CVERTBtE.js";import{B as _t}from"./label-DEegoE4u.js";import{a as Bt}from"./theme-provider-qAUrzat1.js";import"./databases-C9KYyYJn.js";import"./database-type-C2NNW5SW.js";import"./storage-provider-DM7k1KMT.js";import"./use-storage-CGFXC_qQ.js";import"./env-B5QThsD5.js";import"./badge-BBZzLzuh.js";/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zt=Bt("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);function Ut(e){if(typeof document>"u")return;let n=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style");t.type="text/css",n.appendChild(t),t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}const Ve=r.createContext({drawerRef:{current:null},overlayRef:{current:null},onPress:()=>{},onRelease:()=>{},onDrag:()=>{},onNestedDrag:()=>{},onNestedOpenChange:()=>{},onNestedRelease:()=>{},openProp:void 0,dismissible:!1,isOpen:!1,isDragging:!1,keyboardIsOpen:{current:!1},snapPointsOffset:null,snapPoints:null,handleOnly:!1,modal:!1,shouldFade:!1,activeSnapPoint:null,onOpenChange:()=>{},setActiveSnapPoint:()=>{},closeDrawer:()=>{},direction:"bottom",shouldScaleBackground:!1,setBackgroundColorOnScale:!0,noBodyStyles:!1,container:null,autoFocus:!1}),de=()=>{const e=r.useContext(Ve);if(!e)throw new Error("useDrawerContext must be used within a Drawer.Root");return e};Ut(`[data-vaul-drawer]{touch-action:none;will-change:transform;transition:transform .5s cubic-bezier(.32, .72, 0, 1);animation-duration:.5s;animation-timing-function:cubic-bezier(0.32,0.72,0,1)}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=bottom][data-state=open]{animation-name:slideFromBottom}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=bottom][data-state=closed]{animation-name:slideToBottom}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=top][data-state=open]{animation-name:slideFromTop}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=top][data-state=closed]{animation-name:slideToTop}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=left][data-state=open]{animation-name:slideFromLeft}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=left][data-state=closed]{animation-name:slideToLeft}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=right][data-state=open]{animation-name:slideFromRight}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=right][data-state=closed]{animation-name:slideToRight}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=bottom]{transform:translate3d(0,100%,0)}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=top]{transform:translate3d(0,-100%,0)}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=left]{transform:translate3d(-100%,0,0)}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=right]{transform:translate3d(100%,0,0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=top]{transform:translate3d(0,var(--snap-point-height,0),0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=bottom]{transform:translate3d(0,var(--snap-point-height,0),0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=left]{transform:translate3d(var(--snap-point-height,0),0,0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=right]{transform:translate3d(var(--snap-point-height,0),0,0)}[data-vaul-overlay][data-vaul-snap-points=false]{animation-duration:.5s;animation-timing-function:cubic-bezier(0.32,0.72,0,1)}[data-vaul-overlay][data-vaul-snap-points=false][data-state=open]{animation-name:fadeIn}[data-vaul-overlay][data-state=closed]{animation-name:fadeOut}[data-vaul-overlay][data-vaul-snap-points=true]{opacity:0;transition:opacity .5s cubic-bezier(.32, .72, 0, 1)}[data-vaul-overlay][data-vaul-snap-points=true]{opacity:1}[data-vaul-drawer]:not([data-vaul-custom-container=true])::after{content:'';position:absolute;background:inherit;background-color:inherit}[data-vaul-drawer][data-vaul-drawer-direction=top]::after{top:initial;bottom:100%;left:0;right:0;height:200%}[data-vaul-drawer][data-vaul-drawer-direction=bottom]::after{top:100%;bottom:initial;left:0;right:0;height:200%}[data-vaul-drawer][data-vaul-drawer-direction=left]::after{left:initial;right:100%;top:0;bottom:0;width:200%}[data-vaul-drawer][data-vaul-drawer-direction=right]::after{left:100%;right:initial;top:0;bottom:0;width:200%}[data-vaul-overlay][data-vaul-snap-points=true]:not([data-vaul-snap-points-overlay=true]):not(
[data-state=closed]
){opacity:0}[data-vaul-overlay][data-vaul-snap-points-overlay=true]{opacity:1}[data-vaul-handle]{display:block;position:relative;opacity:.7;background:#e2e2e4;margin-left:auto;margin-right:auto;height:5px;width:32px;border-radius:1rem;touch-action:pan-y}[data-vaul-handle]:active,[data-vaul-handle]:hover{opacity:1}[data-vaul-handle-hitarea]{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);width:max(100%,2.75rem);height:max(100%,2.75rem);touch-action:inherit}@media (hover:hover) and (pointer:fine){[data-vaul-drawer]{user-select:none}}@media (pointer:fine){[data-vaul-handle-hitarea]:{width:100%;height:100%}}@keyframes fadeIn{from{opacity:0}to{opacity:1}}@keyframes fadeOut{to{opacity:0}}@keyframes slideFromBottom{from{transform:translate3d(0,100%,0)}to{transform:translate3d(0,0,0)}}@keyframes slideToBottom{to{transform:translate3d(0,100%,0)}}@keyframes slideFromTop{from{transform:translate3d(0,-100%,0)}to{transform:translate3d(0,0,0)}}@keyframes slideToTop{to{transform:translate3d(0,-100%,0)}}@keyframes slideFromLeft{from{transform:translate3d(-100%,0,0)}to{transform:translate3d(0,0,0)}}@keyframes slideToLeft{to{transform:translate3d(-100%,0,0)}}@keyframes slideFromRight{from{transform:translate3d(100%,0,0)}to{transform:translate3d(0,0,0)}}@keyframes slideToRight{to{transform:translate3d(100%,0,0)}}`);const Ft=24,Wt=typeof window<"u"?ue.useLayoutEffect:ue.useEffect;function ze(...e){return(...n)=>{for(let t of e)typeof t=="function"&&t(...n)}}function Vt(){return Me(/^Mac/)}function Yt(){return Me(/^iPhone/)}function Ue(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}function qt(){return Me(/^iPad/)||Vt()&&navigator.maxTouchPoints>1}function Ye(){return Yt()||qt()}function Me(e){return typeof window<"u"&&window.navigator!=null?e.test(window.navigator.platform):void 0}const De=typeof document<"u"&&window.visualViewport;function Fe(e){let n=window.getComputedStyle(e);return/(auto|scroll)/.test(n.overflow+n.overflowX+n.overflowY)}function qe(e){for(Fe(e)&&(e=e.parentElement);e&&!Fe(e);)e=e.parentElement;return e||document.scrollingElement||document.documentElement}const Xt=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);let we=0,Ee;function Gt(e={}){let{isDisabled:n}=e;Wt(()=>{if(!n)return we++,we===1&&Ye()&&(Ee=Kt()),()=>{we--,we===0&&(Ee==null||Ee())}},[n])}function Kt(){let e,n=0,t=h=>{e=qe(h.target),!(e===document.documentElement&&e===document.body)&&(n=h.changedTouches[0].pageY)},a=h=>{if(!e||e===document.documentElement||e===document.body){h.preventDefault();return}let w=h.changedTouches[0].pageY,H=e.scrollTop,U=e.scrollHeight-e.clientHeight;U!==0&&((H<=0&&w>n||H>=U&&w<n)&&h.preventDefault(),n=w)},i=h=>{let w=h.target;$e(w)&&w!==document.activeElement&&(h.preventDefault(),w.style.transform="translateY(-2000px)",w.focus(),requestAnimationFrame(()=>{w.style.transform=""}))},o=h=>{let w=h.target;$e(w)&&(w.style.transform="translateY(-2000px)",requestAnimationFrame(()=>{w.style.transform="",De&&(De.height<window.innerHeight?requestAnimationFrame(()=>{We(w)}):De.addEventListener("resize",()=>We(w),{once:!0}))}))},g=()=>{window.scrollTo(0,0)},p=window.pageXOffset,S=window.pageYOffset,D=ze(Jt(document.documentElement,"paddingRight",`${window.innerWidth-document.documentElement.clientWidth}px`));window.scrollTo(0,0);let v=ze(se(document,"touchstart",t,{passive:!1,capture:!0}),se(document,"touchmove",a,{passive:!1,capture:!0}),se(document,"touchend",i,{passive:!1,capture:!0}),se(document,"focus",o,!0),se(window,"scroll",g));return()=>{D(),v(),window.scrollTo(p,S)}}function Jt(e,n,t){let a=e.style[n];return e.style[n]=t,()=>{e.style[n]=a}}function se(e,n,t,a){return e.addEventListener(n,t,a),()=>{e.removeEventListener(n,t,a)}}function We(e){let n=document.scrollingElement||document.documentElement;for(;e&&e!==n;){let t=qe(e);if(t!==document.documentElement&&t!==document.body&&t!==e){let a=t.getBoundingClientRect().top,i=e.getBoundingClientRect().top,o=e.getBoundingClientRect().bottom;const g=t.getBoundingClientRect().bottom+Ft;o>g&&(t.scrollTop+=i-a)}e=t.parentElement}}function $e(e){return e instanceof HTMLInputElement&&!Xt.has(e.type)||e instanceof HTMLTextAreaElement||e instanceof HTMLElement&&e.isContentEditable}function Qt(e,n){typeof e=="function"?e(n):e!=null&&(e.current=n)}function Zt(...e){return n=>e.forEach(t=>Qt(t,n))}function Xe(...e){return ue.useCallback(Zt(...e),e)}const Ge=new WeakMap;function $(e,n,t=!1){if(!e||!(e instanceof HTMLElement))return;let a={};Object.entries(n).forEach(([i,o])=>{if(i.startsWith("--")){e.style.setProperty(i,o);return}a[i]=e.style[i],e.style[i]=o}),!t&&Ge.set(e,a)}function en(e,n){if(!e||!(e instanceof HTMLElement))return;let t=Ge.get(e);t&&(e.style[n]=t[n])}const N=e=>{switch(e){case"top":case"bottom":return!0;case"left":case"right":return!1;default:return e}};function ge(e,n){if(!e)return null;const t=window.getComputedStyle(e),a=t.transform||t.webkitTransform||t.mozTransform;let i=a.match(/^matrix3d\((.+)\)$/);return i?parseFloat(i[1].split(", ")[N(n)?13:12]):(i=a.match(/^matrix\((.+)\)$/),i?parseFloat(i[1].split(", ")[N(n)?5:4]):null)}function tn(e){return 8*(Math.log(e+1)-2)}function Oe(e,n){if(!e)return()=>{};const t=e.style.cssText;return Object.assign(e.style,n),()=>{e.style.cssText=t}}function nn(...e){return(...n)=>{for(const t of e)typeof t=="function"&&t(...n)}}const O={DURATION:.5,EASE:[.32,.72,0,1]},Ke=.4,rn=.25,an=100,Je=8,ve=16,Ne=26,Ce="vaul-dragging";function Qe(e){const n=r.useRef(e);return r.useEffect(()=>{n.current=e}),r.useMemo(()=>(...t)=>n.current==null?void 0:n.current.call(n,...t),[])}function on({defaultProp:e,onChange:n}){const t=r.useState(e),[a]=t,i=r.useRef(a),o=Qe(n);return r.useEffect(()=>{i.current!==a&&(o(a),i.current=a)},[a,i,o]),t}function Ze({prop:e,defaultProp:n,onChange:t=()=>{}}){const[a,i]=on({defaultProp:n,onChange:t}),o=e!==void 0,g=o?e:a,p=Qe(t),S=r.useCallback(D=>{if(o){const h=typeof D=="function"?D(e):D;h!==e&&p(h)}else i(D)},[o,e,i,p]);return[g,S]}function sn({activeSnapPointProp:e,setActiveSnapPointProp:n,snapPoints:t,drawerRef:a,overlayRef:i,fadeFromIndex:o,onSnapPointChange:g,direction:p="bottom",container:S,snapToSequentialPoint:D}){const[v,h]=Ze({prop:e,defaultProp:t==null?void 0:t[0],onChange:n}),[w,H]=r.useState(typeof window<"u"?{innerWidth:window.innerWidth,innerHeight:window.innerHeight}:void 0);r.useEffect(()=>{function d(){H({innerWidth:window.innerWidth,innerHeight:window.innerHeight})}return window.addEventListener("resize",d),()=>window.removeEventListener("resize",d)},[]);const U=r.useMemo(()=>v===(t==null?void 0:t[t.length-1])||null,[t,v]),C=r.useMemo(()=>t==null?void 0:t.findIndex(d=>d===v),[t,v]),W=t&&t.length>0&&(o||o===0)&&!Number.isNaN(o)&&t[o]===v||!t,f=r.useMemo(()=>{const d=S?{width:S.getBoundingClientRect().width,height:S.getBoundingClientRect().height}:typeof window<"u"?{width:window.innerWidth,height:window.innerHeight}:{width:0,height:0};var R;return(R=t==null?void 0:t.map(y=>{const I=typeof y=="string";let s=0;if(I&&(s=parseInt(y,10)),N(p)){const P=I?s:w?y*d.height:0;return w?p==="bottom"?d.height-P:-d.height+P:P}const j=I?s:w?y*d.width:0;return w?p==="right"?d.width-j:-d.width+j:j}))!=null?R:[]},[t,w,S]),L=r.useMemo(()=>C!==null?f==null?void 0:f[C]:null,[f,C]),M=r.useCallback(d=>{var R;const y=(R=f==null?void 0:f.findIndex(I=>I===d))!=null?R:null;g(y),$(a.current,{transition:`transform ${O.DURATION}s cubic-bezier(${O.EASE.join(",")})`,transform:N(p)?`translate3d(0, ${d}px, 0)`:`translate3d(${d}px, 0, 0)`}),f&&y!==f.length-1&&y!==o&&y<o?$(i.current,{transition:`opacity ${O.DURATION}s cubic-bezier(${O.EASE.join(",")})`,opacity:"0"}):$(i.current,{transition:`opacity ${O.DURATION}s cubic-bezier(${O.EASE.join(",")})`,opacity:"1"}),h(t==null?void 0:t[Math.max(y,0)])},[a.current,t,f,o,i,h]);r.useEffect(()=>{if(v||e){var d;const R=(d=t==null?void 0:t.findIndex(y=>y===e||y===v))!=null?d:-1;f&&R!==-1&&typeof f[R]=="number"&&M(f[R])}},[v,e,t,f,M]);function c({draggedDistance:d,closeDrawer:R,velocity:y,dismissible:I}){if(o===void 0)return;const s=p==="bottom"||p==="right"?(L??0)-d:(L??0)+d,j=C===o-1,P=C===0,_=d>0;if(j&&$(i.current,{transition:`opacity ${O.DURATION}s cubic-bezier(${O.EASE.join(",")})`}),!D&&y>2&&!_){I?R():M(f[0]);return}if(!D&&y>2&&_&&f&&t){M(f[t.length-1]);return}const B=f==null?void 0:f.reduce((z,Q)=>typeof z!="number"||typeof Q!="number"?z:Math.abs(Q-s)<Math.abs(z-s)?Q:z),K=N(p)?window.innerHeight:window.innerWidth;if(y>Ke&&Math.abs(d)<K*.4){const z=_?1:-1;if(z>0&&U){M(f[t.length-1]);return}if(P&&z<0&&I&&R(),C===null)return;M(f[C+z]);return}M(B)}function A({draggedDistance:d}){if(L===null)return;const R=p==="bottom"||p==="right"?L-d:L+d;(p==="bottom"||p==="right")&&R<f[f.length-1]||(p==="top"||p==="left")&&R>f[f.length-1]||$(a.current,{transform:N(p)?`translate3d(0, ${R}px, 0)`:`translate3d(${R}px, 0, 0)`})}function X(d,R){if(!t||typeof C!="number"||!f||o===void 0)return null;const y=C===o-1;if(C>=o&&R)return 0;if(y&&!R)return 1;if(!W&&!y)return null;const s=y?C+1:C-1,j=y?f[s]-f[s-1]:f[s+1]-f[s],P=d/Math.abs(j);return y?1-P:P}return{isLastSnapPoint:U,activeSnapPoint:v,shouldFade:W,getPercentageDragged:X,setActiveSnapPoint:h,activeSnapPointIndex:C,onRelease:c,onDrag:A,snapPointsOffset:f}}const ln=()=>()=>{};function un(){const{direction:e,isOpen:n,shouldScaleBackground:t,setBackgroundColorOnScale:a,noBodyStyles:i}=de(),o=r.useRef(null),g=ue.useMemo(()=>document.body.style.backgroundColor,[]);function p(){return(window.innerWidth-Ne)/window.innerWidth}r.useEffect(()=>{if(n&&t){o.current&&clearTimeout(o.current);const S=document.querySelector("[data-vaul-drawer-wrapper]")||document.querySelector("[vaul-drawer-wrapper]");if(!S)return;nn(a&&!i?Oe(document.body,{background:"black"}):ln,Oe(S,{transformOrigin:N(e)?"top":"left",transitionProperty:"transform, border-radius",transitionDuration:`${O.DURATION}s`,transitionTimingFunction:`cubic-bezier(${O.EASE.join(",")})`}));const D=Oe(S,{borderRadius:`${Je}px`,overflow:"hidden",...N(e)?{transform:`scale(${p()}) translate3d(0, calc(env(safe-area-inset-top) + 14px), 0)`}:{transform:`scale(${p()}) translate3d(calc(env(safe-area-inset-top) + 14px), 0, 0)`}});return()=>{D(),o.current=window.setTimeout(()=>{g?document.body.style.background=g:document.body.style.removeProperty("background")},O.DURATION*1e3)}}},[n,t,g])}let le=null;function cn({isOpen:e,modal:n,nested:t,hasBeenOpened:a,preventScrollRestoration:i,noBodyStyles:o}){const[g,p]=r.useState(()=>typeof window<"u"?window.location.href:""),S=r.useRef(0),D=r.useCallback(()=>{if(Ue()&&le===null&&e&&!o){le={position:document.body.style.position,top:document.body.style.top,left:document.body.style.left,height:document.body.style.height,right:"unset"};const{scrollX:h,innerHeight:w}=window;document.body.style.setProperty("position","fixed","important"),Object.assign(document.body.style,{top:`${-S.current}px`,left:`${-h}px`,right:"0px",height:"auto"}),window.setTimeout(()=>window.requestAnimationFrame(()=>{const H=w-window.innerHeight;H&&S.current>=w&&(document.body.style.top=`${-(S.current+H)}px`)}),300)}},[e]),v=r.useCallback(()=>{if(Ue()&&le!==null&&!o){const h=-parseInt(document.body.style.top,10),w=-parseInt(document.body.style.left,10);Object.assign(document.body.style,le),window.requestAnimationFrame(()=>{if(i&&g!==window.location.href){p(window.location.href);return}window.scrollTo(w,h)}),le=null}},[g]);return r.useEffect(()=>{function h(){S.current=window.scrollY}return h(),window.addEventListener("scroll",h),()=>{window.removeEventListener("scroll",h)}},[]),r.useEffect(()=>{t||!a||(e?(!window.matchMedia("(display-mode: standalone)").matches&&D(),n||window.setTimeout(()=>{v()},500)):v())},[e,a,g,n,t,D,v]),{restorePositionSetting:v}}function dn({open:e,onOpenChange:n,children:t,onDrag:a,onRelease:i,snapPoints:o,shouldScaleBackground:g=!1,setBackgroundColorOnScale:p=!0,closeThreshold:S=rn,scrollLockTimeout:D=an,dismissible:v=!0,handleOnly:h=!1,fadeFromIndex:w=o&&o.length-1,activeSnapPoint:H,setActiveSnapPoint:U,fixed:C,modal:W=!0,onClose:f,nested:L,noBodyStyles:M,direction:c="bottom",defaultOpen:A=!1,disablePreventScroll:X=!0,snapToSequentialPoint:d=!1,preventScrollRestoration:R=!1,repositionInputs:y=!0,onAnimationEnd:I,container:s,autoFocus:j=!1}){var P,_;const[B=!1,K]=Ze({defaultProp:A,prop:e,onChange:l=>{n==null||n(l),!l&&!L&&pt(),setTimeout(()=>{I==null||I(l)},O.DURATION*1e3),l&&!W&&typeof window<"u"&&window.requestAnimationFrame(()=>{document.body.style.pointerEvents="auto"}),l||(document.body.style.pointerEvents="auto")}}),[z,Q]=r.useState(!1),[ne,ye]=r.useState(!1),[lt,Pe]=r.useState(!1),ee=r.useRef(null),fe=r.useRef(null),be=r.useRef(null),xe=r.useRef(null),me=r.useRef(null),re=r.useRef(!1),Se=r.useRef(null),Re=r.useRef(0),te=r.useRef(!1),je=r.useRef(0),u=r.useRef(null),Ae=r.useRef(((P=u.current)==null?void 0:P.getBoundingClientRect().height)||0),Ie=r.useRef(((_=u.current)==null?void 0:_.getBoundingClientRect().width)||0),Te=r.useRef(0),ut=r.useCallback(l=>{o&&l===oe.length-1&&(fe.current=new Date)},[]),{activeSnapPoint:ct,activeSnapPointIndex:ae,setActiveSnapPoint:ke,onRelease:dt,snapPointsOffset:oe,onDrag:ft,shouldFade:He,getPercentageDragged:mt}=sn({snapPoints:o,activeSnapPointProp:H,setActiveSnapPointProp:U,drawerRef:u,fadeFromIndex:w,overlayRef:ee,onSnapPointChange:ut,direction:c,container:s,snapToSequentialPoint:d});Gt({isDisabled:!B||ne||!W||lt||!z||!y||!X});const{restorePositionSetting:pt}=cn({isOpen:B,modal:W,nested:L,hasBeenOpened:z,preventScrollRestoration:R,noBodyStyles:M});function pe(){return(window.innerWidth-Ne)/window.innerWidth}function ht(l){var b,T;!v&&!o||u.current&&!u.current.contains(l.target)||(Ae.current=((b=u.current)==null?void 0:b.getBoundingClientRect().height)||0,Ie.current=((T=u.current)==null?void 0:T.getBoundingClientRect().width)||0,ye(!0),be.current=new Date,Ye()&&window.addEventListener("touchend",()=>re.current=!1,{once:!0}),l.target.setPointerCapture(l.pointerId),Re.current=N(c)?l.pageY:l.pageX)}function Le(l,b){var T,E;let x=l;const V=(T=window.getSelection())==null?void 0:T.toString(),k=u.current?ge(u.current,c):null,F=new Date;if(x.hasAttribute("data-vaul-no-drag")||x.closest("[data-vaul-no-drag]"))return!1;if(c==="right"||c==="left")return!0;if(fe.current&&F.getTime()-fe.current.getTime()<500)return!1;if(k!==null&&(c==="bottom"?k>0:k<0))return!0;if(V&&V.length>0)return!1;if(F.getTime()-((E=me.current)==null?void 0:E.getTime())<D&&k===0||b)return me.current=F,!1;for(;x;){if(x.scrollHeight>x.clientHeight){if(x.scrollTop!==0)return me.current=new Date,!1;if(x.getAttribute("role")==="dialog")return!0}x=x.parentNode}return!0}function wt(l){if(u.current&&ne){const b=c==="bottom"||c==="right"?1:-1,T=(Re.current-(N(c)?l.pageY:l.pageX))*b,E=T>0,x=o&&!v&&!E;if(x&&ae===0)return;const V=Math.abs(T),k=document.querySelector("[data-vaul-drawer-wrapper]"),F=c==="bottom"||c==="top"?Ae.current:Ie.current;let Y=V/F;const Z=mt(V,E);if(Z!==null&&(Y=Z),x&&Y>=1||!re.current&&!Le(l.target,E))return;if(u.current.classList.add(Ce),re.current=!0,$(u.current,{transition:"none"}),$(ee.current,{transition:"none"}),o&&ft({draggedDistance:T}),E&&!o){const q=tn(T),he=Math.min(q*-1,0)*b;$(u.current,{transform:N(c)?`translate3d(0, ${he}px, 0)`:`translate3d(${he}px, 0, 0)`});return}const J=1-Y;if((He||w&&ae===w-1)&&(a==null||a(l,Y),$(ee.current,{opacity:`${J}`,transition:"none"},!0)),k&&ee.current&&g){const q=Math.min(pe()+Y*(1-pe()),1),he=8-Y*8,Be=Math.max(0,14-Y*14);$(k,{borderRadius:`${he}px`,transform:N(c)?`scale(${q}) translate3d(0, ${Be}px, 0)`:`scale(${q}) translate3d(${Be}px, 0, 0)`,transition:"none"},!0)}if(!o){const q=V*b;$(u.current,{transform:N(c)?`translate3d(0, ${q}px, 0)`:`translate3d(${q}px, 0, 0)`})}}}r.useEffect(()=>{var l;function b(){if(!u.current||!y)return;const T=document.activeElement;if($e(T)||te.current){var E;const x=((E=window.visualViewport)==null?void 0:E.height)||0,V=window.innerHeight;let k=V-x;const F=u.current.getBoundingClientRect().height||0,Y=F>V*.8;Te.current||(Te.current=F);const Z=u.current.getBoundingClientRect().top;if(Math.abs(je.current-k)>60&&(te.current=!te.current),o&&o.length>0&&oe&&ae){const J=oe[ae]||0;k+=J}if(je.current=k,F>x||te.current){const J=u.current.getBoundingClientRect().height;let q=J;J>x&&(q=x-(Y?Z:Ne)),C?u.current.style.height=`${J-Math.max(k,0)}px`:u.current.style.height=`${Math.max(q,x-Z)}px`}else u.current.style.height=`${Te.current}px`;o&&o.length>0&&!te.current?u.current.style.bottom="0px":u.current.style.bottom=`${Math.max(k,0)}px`}}return(l=window.visualViewport)==null||l.addEventListener("resize",b),()=>{var T;return(T=window.visualViewport)==null?void 0:T.removeEventListener("resize",b)}},[ae,o,oe]);function ie(l){gt(),f==null||f(),l||K(!1),setTimeout(()=>{o&&ke(o[0])},O.DURATION*1e3)}function _e(){if(!u.current)return;const l=document.querySelector("[data-vaul-drawer-wrapper]"),b=ge(u.current,c);$(u.current,{transform:"translate3d(0, 0, 0)",transition:`transform ${O.DURATION}s cubic-bezier(${O.EASE.join(",")})`}),$(ee.current,{transition:`opacity ${O.DURATION}s cubic-bezier(${O.EASE.join(",")})`,opacity:"1"}),g&&b&&b>0&&B&&$(l,{borderRadius:`${Je}px`,overflow:"hidden",...N(c)?{transform:`scale(${pe()}) translate3d(0, calc(env(safe-area-inset-top) + 14px), 0)`,transformOrigin:"top"}:{transform:`scale(${pe()}) translate3d(calc(env(safe-area-inset-top) + 14px), 0, 0)`,transformOrigin:"left"},transitionProperty:"transform, border-radius",transitionDuration:`${O.DURATION}s`,transitionTimingFunction:`cubic-bezier(${O.EASE.join(",")})`},!0)}function gt(){!ne||!u.current||(u.current.classList.remove(Ce),re.current=!1,ye(!1),xe.current=new Date)}function vt(l){if(!ne||!u.current)return;u.current.classList.remove(Ce),re.current=!1,ye(!1),xe.current=new Date;const b=ge(u.current,c);if(!Le(l.target,!1)||!b||Number.isNaN(b)||be.current===null)return;const T=xe.current.getTime()-be.current.getTime(),E=Re.current-(N(c)?l.pageY:l.pageX),x=Math.abs(E)/T;if(x>.05&&(Pe(!0),setTimeout(()=>{Pe(!1)},200)),o){dt({draggedDistance:E*(c==="bottom"||c==="right"?1:-1),closeDrawer:ie,velocity:x,dismissible:v}),i==null||i(l,!0);return}if(c==="bottom"||c==="right"?E>0:E<0){_e(),i==null||i(l,!0);return}if(x>Ke){ie(),i==null||i(l,!1);return}var V;const k=Math.min((V=u.current.getBoundingClientRect().height)!=null?V:0,window.innerHeight);var F;const Y=Math.min((F=u.current.getBoundingClientRect().width)!=null?F:0,window.innerWidth),Z=c==="left"||c==="right";if(Math.abs(b)>=(Z?Y:k)*S){ie(),i==null||i(l,!1);return}i==null||i(l,!0),_e()}r.useEffect(()=>(B&&($(document.documentElement,{scrollBehavior:"auto"}),fe.current=new Date),()=>{en(document.documentElement,"scrollBehavior")}),[B]);function yt(l){const b=l?(window.innerWidth-ve)/window.innerWidth:1,T=l?-16:0;Se.current&&window.clearTimeout(Se.current),$(u.current,{transition:`transform ${O.DURATION}s cubic-bezier(${O.EASE.join(",")})`,transform:`scale(${b}) translate3d(0, ${T}px, 0)`}),!l&&u.current&&(Se.current=setTimeout(()=>{const E=ge(u.current,c);$(u.current,{transition:"none",transform:N(c)?`translate3d(0, ${E}px, 0)`:`translate3d(${E}px, 0, 0)`})},500))}function bt(l,b){if(b<0)return;const T=(window.innerWidth-ve)/window.innerWidth,E=T+b*(1-T),x=-16+b*ve;$(u.current,{transform:N(c)?`scale(${E}) translate3d(0, ${x}px, 0)`:`scale(${E}) translate3d(${x}px, 0, 0)`,transition:"none"})}function xt(l,b){const T=N(c)?window.innerHeight:window.innerWidth,E=b?(T-ve)/T:1,x=b?-16:0;b&&$(u.current,{transition:`transform ${O.DURATION}s cubic-bezier(${O.EASE.join(",")})`,transform:N(c)?`scale(${E}) translate3d(0, ${x}px, 0)`:`scale(${E}) translate3d(${x}px, 0, 0)`})}return r.createElement(At,{defaultOpen:A,onOpenChange:l=>{!v&&!l||(l?Q(!0):ie(!0),K(l))},open:B},r.createElement(Ve.Provider,{value:{activeSnapPoint:ct,snapPoints:o,setActiveSnapPoint:ke,drawerRef:u,overlayRef:ee,onOpenChange:n,onPress:ht,onRelease:vt,onDrag:wt,dismissible:v,handleOnly:h,isOpen:B,isDragging:ne,shouldFade:He,closeDrawer:ie,onNestedDrag:bt,onNestedOpenChange:yt,onNestedRelease:xt,keyboardIsOpen:te,modal:W,snapPointsOffset:oe,direction:c,shouldScaleBackground:g,setBackgroundColorOnScale:p,noBodyStyles:M,container:s,autoFocus:j}},t))}const et=r.forwardRef(function({...e},n){const{overlayRef:t,snapPoints:a,onRelease:i,shouldFade:o,isOpen:g,modal:p}=de(),S=Xe(n,t),D=a&&a.length>0;return p?r.createElement(Ht,{onMouseUp:i,ref:S,"data-vaul-overlay":"","data-vaul-snap-points":g&&D?"true":"false","data-vaul-snap-points-overlay":g&&o?"true":"false",...e}):(typeof window<"u"&&window.requestAnimationFrame(()=>{document.body.style.pointerEvents="auto"}),null)});et.displayName="Drawer.Overlay";const tt=r.forwardRef(function({onPointerDownOutside:e,style:n,onOpenAutoFocus:t,...a},i){const{drawerRef:o,onPress:g,onRelease:p,onDrag:S,keyboardIsOpen:D,snapPointsOffset:v,modal:h,isOpen:w,direction:H,snapPoints:U,container:C,handleOnly:W,autoFocus:f}=de(),[L,M]=r.useState(!1),c=Xe(i,o),A=r.useRef(null),X=r.useRef(null),d=r.useRef(!1),R=U&&U.length>0;un();const y=(s,j,P=0)=>{if(d.current)return!0;const _=Math.abs(s.y),B=Math.abs(s.x),K=B>_,z=["bottom","right"].includes(j)?1:-1;if(j==="left"||j==="right"){if(!(s.x*z<0)&&B>=0&&B<=P)return K}else if(!(s.y*z<0)&&_>=0&&_<=P)return!K;return d.current=!0,!0};r.useEffect(()=>{R&&window.requestAnimationFrame(()=>{M(!0)})},[]);function I(s){A.current=null,d.current=!1,p(s)}return r.createElement(kt,{"data-vaul-drawer-direction":H,"data-vaul-drawer":"","data-vaul-delayed-snap-points":L?"true":"false","data-vaul-snap-points":w&&R?"true":"false","data-vaul-custom-container":C?"true":"false",...a,ref:c,style:v&&v.length>0?{"--snap-point-height":`${v[0]}px`,...n}:n,onPointerDown:s=>{W||(a.onPointerDown==null||a.onPointerDown.call(a,s),A.current={x:s.pageX,y:s.pageY},g(s))},onOpenAutoFocus:s=>{t==null||t(s),f||s.preventDefault()},onPointerDownOutside:s=>{if(e==null||e(s),!h||s.defaultPrevented){s.preventDefault();return}D.current&&(D.current=!1)},onFocusOutside:s=>{if(!h){s.preventDefault();return}},onPointerMove:s=>{if(X.current=s,W||(a.onPointerMove==null||a.onPointerMove.call(a,s),!A.current))return;const j=s.pageY-A.current.y,P=s.pageX-A.current.x,_=s.pointerType==="touch"?10:2;y({x:P,y:j},H,_)?S(s):(Math.abs(P)>_||Math.abs(j)>_)&&(A.current=null)},onPointerUp:s=>{a.onPointerUp==null||a.onPointerUp.call(a,s),A.current=null,d.current=!1,p(s)},onPointerOut:s=>{a.onPointerOut==null||a.onPointerOut.call(a,s),I(X.current)},onContextMenu:s=>{a.onContextMenu==null||a.onContextMenu.call(a,s),I(X.current)}})});tt.displayName="Drawer.Content";const fn=250,mn=120,pn=r.forwardRef(function({preventCycle:e=!1,children:n,...t},a){const{closeDrawer:i,isDragging:o,snapPoints:g,activeSnapPoint:p,setActiveSnapPoint:S,dismissible:D,handleOnly:v,isOpen:h,onPress:w,onDrag:H}=de(),U=r.useRef(null),C=r.useRef(!1);function W(){if(C.current){M();return}window.setTimeout(()=>{f()},mn)}function f(){if(o||e||C.current){M();return}if(M(),(!g||g.length===0)&&D){i();return}if(p===g[g.length-1]&&D){i();return}const A=g.findIndex(d=>d===p);if(A===-1)return;const X=g[A+1];S(X)}function L(){U.current=window.setTimeout(()=>{C.current=!0},fn)}function M(){window.clearTimeout(U.current),C.current=!1}return r.createElement("div",{onClick:W,onPointerCancel:M,onPointerDown:c=>{v&&w(c),L()},onPointerMove:c=>{v&&H(c)},ref:a,"data-vaul-drawer-visible":h?"true":"false","data-vaul-handle":"","aria-hidden":"true",...t},r.createElement("span",{"data-vaul-handle-hitarea":"","aria-hidden":"true"},n))});pn.displayName="Drawer.Handle";function hn(e){const n=de(),{container:t=n.container,...a}=e;return r.createElement(It,{container:t,...a})}const G={Root:dn,Content:tt,Overlay:et,Portal:hn,Title:Pt,Description:jt},nt=({shouldScaleBackground:e=!0,...n})=>m.jsx(G.Root,{shouldScaleBackground:e,...n});nt.displayName="Drawer";const wn=G.Portal,rt=r.forwardRef(({className:e,...n},t)=>m.jsx(G.Overlay,{ref:t,className:ce("fixed inset-0 z-50 bg-black/80",e),...n}));rt.displayName=G.Overlay.displayName;const at=r.forwardRef(({className:e,children:n,fullScreen:t,...a},i)=>m.jsxs(wn,{children:[t?null:m.jsx(rt,{}),m.jsxs(G.Content,{ref:i,className:ce("fixed inset-x-0 bottom-0 z-50 mt-24 flex h-auto flex-col rounded-t-[10px] border bg-background",e),...a,children:[m.jsx("div",{className:"mx-auto mt-4 h-2 w-[100px] rounded-full bg-muted"}),n]})]}));at.displayName="DrawerContent";const ot=({className:e,...n})=>m.jsx("div",{className:ce("grid gap-1.5 p-4 text-center sm:text-left",e),...n});ot.displayName="DrawerHeader";const it=r.forwardRef(({className:e,...n},t)=>m.jsx(G.Title,{ref:t,className:ce("text-lg font-semibold leading-none tracking-tight",e),...n}));it.displayName=G.Title.displayName;const st=r.forwardRef(({className:e,...n},t)=>m.jsx(G.Description,{ref:t,className:ce("text-sm text-muted-foreground",e),...n}));st.displayName=G.Description.displayName;const gn=()=>{const e=ue.useCallback(()=>m.jsx("iframe",{src:"https://ghbtns.com/github-btn.html?user=chartdb&repo=chartdb&type=star&size=small&text=false",width:"25",height:"20",title:"GitHub"}),[]),{toggleSidebar:n}=St();return m.jsxs("nav",{className:"flex flex-col justify-between border-b px-3 md:h-12 md:flex-row md:items-center md:px-4",children:[m.jsxs("div",{className:"flex flex-1 flex-col justify-between gap-x-1 md:flex-row md:justify-normal",children:[m.jsxs("div",{className:"flex items-center justify-between pt-[8px] font-primary md:py-[10px]",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx(_t,{size:"icon",variant:"ghost",onClick:n,children:m.jsx(zt,{className:"size-5"})}),m.jsx("a",{href:"https://chartdb.io",className:"cursor-pointer",rel:"noreferrer",children:m.jsx("img",{src:Lt,alt:"chartDB",className:"h-4 max-w-fit"})})]}),m.jsxs("div",{className:"flex items-center gap-2",children:[e(),m.jsx(Rt,{})]})]}),m.jsx(Tt,{})]}),m.jsx("div",{className:"flex flex-1 justify-center pb-2 pt-1",children:m.jsx(Dt,{})})]})},Mn=({initialDiagram:e})=>{const{isSidePanelShowed:n,hideSidePanel:t}=Mt();return m.jsx(m.Fragment,{children:m.jsxs(Et,{defaultOpen:!1,open:!1,className:"flex-col",children:[m.jsx(Ot,{}),m.jsx(gn,{}),m.jsx(nt,{open:n,onClose:()=>t(),children:m.jsxs(at,{className:"h-full",fullScreen:!0,children:[m.jsxs(ot,{children:[m.jsx(it,{children:"Manage Diagram"}),m.jsx(st,{children:"Manage your diagram objects"})]}),m.jsx($t,{orientation:"horizontal"}),m.jsx(Ct,{"data-vaul-no-drag":!0})]})}),m.jsx(Nt,{initialTables:(e==null?void 0:e.tables)??[]})]})})};export{Mn as EditorMobileLayout,Mn as default};
