import{r as h,F as Yd,G as Wd,I as Gd,h as B,j as g,m as ii,t as An,R as Ce,w as ke,J as Ud,y as fe,z as We,x as Mo,K as Kd,k as Xe,L as No,g as qd,M as Zd,N as Qd,v as To,s as Jd,q as ef,B as tf,O as nf,Q as rf,U as of,V as sf,W as af,X as cf,Y as uf,Z as lf,$ as df,b as _e,T as sn,e as an,f as cn,P as Er,A as ff}from"./index-D22tuFcn.js";import{e as hf,a as be,u as mf}from"./theme-provider-qAUrzat1.js";import{r as ko,m as pf,v as gf}from"./databases-C9KYyYJn.js";import{D as ce}from"./database-type-C2NNW5SW.js";import{u as yf,d as xf,a as ma,e as vf,z as ie,s as Rt}from"./use-storage-CGFXC_qQ.js";import{P as Se,d as pa,B as hn,L as nn}from"./label-DEegoE4u.js";const wf=(e,t,n,r)=>{var i,s,a,c;const o=[n,{code:t,...r||{}}];if((s=(i=e==null?void 0:e.services)==null?void 0:i.logger)!=null&&s.forward)return e.services.logger.forward(o,"warn","react-i18next::",!0);xt(o[0])&&(o[0]=`react-i18next:: ${o[0]}`),(c=(a=e==null?void 0:e.services)==null?void 0:a.logger)!=null&&c.warn?e.services.logger.warn(...o):console!=null&&console.warn&&console.warn(...o)},Fi={},Ao=(e,t,n,r)=>{xt(n)&&Fi[n]||(xt(n)&&(Fi[n]=new Date),wf(e,t,n,r))},ga=(e,t)=>()=>{if(e.isInitialized)t();else{const n=()=>{setTimeout(()=>{e.off("initialized",n)},0),t()};e.on("initialized",n)}},Ro=(e,t,n)=>{e.loadNamespaces(t,ga(e,n))},Hi=(e,t,n,r)=>{if(xt(n)&&(n=[n]),e.options.preload&&e.options.preload.indexOf(t)>-1)return Ro(e,n,r);n.forEach(o=>{e.options.ns.indexOf(o)<0&&e.options.ns.push(o)}),e.loadLanguages(t,ga(e,r))},bf=(e,t,n={})=>!t.languages||!t.languages.length?(Ao(t,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:t.languages}),!0):t.hasLoadedNamespace(e,{lng:n.lng,precheck:(r,o)=>{var i;if(((i=n.bindI18n)==null?void 0:i.indexOf("languageChanging"))>-1&&r.services.backendConnector.backend&&r.isLanguageChangingTo&&!o(r.isLanguageChangingTo,e))return!1}}),xt=e=>typeof e=="string",Cf=e=>typeof e=="object"&&e!==null,_f=h.createContext();class Ef{constructor(){this.usedNamespaces={}}addUsedNamespaces(t){t.forEach(n=>{this.usedNamespaces[n]||(this.usedNamespaces[n]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}const Sf=(e,t)=>{const n=h.useRef();return h.useEffect(()=>{n.current=e},[e,t]),n.current},ya=(e,t,n,r)=>e.getFixedT(t,n,r),Mf=(e,t,n,r)=>h.useCallback(ya(e,t,n,r),[e,t,n,r]),xa=(e,t={})=>{var x,N,L,M;const{i18n:n}=t,{i18n:r,defaultNS:o}=h.useContext(_f)||{},i=n||r||Yd();if(i&&!i.reportNamespaces&&(i.reportNamespaces=new Ef),!i){Ao(i,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const T=(I,$)=>xt($)?$:Cf($)&&xt($.defaultValue)?$.defaultValue:Array.isArray(I)?I[I.length-1]:I,A=[T,{},!1];return A.t=T,A.i18n={},A.ready=!1,A}(x=i.options.react)!=null&&x.wait&&Ao(i,"DEPRECATED_OPTION","useTranslation: It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const s={...Wd(),...i.options.react,...t},{useSuspense:a,keyPrefix:c}=s;let u=o||((N=i.options)==null?void 0:N.defaultNS);u=xt(u)?[u]:u||["translation"],(M=(L=i.reportNamespaces).addUsedNamespaces)==null||M.call(L,u);const d=(i.isInitialized||i.initializedStoreOnce)&&u.every(T=>bf(T,i,s)),l=Mf(i,t.lng||null,s.nsMode==="fallback"?u:u[0],c),f=()=>l,m=()=>ya(i,t.lng||null,s.nsMode==="fallback"?u:u[0],c),[p,y]=h.useState(f);let w=u.join();t.lng&&(w=`${t.lng}${w}`);const v=Sf(w),_=h.useRef(!0);h.useEffect(()=>{const{bindI18n:T,bindI18nStore:A}=s;_.current=!0,!d&&!a&&(t.lng?Hi(i,t.lng,u,()=>{_.current&&y(m)}):Ro(i,u,()=>{_.current&&y(m)})),d&&v&&v!==w&&_.current&&y(m);const I=()=>{_.current&&y(m)};return T&&(i==null||i.on(T,I)),A&&(i==null||i.store.on(A,I)),()=>{_.current=!1,i&&(T==null||T.split(" ").forEach($=>i.off($,I))),A&&i&&A.split(" ").forEach($=>i.store.off($,I))}},[i,w]),h.useEffect(()=>{_.current&&d&&y(f)},[i,c,d]);const b=[p,i,d];if(b.t=p,b.i18n=i,b.ready=d,d||!d&&!a)return b;throw new Promise(T=>{t.lng?Hi(i,t.lng,u,()=>T()):Ro(i,u,()=>T())})};var va={},Do=function(e,t){return Do=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])},Do(e,t)};function wa(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Do(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var Re=function(){return Re=Object.assign||function(t){for(var n,r=1,o=arguments.length;r<o;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Re.apply(this,arguments)};function Sr(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n}function ba(e,t,n,r){var o=arguments.length,i=o<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(i=(o<3?s(i):o>3?s(t,n,i):s(t,n))||i);return o>3&&i&&Object.defineProperty(t,n,i),i}function Ca(e,t){return function(n,r){t(n,r,e)}}function _a(e,t,n,r,o,i){function s(v){if(v!==void 0&&typeof v!="function")throw new TypeError("Function expected");return v}for(var a=r.kind,c=a==="getter"?"get":a==="setter"?"set":"value",u=!t&&e?r.static?e:e.prototype:null,d=t||(u?Object.getOwnPropertyDescriptor(u,r.name):{}),l,f=!1,m=n.length-1;m>=0;m--){var p={};for(var y in r)p[y]=y==="access"?{}:r[y];for(var y in r.access)p.access[y]=r.access[y];p.addInitializer=function(v){if(f)throw new TypeError("Cannot add initializers after decoration has completed");i.push(s(v||null))};var w=(0,n[m])(a==="accessor"?{get:d.get,set:d.set}:d[c],p);if(a==="accessor"){if(w===void 0)continue;if(w===null||typeof w!="object")throw new TypeError("Object expected");(l=s(w.get))&&(d.get=l),(l=s(w.set))&&(d.set=l),(l=s(w.init))&&o.unshift(l)}else(l=s(w))&&(a==="field"?o.unshift(l):d[c]=l)}u&&Object.defineProperty(u,r.name,d),f=!0}function Ea(e,t,n){for(var r=arguments.length>2,o=0;o<t.length;o++)n=r?t[o].call(e,n):t[o].call(e);return r?n:void 0}function Sa(e){return typeof e=="symbol"?e:"".concat(e)}function Ma(e,t,n){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:n?"".concat(n," ",t):t})}function Na(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}function Ta(e,t,n,r){function o(i){return i instanceof n?i:new n(function(s){s(i)})}return new(n||(n=Promise))(function(i,s){function a(d){try{u(r.next(d))}catch(l){s(l)}}function c(d){try{u(r.throw(d))}catch(l){s(l)}}function u(d){d.done?i(d.value):o(d.value).then(a,c)}u((r=r.apply(e,t||[])).next())})}function ka(e,t){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,o,i,s=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return s.next=a(0),s.throw=a(1),s.return=a(2),typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(u){return function(d){return c([u,d])}}function c(u){if(r)throw new TypeError("Generator is already executing.");for(;s&&(s=0,u[0]&&(n=0)),n;)try{if(r=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return n.label++,{value:u[1],done:!1};case 5:n.label++,o=u[1],u=[0];continue;case 7:u=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){n=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){n.label=u[1];break}if(u[0]===6&&n.label<i[1]){n.label=i[1],i=u;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(u);break}i[2]&&n.ops.pop(),n.trys.pop();continue}u=t.call(e,n)}catch(d){u=[6,d],o=0}finally{r=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}var Mr=Object.create?function(e,t,n,r){r===void 0&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]};function Aa(e,t){for(var n in e)n!=="default"&&!Object.prototype.hasOwnProperty.call(t,n)&&Mr(t,e,n)}function yn(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function si(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),o,i=[],s;try{for(;(t===void 0||t-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(a){s={error:a}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return i}function Ra(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(si(arguments[t]));return e}function Da(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var r=Array(e),o=0,t=0;t<n;t++)for(var i=arguments[t],s=0,a=i.length;s<a;s++,o++)r[o]=i[s];return r}function ai(e,t,n){if(n||arguments.length===2)for(var r=0,o=t.length,i;r<o;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))}function jt(e){return this instanceof jt?(this.v=e,this):new jt(e)}function Ia(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),o,i=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),o[Symbol.asyncIterator]=function(){return this},o;function s(m){return function(p){return Promise.resolve(p).then(m,l)}}function a(m,p){r[m]&&(o[m]=function(y){return new Promise(function(w,v){i.push([m,y,w,v])>1||c(m,y)})},p&&(o[m]=p(o[m])))}function c(m,p){try{u(r[m](p))}catch(y){f(i[0][3],y)}}function u(m){m.value instanceof jt?Promise.resolve(m.value.v).then(d,l):f(i[0][2],m)}function d(m){c("next",m)}function l(m){c("throw",m)}function f(m,p){m(p),i.shift(),i.length&&c(i[0][0],i[0][1])}}function Pa(e){var t,n;return t={},r("next"),r("throw",function(o){throw o}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(o,i){t[o]=e[o]?function(s){return(n=!n)?{value:jt(e[o](s)),done:!1}:i?i(s):s}:i}}function La(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof yn=="function"?yn(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=e[i]&&function(s){return new Promise(function(a,c){s=e[i](s),o(a,c,s.done,s.value)})}}function o(i,s,a,c){Promise.resolve(c).then(function(u){i({value:u,done:a})},s)}}function ja(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var Nf=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t},Io=function(e){return Io=Object.getOwnPropertyNames||function(t){var n=[];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[n.length]=r);return n},Io(e)};function $a(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n=Io(e),r=0;r<n.length;r++)n[r]!=="default"&&Mr(t,e,n[r]);return Nf(t,e),t}function Oa(e){return e&&e.__esModule?e:{default:e}}function Fa(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)}function Ha(e,t,n,r,o){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?o.call(e,n):o?o.value=n:t.set(e,n),n}function za(e,t){if(t===null||typeof t!="object"&&typeof t!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof e=="function"?t===e:e.has(t)}function Ba(e,t,n){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var r,o;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=t[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=t[Symbol.dispose],n&&(o=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");o&&(r=function(){try{o.call(this)}catch(i){return Promise.reject(i)}}),e.stack.push({value:t,dispose:r,async:n})}else n&&e.stack.push({async:!0});return t}var Tf=typeof SuppressedError=="function"?SuppressedError:function(e,t,n){var r=new Error(n);return r.name="SuppressedError",r.error=e,r.suppressed=t,r};function Va(e){function t(i){e.error=e.hasError?new Tf(i,e.error,"An error was suppressed during disposal."):i,e.hasError=!0}var n,r=0;function o(){for(;n=e.stack.pop();)try{if(!n.async&&r===1)return r=0,e.stack.push(n),Promise.resolve().then(o);if(n.dispose){var i=n.dispose.call(n.value);if(n.async)return r|=2,Promise.resolve(i).then(o,function(s){return t(s),o()})}else r|=1}catch(s){t(s)}if(r===1)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}return o()}function Xa(e,t){return typeof e=="string"&&/^\.\.?\//.test(e)?e.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(n,r,o,i,s){return r?t?".jsx":".js":o&&(!i||!s)?n:o+i+"."+s.toLowerCase()+"js"}):e}const kf={__extends:wa,__assign:Re,__rest:Sr,__decorate:ba,__param:Ca,__esDecorate:_a,__runInitializers:Ea,__propKey:Sa,__setFunctionName:Ma,__metadata:Na,__awaiter:Ta,__generator:ka,__createBinding:Mr,__exportStar:Aa,__values:yn,__read:si,__spread:Ra,__spreadArrays:Da,__spreadArray:ai,__await:jt,__asyncGenerator:Ia,__asyncDelegator:Pa,__asyncValues:La,__makeTemplateObject:ja,__importStar:$a,__importDefault:Oa,__classPrivateFieldGet:Fa,__classPrivateFieldSet:Ha,__classPrivateFieldIn:za,__addDisposableResource:Ba,__disposeResources:Va,__rewriteRelativeImportExtension:Xa},Af=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:Ba,get __assign(){return Re},__asyncDelegator:Pa,__asyncGenerator:Ia,__asyncValues:La,__await:jt,__awaiter:Ta,__classPrivateFieldGet:Fa,__classPrivateFieldIn:za,__classPrivateFieldSet:Ha,__createBinding:Mr,__decorate:ba,__disposeResources:Va,__esDecorate:_a,__exportStar:Aa,__extends:wa,__generator:ka,__importDefault:Oa,__importStar:$a,__makeTemplateObject:ja,__metadata:Na,__param:Ca,__propKey:Sa,__read:si,__rest:Sr,__rewriteRelativeImportExtension:Xa,__runInitializers:Ea,__setFunctionName:Ma,__spread:Ra,__spreadArray:ai,__spreadArrays:Da,__values:yn,default:kf},Symbol.toStringTag,{value:"Module"})),Rf=Gd(Af);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.EventEmitter=void 0,e.default=o;var t=Rf,n=h,r=e.EventEmitter=function(){function i(){var s=this;this.subscriptions=new Set,this.emit=function(a){var c,u;try{for(var d=(0,t.__values)(s.subscriptions),l=d.next();!l.done;l=d.next()){var f=l.value;f(a)}}catch(m){c={error:m}}finally{try{l&&!l.done&&(u=d.return)&&u.call(d)}finally{if(c)throw c.error}}},this.useSubscription=function(a){var c=(0,n.useRef)();c.current=a,(0,n.useEffect)(function(){function u(d){c.current&&c.current(d)}return s.subscriptions.add(u),function(){s.subscriptions.delete(u)}},[])}}return i}();function o(){var i=(0,n.useRef)();return i.current||(i.current=new r),i.current}})(va);const Ya=h.createContext({databaseType:ce.GENERIC,diagramName:"",diagramId:"",tables:[],relationships:[],dependencies:[],areas:[],schemas:[],filteredSchemas:[],filterSchemas:B,currentDiagram:{id:"",name:"",databaseType:ce.GENERIC,createdAt:new Date,updatedAt:new Date},events:new va.EventEmitter,updateDiagramId:B,updateDiagramName:B,updateDiagramUpdatedAt:B,loadDiagram:B,loadDiagramFromData:B,clearDiagramData:B,deleteDiagram:B,updateDatabaseType:B,updateDatabaseEdition:B,createTable:B,getTable:B,addTable:B,addTables:B,removeTable:B,removeTables:B,updateTable:B,updateTablesState:B,updateField:B,removeField:B,createField:B,addField:B,getField:B,createIndex:B,addIndex:B,getIndex:B,removeIndex:B,updateIndex:B,createRelationship:B,addRelationship:B,getRelationship:B,removeRelationship:B,updateRelationship:B,removeRelationships:B,addRelationships:B,createDependency:B,addDependency:B,getDependency:B,removeDependency:B,removeDependencies:B,addDependencies:B,updateDependency:B,createArea:B,addArea:B,addAreas:B,getArea:B,removeArea:B,removeAreas:B,updateArea:B}),Nr=()=>h.useContext(Ya),Df=h.createContext({openCreateDiagramDialog:B,closeCreateDiagramDialog:B,openOpenDiagramDialog:B,closeOpenDiagramDialog:B,openExportSQLDialog:B,closeExportSQLDialog:B,closeCreateRelationshipDialog:B,openCreateRelationshipDialog:B,openImportDatabaseDialog:B,closeImportDatabaseDialog:B,openTableSchemaDialog:B,closeTableSchemaDialog:B,openStarUsDialog:B,closeStarUsDialog:B,openExportImageDialog:B,closeExportImageDialog:B,openExportDiagramDialog:B,closeExportDiagramDialog:B,openImportDiagramDialog:B,closeImportDiagramDialog:B,openImportDBMLDialog:B,closeImportDBMLDialog:B}),If=()=>h.useContext(Df);function He(e,t){if(e==null)return{};var n={},r=Object.keys(e),o,i;for(i=0;i<r.length;i++)o=r[i],!(t.indexOf(o)>=0)&&(n[o]=e[o]);return n}var Pf=["color"],e2=h.forwardRef(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,o=He(e,Pf);return h.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:t}),h.createElement("path",{d:"M4.93179 5.43179C4.75605 5.60753 4.75605 5.89245 4.93179 6.06819C5.10753 6.24392 5.39245 6.24392 5.56819 6.06819L7.49999 4.13638L9.43179 6.06819C9.60753 6.24392 9.89245 6.24392 10.0682 6.06819C10.2439 5.89245 10.2439 5.60753 10.0682 5.43179L7.81819 3.18179C7.73379 3.0974 7.61933 3.04999 7.49999 3.04999C7.38064 3.04999 7.26618 3.0974 7.18179 3.18179L4.93179 5.43179ZM10.0682 9.56819C10.2439 9.39245 10.2439 9.10753 10.0682 8.93179C9.89245 8.75606 9.60753 8.75606 9.43179 8.93179L7.49999 10.8636L5.56819 8.93179C5.39245 8.75606 5.10753 8.75606 4.93179 8.93179C4.75605 9.10753 4.75605 9.39245 4.93179 9.56819L7.18179 11.8182C7.35753 11.9939 7.64245 11.9939 7.81819 11.8182L10.0682 9.56819Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),Lf=["color"],jf=h.forwardRef(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,o=He(e,Lf);return h.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:t}),h.createElement("path",{d:"M11.4669 3.72684C11.7558 3.91574 11.8369 4.30308 11.648 4.59198L7.39799 11.092C7.29783 11.2452 7.13556 11.3467 6.95402 11.3699C6.77247 11.3931 6.58989 11.3355 6.45446 11.2124L3.70446 8.71241C3.44905 8.48022 3.43023 8.08494 3.66242 7.82953C3.89461 7.57412 4.28989 7.55529 4.5453 7.78749L6.75292 9.79441L10.6018 3.90792C10.7907 3.61902 11.178 3.53795 11.4669 3.72684Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),$f=["color"],t2=h.forwardRef(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,o=He(e,$f);return h.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:t}),h.createElement("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),Of=["color"],Ff=h.forwardRef(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,o=He(e,Of);return h.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:t}),h.createElement("path",{d:"M6.1584 3.13508C6.35985 2.94621 6.67627 2.95642 6.86514 3.15788L10.6151 7.15788C10.7954 7.3502 10.7954 7.64949 10.6151 7.84182L6.86514 11.8418C6.67627 12.0433 6.35985 12.0535 6.1584 11.8646C5.95694 11.6757 5.94673 11.3593 6.1356 11.1579L9.565 7.49985L6.1356 3.84182C5.94673 3.64036 5.95694 3.32394 6.1584 3.13508Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),Hf=["color"],n2=h.forwardRef(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,o=He(e,Hf);return h.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:t}),h.createElement("path",{d:"M3.13523 8.84197C3.3241 9.04343 3.64052 9.05363 3.84197 8.86477L7.5 5.43536L11.158 8.86477C11.3595 9.05363 11.6759 9.04343 11.8648 8.84197C12.0536 8.64051 12.0434 8.32409 11.842 8.13523L7.84197 4.38523C7.64964 4.20492 7.35036 4.20492 7.15803 4.38523L3.15803 8.13523C2.95657 8.32409 2.94637 8.64051 3.13523 8.84197Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),zf=["color"],r2=h.forwardRef(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,o=He(e,zf);return h.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:t}),h.createElement("path",{d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),Bf=["color"],o2=h.forwardRef(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,o=He(e,Bf);return h.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:t}),h.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.07451 1.82584C5.03267 1.81926 4.99014 1.81825 4.94803 1.82284C4.10683 1.91446 2.82673 2.36828 2.07115 2.77808C2.02106 2.80525 1.97621 2.84112 1.93869 2.88402C1.62502 3.24266 1.34046 3.82836 1.11706 4.38186C0.887447 4.95076 0.697293 5.55032 0.588937 5.98354C0.236232 7.39369 0.042502 9.08728 0.0174948 10.6925C0.0162429 10.7729 0.0351883 10.8523 0.0725931 10.9234C0.373679 11.496 1.02015 12.027 1.66809 12.4152C2.32332 12.8078 3.08732 13.1182 3.70385 13.1778C3.85335 13.1922 4.00098 13.1358 4.10282 13.0255C4.2572 12.8581 4.5193 12.4676 4.71745 12.1643C4.80739 12.0267 4.89157 11.8953 4.95845 11.7901C5.62023 11.9106 6.45043 11.9801 7.50002 11.9801C8.54844 11.9801 9.37796 11.9107 10.0394 11.7905C10.1062 11.8957 10.1903 12.0269 10.2801 12.1643C10.4783 12.4676 10.7404 12.8581 10.8947 13.0255C10.9966 13.1358 11.1442 13.1922 11.2937 13.1778C11.9102 13.1182 12.6742 12.8078 13.3295 12.4152C13.9774 12.027 14.6239 11.496 14.925 10.9234C14.9624 10.8523 14.9813 10.7729 14.9801 10.6925C14.9551 9.08728 14.7613 7.39369 14.4086 5.98354C14.3003 5.55032 14.1101 4.95076 13.8805 4.38186C13.6571 3.82836 13.3725 3.24266 13.0589 2.88402C13.0214 2.84112 12.9765 2.80525 12.9264 2.77808C12.1708 2.36828 10.8907 1.91446 10.0495 1.82284C10.0074 1.81825 9.96489 1.81926 9.92305 1.82584C9.71676 1.85825 9.5391 1.96458 9.40809 2.06355C9.26977 2.16804 9.1413 2.29668 9.0304 2.42682C8.86968 2.61544 8.71437 2.84488 8.61428 3.06225C8.27237 3.03501 7.90138 3.02 7.5 3.02C7.0977 3.02 6.72593 3.03508 6.38337 3.06244C6.28328 2.84501 6.12792 2.61549 5.96716 2.42682C5.85626 2.29668 5.72778 2.16804 5.58947 2.06355C5.45846 1.96458 5.2808 1.85825 5.07451 1.82584ZM11.0181 11.5382C11.0395 11.5713 11.0615 11.6051 11.0838 11.6392C11.2169 11.843 11.3487 12.0385 11.4508 12.1809C11.8475 12.0916 12.352 11.8818 12.8361 11.5917C13.3795 11.2661 13.8098 10.8918 14.0177 10.5739C13.9852 9.06758 13.7993 7.50369 13.4773 6.21648C13.38 5.82759 13.2038 5.27021 12.9903 4.74117C12.7893 4.24326 12.5753 3.82162 12.388 3.5792C11.7376 3.24219 10.7129 2.88582 10.0454 2.78987C10.0308 2.79839 10.0113 2.81102 9.98675 2.82955C9.91863 2.881 9.84018 2.95666 9.76111 3.04945C9.71959 3.09817 9.68166 3.1471 9.64768 3.19449C9.953 3.25031 10.2253 3.3171 10.4662 3.39123C11.1499 3.6016 11.6428 3.89039 11.884 4.212C12.0431 4.42408 12.0001 4.72494 11.788 4.884C11.5759 5.04306 11.2751 5.00008 11.116 4.788C11.0572 4.70961 10.8001 4.4984 10.1838 4.30877C9.58933 4.12585 8.71356 3.98 7.5 3.98C6.28644 3.98 5.41067 4.12585 4.81616 4.30877C4.19988 4.4984 3.94279 4.70961 3.884 4.788C3.72494 5.00008 3.42408 5.04306 3.212 4.884C2.99992 4.72494 2.95694 4.42408 3.116 4.212C3.35721 3.89039 3.85011 3.6016 4.53383 3.39123C4.77418 3.31727 5.04571 3.25062 5.35016 3.19488C5.31611 3.14738 5.27808 3.09831 5.23645 3.04945C5.15738 2.95666 5.07893 2.881 5.01081 2.82955C4.98628 2.81102 4.96674 2.79839 4.95217 2.78987C4.28464 2.88582 3.25999 3.24219 2.60954 3.5792C2.42226 3.82162 2.20825 4.24326 2.00729 4.74117C1.79376 5.27021 1.61752 5.82759 1.52025 6.21648C1.19829 7.50369 1.01236 9.06758 0.97986 10.5739C1.18772 10.8918 1.61807 11.2661 2.16148 11.5917C2.64557 11.8818 3.15003 12.0916 3.5468 12.1809C3.64885 12.0385 3.78065 11.843 3.9138 11.6392C3.93626 11.6048 3.95838 11.5708 3.97996 11.5375C3.19521 11.2591 2.77361 10.8758 2.50064 10.4664C2.35359 10.2458 2.4132 9.94778 2.63377 9.80074C2.85435 9.65369 3.15236 9.71329 3.29941 9.93387C3.56077 10.3259 4.24355 11.0201 7.50002 11.0201C10.7565 11.0201 11.4392 10.326 11.7006 9.93386C11.8477 9.71329 12.1457 9.65369 12.3663 9.80074C12.5869 9.94779 12.6465 10.2458 12.4994 10.4664C12.2262 10.8762 11.8041 11.2598 11.0181 11.5382ZM4.08049 7.01221C4.32412 6.74984 4.65476 6.60162 5.00007 6.59998C5.34538 6.60162 5.67603 6.74984 5.91966 7.01221C6.16329 7.27459 6.30007 7.62974 6.30007 7.99998C6.30007 8.37021 6.16329 8.72536 5.91966 8.98774C5.67603 9.25011 5.34538 9.39833 5.00007 9.39998C4.65476 9.39833 4.32412 9.25011 4.08049 8.98774C3.83685 8.72536 3.70007 8.37021 3.70007 7.99998C3.70007 7.62974 3.83685 7.27459 4.08049 7.01221ZM9.99885 6.59998C9.65354 6.60162 9.3229 6.74984 9.07926 7.01221C8.83563 7.27459 8.69885 7.62974 8.69885 7.99998C8.69885 8.37021 8.83563 8.72536 9.07926 8.98774C9.3229 9.25011 9.65354 9.39833 9.99885 9.39998C10.3442 9.39833 10.6748 9.25011 10.9184 8.98774C11.1621 8.72536 11.2989 8.37021 11.2989 7.99998C11.2989 7.62974 11.1621 7.27459 10.9184 7.01221C10.6748 6.74984 10.3442 6.60162 9.99885 6.59998Z",fill:r}))}),Vf=["color"],Xf=h.forwardRef(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,o=He(e,Vf);return h.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:t}),h.createElement("path",{d:"M9.875 7.5C9.875 8.81168 8.81168 9.875 7.5 9.875C6.18832 9.875 5.125 8.81168 5.125 7.5C5.125 6.18832 6.18832 5.125 7.5 5.125C8.81168 5.125 9.875 6.18832 9.875 7.5Z",fill:r}))}),Yf=["color"],i2=h.forwardRef(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,o=He(e,Yf);return h.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:t}),h.createElement("path",{d:"M5.5 4.625C6.12132 4.625 6.625 4.12132 6.625 3.5C6.625 2.87868 6.12132 2.375 5.5 2.375C4.87868 2.375 4.375 2.87868 4.375 3.5C4.375 4.12132 4.87868 4.625 5.5 4.625ZM9.5 4.625C10.1213 4.625 10.625 4.12132 10.625 3.5C10.625 2.87868 10.1213 2.375 9.5 2.375C8.87868 2.375 8.375 2.87868 8.375 3.5C8.375 4.12132 8.87868 4.625 9.5 4.625ZM10.625 7.5C10.625 8.12132 10.1213 8.625 9.5 8.625C8.87868 8.625 8.375 8.12132 8.375 7.5C8.375 6.87868 8.87868 6.375 9.5 6.375C10.1213 6.375 10.625 6.87868 10.625 7.5ZM5.5 8.625C6.12132 8.625 6.625 8.12132 6.625 7.5C6.625 6.87868 6.12132 6.375 5.5 6.375C4.87868 6.375 4.375 6.87868 4.375 7.5C4.375 8.12132 4.87868 8.625 5.5 8.625ZM10.625 11.5C10.625 12.1213 10.1213 12.625 9.5 12.625C8.87868 12.625 8.375 12.1213 8.375 11.5C8.375 10.8787 8.87868 10.375 9.5 10.375C10.1213 10.375 10.625 10.8787 10.625 11.5ZM5.5 12.625C6.12132 12.625 6.625 12.1213 6.625 11.5C6.625 10.8787 6.12132 10.375 5.5 10.375C4.87868 10.375 4.375 10.8787 4.375 11.5C4.375 12.1213 4.87868 12.625 5.5 12.625Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),Wf=["color"],s2=h.forwardRef(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,o=He(e,Wf);return h.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:t}),h.createElement("path",{d:"M10 6.5C10 8.433 8.433 10 6.5 10C4.567 10 3 8.433 3 6.5C3 4.567 4.567 3 6.5 3C8.433 3 10 4.567 10 6.5ZM9.30884 10.0159C8.53901 10.6318 7.56251 11 6.5 11C4.01472 11 2 8.98528 2 6.5C2 4.01472 4.01472 2 6.5 2C8.98528 2 11 4.01472 11 6.5C11 7.56251 10.6318 8.53901 10.0159 9.30884L12.8536 12.1464C13.0488 12.3417 13.0488 12.6583 12.8536 12.8536C12.6583 13.0488 12.3417 13.0488 12.1464 12.8536L9.30884 10.0159Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),Gf=["color"],a2=h.forwardRef(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,o=He(e,Gf);return h.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:t}),h.createElement("path",{d:"M8 2H13.5C13.7761 2 14 2.22386 14 2.5V12.5C14 12.7761 13.7761 13 13.5 13H8V2ZM7 2H1.5C1.22386 2 1 2.22386 1 2.5V12.5C1 12.7761 1.22386 13 1.5 13H7V2ZM0 2.5C0 1.67157 0.671573 1 1.5 1H13.5C14.3284 1 15 1.67157 15 2.5V12.5C15 13.3284 14.3284 14 13.5 14H1.5C0.671573 14 0 13.3284 0 12.5V2.5Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),Po=h.forwardRef((e,t)=>{const{children:n,...r}=e,o=h.Children.toArray(n),i=o.find(Kf);if(i){const s=i.props.children,a=o.map(c=>c===i?h.Children.count(s)>1?h.Children.only(null):h.isValidElement(s)?s.props.children:null:c);return g.jsx(Lo,{...r,ref:t,children:h.isValidElement(s)?h.cloneElement(s,void 0,a):null})}return g.jsx(Lo,{...r,ref:t,children:n})});Po.displayName="Slot";var Lo=h.forwardRef((e,t)=>{const{children:n,...r}=e;if(h.isValidElement(n)){const o=Zf(n);return h.cloneElement(n,{...qf(r,n.props),ref:t?ii(t,o):o})}return h.Children.count(n)>1?h.Children.only(null):null});Lo.displayName="SlotClone";var Uf=({children:e})=>g.jsx(g.Fragment,{children:e});function Kf(e){return h.isValidElement(e)&&e.type===Uf}function qf(e,t){const n={...t};for(const r in t){const o=e[r],i=t[r];/^on[A-Z]/.test(r)?o&&i?n[r]=(...a)=>{i(...a),o(...a)}:o&&(n[r]=o):r==="style"?n[r]={...o,...i}:r==="className"&&(n[r]=[o,i].filter(Boolean).join(" "))}return{...e,...n}}function Zf(e){var r,o;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(o=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:o.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function Wa(e){const t=e+"CollectionProvider",[n,r]=An(t),[o,i]=n(t,{collectionRef:{current:null},itemMap:new Map}),s=m=>{const{scope:p,children:y}=m,w=Ce.useRef(null),v=Ce.useRef(new Map).current;return g.jsx(o,{scope:p,itemMap:v,collectionRef:w,children:y})};s.displayName=t;const a=e+"CollectionSlot",c=Ce.forwardRef((m,p)=>{const{scope:y,children:w}=m,v=i(a,y),_=ke(p,v.collectionRef);return g.jsx(Po,{ref:_,children:w})});c.displayName=a;const u=e+"CollectionItemSlot",d="data-radix-collection-item",l=Ce.forwardRef((m,p)=>{const{scope:y,children:w,...v}=m,_=Ce.useRef(null),b=ke(p,_),x=i(u,y);return Ce.useEffect(()=>(x.itemMap.set(_,{ref:_,...v}),()=>void x.itemMap.delete(_))),g.jsx(Po,{[d]:"",ref:b,children:w})});l.displayName=u;function f(m){const p=i(e+"CollectionConsumer",m);return Ce.useCallback(()=>{const w=p.collectionRef.current;if(!w)return[];const v=Array.from(w.querySelectorAll(`[${d}]`));return Array.from(p.itemMap.values()).sort((x,N)=>v.indexOf(x.ref.current)-v.indexOf(N.ref.current))},[p.collectionRef,p.itemMap])}return[{Provider:s,Slot:c,ItemSlot:l},f,r]}var Qf="DismissableLayer",jo="dismissableLayer.update",Jf="dismissableLayer.pointerDownOutside",eh="dismissableLayer.focusOutside",zi,Ga=h.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),ci=h.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:o,onFocusOutside:i,onInteractOutside:s,onDismiss:a,...c}=e,u=h.useContext(Ga),[d,l]=h.useState(null),f=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,m]=h.useState({}),p=ke(t,M=>l(M)),y=Array.from(u.layers),[w]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),v=y.indexOf(w),_=d?y.indexOf(d):-1,b=u.layersWithOutsidePointerEventsDisabled.size>0,x=_>=v,N=nh(M=>{const T=M.target,A=[...u.branches].some(I=>I.contains(T));!x||A||(o==null||o(M),s==null||s(M),M.defaultPrevented||a==null||a())},f),L=rh(M=>{const T=M.target;[...u.branches].some(I=>I.contains(T))||(i==null||i(M),s==null||s(M),M.defaultPrevented||a==null||a())},f);return Ud(M=>{_===u.layers.size-1&&(r==null||r(M),!M.defaultPrevented&&a&&(M.preventDefault(),a()))},f),h.useEffect(()=>{if(d)return n&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(zi=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),Bi(),()=>{n&&u.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=zi)}},[d,f,n,u]),h.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),Bi())},[d,u]),h.useEffect(()=>{const M=()=>m({});return document.addEventListener(jo,M),()=>document.removeEventListener(jo,M)},[]),g.jsx(Se.div,{...c,ref:p,style:{pointerEvents:b?x?"auto":"none":void 0,...e.style},onFocusCapture:fe(e.onFocusCapture,L.onFocusCapture),onBlurCapture:fe(e.onBlurCapture,L.onBlurCapture),onPointerDownCapture:fe(e.onPointerDownCapture,N.onPointerDownCapture)})});ci.displayName=Qf;var th="DismissableLayerBranch",Ua=h.forwardRef((e,t)=>{const n=h.useContext(Ga),r=h.useRef(null),o=ke(t,r);return h.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),g.jsx(Se.div,{...e,ref:o})});Ua.displayName=th;function nh(e,t=globalThis==null?void 0:globalThis.document){const n=We(e),r=h.useRef(!1),o=h.useRef(()=>{});return h.useEffect(()=>{const i=a=>{if(a.target&&!r.current){let c=function(){Ka(Jf,n,u,{discrete:!0})};const u={originalEvent:a};a.pointerType==="touch"?(t.removeEventListener("click",o.current),o.current=c,t.addEventListener("click",o.current,{once:!0})):c()}else t.removeEventListener("click",o.current);r.current=!1},s=window.setTimeout(()=>{t.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(s),t.removeEventListener("pointerdown",i),t.removeEventListener("click",o.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}function rh(e,t=globalThis==null?void 0:globalThis.document){const n=We(e),r=h.useRef(!1);return h.useEffect(()=>{const o=i=>{i.target&&!r.current&&Ka(eh,n,{originalEvent:i},{discrete:!1})};return t.addEventListener("focusin",o),()=>t.removeEventListener("focusin",o)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function Bi(){const e=new CustomEvent(jo);document.dispatchEvent(e)}function Ka(e,t,n,{discrete:r}){const o=n.originalEvent.target,i=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&o.addEventListener(e,t,{once:!0}),r?pa(o,i):o.dispatchEvent(i)}var c2=ci,u2=Ua,oh="Portal",qa=h.forwardRef((e,t)=>{var a;const{container:n,...r}=e,[o,i]=h.useState(!1);Mo(()=>i(!0),[]);const s=n||o&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return s?Kd.createPortal(g.jsx(Se.div,{...r,ref:t}),s):null});qa.displayName=oh;const ih=1,sh=1e6;let no=0;function ah(){return no=(no+1)%Number.MAX_SAFE_INTEGER,no.toString()}const ro=new Map,Vi=e=>{if(ro.has(e))return;const t=setTimeout(()=>{ro.delete(e),mn({type:"REMOVE_TOAST",toastId:e})},sh);ro.set(e,t)},ch=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,ih)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(n=>n.id===t.toast.id?{...n,...t.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=t;return n?Vi(n):e.toasts.forEach(r=>{Vi(r.id)}),{...e,toasts:e.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(n=>n.id!==t.toastId)}}},nr=[];let rr={toasts:[]};function mn(e){rr=ch(rr,e),nr.forEach(t=>{t(rr)})}function uh({...e}){const t=ah(),n=o=>mn({type:"UPDATE_TOAST",toast:{...o,id:t}}),r=()=>mn({type:"DISMISS_TOAST",toastId:t});return mn({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:o=>{o||r()}}}),{id:t,dismiss:r,update:n}}function l2(){const[e,t]=Ce.useState(rr);return Ce.useEffect(()=>(nr.push(t),()=>{const n=nr.indexOf(t);n>-1&&nr.splice(n,1)}),[e]),{...e,toast:uh,dismiss:n=>mn({type:"DISMISS_TOAST",toastId:n})}}const lh={sm:"640px",md:"768px",lg:"1024px",xl:"1280px","2xl":"1400px"};function dh(e){const t=hf({query:`(min-width: ${lh[e]})`});return{[`is${e[0].toUpperCase()+e.substring(1)}`]:t}}const fh=h.createContext({openedTableInSidebar:void 0,selectedSidebarSection:"tables",openedRelationshipInSidebar:void 0,openRelationshipFromSidebar:B,closeAllRelationshipsInSidebar:B,openedDependencyInSidebar:void 0,openDependencyFromSidebar:B,closeAllDependenciesInSidebar:B,openedAreaInSidebar:void 0,openAreaFromSidebar:B,closeAllAreasInSidebar:B,selectSidebarSection:B,openTableFromSidebar:B,closeAllTablesInSidebar:B,isSidePanelShowed:!1,hideSidePanel:B,showSidePanel:B,toggleSidePanel:B,isSelectSchemaOpen:!1,openSelectSchema:B,closeSelectSchema:B}),Za=()=>h.useContext(fh);var oo=0;function hh(){h.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??Xi()),document.body.insertAdjacentElement("beforeend",e[1]??Xi()),oo++,()=>{oo===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),oo--}},[])}function Xi(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var or="right-scroll-bar-position",ir="width-before-scroll-bar",mh="with-scroll-bars-hidden",ph="--removed-body-scroll-bar-size";function io(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function gh(e,t){var n=h.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var o=n.value;o!==r&&(n.value=r,n.callback(r,o))}}}})[0];return n.callback=t,n.facade}var yh=typeof window<"u"?h.useLayoutEffect:h.useEffect,Yi=new WeakMap;function xh(e,t){var n=gh(null,function(r){return e.forEach(function(o){return io(o,r)})});return yh(function(){var r=Yi.get(n);if(r){var o=new Set(r),i=new Set(e),s=n.current;o.forEach(function(a){i.has(a)||io(a,null)}),i.forEach(function(a){o.has(a)||io(a,s)})}Yi.set(n,e)},[e]),n}function vh(e){return e}function wh(e,t){t===void 0&&(t=vh);var n=[],r=!1,o={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(i){var s=t(i,r);return n.push(s),function(){n=n.filter(function(a){return a!==s})}},assignSyncMedium:function(i){for(r=!0;n.length;){var s=n;n=[],s.forEach(i)}n={push:function(a){return i(a)},filter:function(){return n}}},assignMedium:function(i){r=!0;var s=[];if(n.length){var a=n;n=[],a.forEach(i),s=n}var c=function(){var d=s;s=[],d.forEach(i)},u=function(){return Promise.resolve().then(c)};u(),n={push:function(d){s.push(d),u()},filter:function(d){return s=s.filter(d),n}}}};return o}function bh(e){e===void 0&&(e={});var t=wh(null);return t.options=Re({async:!0,ssr:!1},e),t}var Qa=function(e){var t=e.sideCar,n=Sr(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return h.createElement(r,Re({},n))};Qa.isSideCarExport=!0;function Ch(e,t){return e.useMedium(t),Qa}var Ja=bh(),so=function(){},Tr=h.forwardRef(function(e,t){var n=h.useRef(null),r=h.useState({onScrollCapture:so,onWheelCapture:so,onTouchMoveCapture:so}),o=r[0],i=r[1],s=e.forwardProps,a=e.children,c=e.className,u=e.removeScrollBar,d=e.enabled,l=e.shards,f=e.sideCar,m=e.noIsolation,p=e.inert,y=e.allowPinchZoom,w=e.as,v=w===void 0?"div":w,_=e.gapMode,b=Sr(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),x=f,N=xh([n,t]),L=Re(Re({},b),o);return h.createElement(h.Fragment,null,d&&h.createElement(x,{sideCar:Ja,removeScrollBar:u,shards:l,noIsolation:m,inert:p,setCallbacks:i,allowPinchZoom:!!y,lockRef:n,gapMode:_}),s?h.cloneElement(h.Children.only(a),Re(Re({},L),{ref:N})):h.createElement(v,Re({},L,{className:c,ref:N}),a))});Tr.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Tr.classNames={fullWidth:ir,zeroRight:or};var _h=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function Eh(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=_h();return t&&e.setAttribute("nonce",t),e}function Sh(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function Mh(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var Nh=function(){var e=0,t=null;return{add:function(n){e==0&&(t=Eh())&&(Sh(t,n),Mh(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},Th=function(){var e=Nh();return function(t,n){h.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},ec=function(){var e=Th(),t=function(n){var r=n.styles,o=n.dynamic;return e(r,o),null};return t},kh={left:0,top:0,right:0,gap:0},ao=function(e){return parseInt(e||"",10)||0},Ah=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],o=t[e==="padding"?"paddingRight":"marginRight"];return[ao(n),ao(r),ao(o)]},Rh=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return kh;var t=Ah(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},Dh=ec(),Dt="data-scroll-locked",Ih=function(e,t,n,r){var o=e.left,i=e.top,s=e.right,a=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(mh,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(Dt,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(o,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(s,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(or,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(ir,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(or," .").concat(or,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(ir," .").concat(ir,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Dt,`] {
    `).concat(ph,": ").concat(a,`px;
  }
`)},Wi=function(){var e=parseInt(document.body.getAttribute(Dt)||"0",10);return isFinite(e)?e:0},Ph=function(){h.useEffect(function(){return document.body.setAttribute(Dt,(Wi()+1).toString()),function(){var e=Wi()-1;e<=0?document.body.removeAttribute(Dt):document.body.setAttribute(Dt,e.toString())}},[])},Lh=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,o=r===void 0?"margin":r;Ph();var i=h.useMemo(function(){return Rh(o)},[o]);return h.createElement(Dh,{styles:Ih(i,!t,o,n?"":"!important")})},$o=!1;if(typeof window<"u")try{var Hn=Object.defineProperty({},"passive",{get:function(){return $o=!0,!0}});window.addEventListener("test",Hn,Hn),window.removeEventListener("test",Hn,Hn)}catch{$o=!1}var Mt=$o?{passive:!1}:!1,jh=function(e){return e.tagName==="TEXTAREA"},tc=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!jh(e)&&n[t]==="visible")},$h=function(e){return tc(e,"overflowY")},Oh=function(e){return tc(e,"overflowX")},Gi=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var o=nc(e,r);if(o){var i=rc(e,r),s=i[1],a=i[2];if(s>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},Fh=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},Hh=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},nc=function(e,t){return e==="v"?$h(t):Oh(t)},rc=function(e,t){return e==="v"?Fh(t):Hh(t)},zh=function(e,t){return e==="h"&&t==="rtl"?-1:1},Bh=function(e,t,n,r,o){var i=zh(e,window.getComputedStyle(t).direction),s=i*r,a=n.target,c=t.contains(a),u=!1,d=s>0,l=0,f=0;do{var m=rc(e,a),p=m[0],y=m[1],w=m[2],v=y-w-i*p;(p||v)&&nc(e,a)&&(l+=v,f+=p),a instanceof ShadowRoot?a=a.host:a=a.parentNode}while(!c&&a!==document.body||c&&(t.contains(a)||t===a));return(d&&Math.abs(l)<1||!d&&Math.abs(f)<1)&&(u=!0),u},zn=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},Ui=function(e){return[e.deltaX,e.deltaY]},Ki=function(e){return e&&"current"in e?e.current:e},Vh=function(e,t){return e[0]===t[0]&&e[1]===t[1]},Xh=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},Yh=0,Nt=[];function Wh(e){var t=h.useRef([]),n=h.useRef([0,0]),r=h.useRef(),o=h.useState(Yh++)[0],i=h.useState(ec)[0],s=h.useRef(e);h.useEffect(function(){s.current=e},[e]),h.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(o));var y=ai([e.lockRef.current],(e.shards||[]).map(Ki),!0).filter(Boolean);return y.forEach(function(w){return w.classList.add("allow-interactivity-".concat(o))}),function(){document.body.classList.remove("block-interactivity-".concat(o)),y.forEach(function(w){return w.classList.remove("allow-interactivity-".concat(o))})}}},[e.inert,e.lockRef.current,e.shards]);var a=h.useCallback(function(y,w){if("touches"in y&&y.touches.length===2||y.type==="wheel"&&y.ctrlKey)return!s.current.allowPinchZoom;var v=zn(y),_=n.current,b="deltaX"in y?y.deltaX:_[0]-v[0],x="deltaY"in y?y.deltaY:_[1]-v[1],N,L=y.target,M=Math.abs(b)>Math.abs(x)?"h":"v";if("touches"in y&&M==="h"&&L.type==="range")return!1;var T=Gi(M,L);if(!T)return!0;if(T?N=M:(N=M==="v"?"h":"v",T=Gi(M,L)),!T)return!1;if(!r.current&&"changedTouches"in y&&(b||x)&&(r.current=N),!N)return!0;var A=r.current||N;return Bh(A,w,y,A==="h"?b:x)},[]),c=h.useCallback(function(y){var w=y;if(!(!Nt.length||Nt[Nt.length-1]!==i)){var v="deltaY"in w?Ui(w):zn(w),_=t.current.filter(function(N){return N.name===w.type&&(N.target===w.target||w.target===N.shadowParent)&&Vh(N.delta,v)})[0];if(_&&_.should){w.cancelable&&w.preventDefault();return}if(!_){var b=(s.current.shards||[]).map(Ki).filter(Boolean).filter(function(N){return N.contains(w.target)}),x=b.length>0?a(w,b[0]):!s.current.noIsolation;x&&w.cancelable&&w.preventDefault()}}},[]),u=h.useCallback(function(y,w,v,_){var b={name:y,delta:w,target:v,should:_,shadowParent:Gh(v)};t.current.push(b),setTimeout(function(){t.current=t.current.filter(function(x){return x!==b})},1)},[]),d=h.useCallback(function(y){n.current=zn(y),r.current=void 0},[]),l=h.useCallback(function(y){u(y.type,Ui(y),y.target,a(y,e.lockRef.current))},[]),f=h.useCallback(function(y){u(y.type,zn(y),y.target,a(y,e.lockRef.current))},[]);h.useEffect(function(){return Nt.push(i),e.setCallbacks({onScrollCapture:l,onWheelCapture:l,onTouchMoveCapture:f}),document.addEventListener("wheel",c,Mt),document.addEventListener("touchmove",c,Mt),document.addEventListener("touchstart",d,Mt),function(){Nt=Nt.filter(function(y){return y!==i}),document.removeEventListener("wheel",c,Mt),document.removeEventListener("touchmove",c,Mt),document.removeEventListener("touchstart",d,Mt)}},[]);var m=e.removeScrollBar,p=e.inert;return h.createElement(h.Fragment,null,p?h.createElement(i,{styles:Xh(o)}):null,m?h.createElement(Lh,{gapMode:e.gapMode}):null)}function Gh(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const Uh=Ch(Ja,Wh);var oc=h.forwardRef(function(e,t){return h.createElement(Tr,Re({},e,{ref:t,sideCar:Uh}))});oc.classNames=Tr.classNames;var Kh=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},Tt=new WeakMap,Bn=new WeakMap,Vn={},co=0,ic=function(e){return e&&(e.host||ic(e.parentNode))},qh=function(e,t){return t.map(function(n){if(e.contains(n))return n;var r=ic(n);return r&&e.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},Zh=function(e,t,n,r){var o=qh(t,Array.isArray(e)?e:[e]);Vn[n]||(Vn[n]=new WeakMap);var i=Vn[n],s=[],a=new Set,c=new Set(o),u=function(l){!l||a.has(l)||(a.add(l),u(l.parentNode))};o.forEach(u);var d=function(l){!l||c.has(l)||Array.prototype.forEach.call(l.children,function(f){if(a.has(f))d(f);else try{var m=f.getAttribute(r),p=m!==null&&m!=="false",y=(Tt.get(f)||0)+1,w=(i.get(f)||0)+1;Tt.set(f,y),i.set(f,w),s.push(f),y===1&&p&&Bn.set(f,!0),w===1&&f.setAttribute(n,"true"),p||f.setAttribute(r,"true")}catch(v){console.error("aria-hidden: cannot operate on ",f,v)}})};return d(t),a.clear(),co++,function(){s.forEach(function(l){var f=Tt.get(l)-1,m=i.get(l)-1;Tt.set(l,f),i.set(l,m),f||(Bn.has(l)||l.removeAttribute(r),Bn.delete(l)),m||l.removeAttribute(n)}),co--,co||(Tt=new WeakMap,Tt=new WeakMap,Bn=new WeakMap,Vn={})}},Qh=function(e,t,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),o=Kh(e);return o?(r.push.apply(r,Array.from(o.querySelectorAll("[aria-live]"))),Zh(r,o,n,"aria-hidden")):function(){return null}},Jh=h.createContext(void 0);function sc(e){const t=h.useContext(Jh);return e||t||"ltr"}/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ac=be("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const em=be("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tm=be("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nm=be("ChevronsLeftRight",[["path",{d:"m9 7-5 5 5 5",key:"j5w590"}],["path",{d:"m15 7 5 5-5 5",key:"1bl6da"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rm=be("ChevronsRightLeft",[["path",{d:"m20 17-5-5 5-5",key:"30x0n2"}],["path",{d:"m4 17 5-5-5-5",key:"16spf4"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const om=be("CircleDotDashed",[["path",{d:"M10.1 2.18a9.93 9.93 0 0 1 3.8 0",key:"1qdqn0"}],["path",{d:"M17.6 3.71a9.95 9.95 0 0 1 2.69 2.7",key:"1bq7p6"}],["path",{d:"M21.82 10.1a9.93 9.93 0 0 1 0 3.8",key:"1rlaqf"}],["path",{d:"M20.29 17.6a9.95 9.95 0 0 1-2.7 2.69",key:"1xk03u"}],["path",{d:"M13.9 21.82a9.94 9.94 0 0 1-3.8 0",key:"l7re25"}],["path",{d:"M6.4 20.29a9.95 9.95 0 0 1-2.69-2.7",key:"1v18p6"}],["path",{d:"M2.18 13.9a9.93 9.93 0 0 1 0-3.8",key:"xdo6bj"}],["path",{d:"M3.71 6.4a9.95 9.95 0 0 1 2.7-2.69",key:"1jjmaz"}],["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const im=be("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sm=be("KeyRound",[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d2=be("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const am=be("MessageCircleMore",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}],["path",{d:"M8 12h.01",key:"czm47f"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M16 12h.01",key:"1l6xoz"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cm=be("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cc=be("SquareDot",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uc=be("SquareMinus",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M8 12h8",key:"1wcyev"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lc=be("SquarePlus",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const um=be("Table2",[["path",{d:"M9 3H5a2 2 0 0 0-2 2v4m6-6h10a2 2 0 0 1 2 2v4M9 3v18m0 0h10a2 2 0 0 0 2-2V9M9 21H5a2 2 0 0 1-2-2V9m0 0h18",key:"gugj83"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dc=be("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lm=be("Workflow",[["rect",{width:"8",height:"8",x:"3",y:"3",rx:"2",key:"by2w9f"}],["path",{d:"M7 11v4a2 2 0 0 0 2 2h4",key:"xkn7yn"}],["rect",{width:"8",height:"8",x:"13",y:"13",rx:"2",key:"1cgmvn"}]]),dm=h.createContext({redoStack:[],undoStack:[],addRedoAction:B,addUndoAction:B,resetRedoStack:B,resetUndoStack:B,hasRedo:!1,hasUndo:!1}),fm=()=>h.useContext(dm),hm={[ce.POSTGRESQL]:"public",[ce.SQL_SERVER]:"dbo",[ce.CLICKHOUSE]:"default"};var mm=function(){function e(){var t=this;this.subscriptions=new Set,this.emit=function(n){var r,o;try{for(var i=yn(t.subscriptions),s=i.next();!s.done;s=i.next()){var a=s.value;a(n)}}catch(c){r={error:c}}finally{try{s&&!s.done&&(o=i.return)&&o.call(i)}finally{if(r)throw r.error}}},this.useSubscription=function(n){var r=h.useRef();r.current=n,h.useEffect(function(){function o(i){r.current&&r.current(i)}return t.subscriptions.add(o),function(){t.subscriptions.delete(o)}},[])}}return e}();function pm(){var e=h.useRef();return e.current||(e.current=new mm),e.current}const gm=h.createContext(void 0),lr=()=>{const e=h.useContext(gm);if(e===void 0)throw new Error("useDiff must be used within an DiffProvider");return e},f2=({children:e,diagram:t,readonly:n})=>{const{hasDiff:r}=lr();let o=yf();const i=pm(),{setSchemasFilter:s,schemasFilter:a}=mf(),{addUndoAction:c,resetRedoStack:u,resetUndoStack:d}=fm(),[l,f]=h.useState(""),[m,p]=h.useState(""),[y,w]=h.useState(new Date),[v,_]=h.useState(new Date),[b,x]=h.useState(ce.GENERIC),[N,L]=h.useState(),[M,T]=h.useState((t==null?void 0:t.tables)??[]),[A,I]=h.useState((t==null?void 0:t.relationships)??[]),[$,O]=h.useState((t==null?void 0:t.dependencies)??[]),[F,C]=h.useState((t==null?void 0:t.areas)??[]),{events:P}=lr(),E=h.useCallback(S=>{const{tablesAdded:j,fieldsAdded:W,relationshipsAdded:V}=S.data;T(G=>[...G,...j??[]].map(se=>{const q=W.get(se.id);return q?{...se,fields:[...se.fields,...q]}:se})),I(G=>[...G,...V??[]])},[]);P.useSubscription(E);const R=hm[b],D=h.useMemo(()=>n??r??!1,[n,r]);D&&(o=vf);const k=h.useMemo(()=>xf.includes(b)?[...new Set(M.map(S=>S.schema).filter(S=>!!S))].sort((S,j)=>S===R?-1:S.localeCompare(j)).map(S=>({id:ma(S),name:S,tableCount:M.filter(j=>j.schema===S).length})):[],[M,R,b]),H=h.useCallback(S=>{s(j=>({...j,[l]:S}))},[l,s]),z=h.useMemo(()=>{var j,W;return k.length===0?void 0:((a[l]??[]).length===0?void 0:a[l])??[((j=k.find(V=>V.name===R))==null?void 0:j.id)??((W=k[0])==null?void 0:W.id)]},[a,l,k,R]),X=h.useMemo(()=>({id:l,name:m,createdAt:y,updatedAt:v,databaseType:b,databaseEdition:N,tables:M,relationships:A,dependencies:$,areas:F}),[l,m,b,N,M,A,$,F,y,v]),ee=h.useCallback(async()=>{const S=new Date;T([]),I([]),O([]),C([]),_(S),u(),d(),await Promise.all([o.updateDiagram({id:l,attributes:{updatedAt:S}}),o.deleteDiagramTables(l),o.deleteDiagramRelationships(l),o.deleteDiagramDependencies(l),o.deleteDiagramAreas(l)])},[o,l,u,d]),K=h.useCallback(async()=>{f(""),p(""),x(ce.GENERIC),L(void 0),T([]),I([]),O([]),C([]),u(),d(),await Promise.all([o.deleteDiagramTables(l),o.deleteDiagramRelationships(l),o.deleteDiagram(l),o.deleteDiagramDependencies(l),o.deleteDiagramAreas(l)])},[o,l,u,d]),Q=h.useCallback(async()=>{const S=new Date;_(S),await o.updateDiagram({id:l,attributes:{updatedAt:S}})},[o,l,_]),Z=h.useCallback(async S=>{x(S),await o.updateDiagram({id:l,attributes:{databaseType:S}})},[o,l,x]),re=h.useCallback(async S=>{L(S),await o.updateDiagram({id:l,attributes:{databaseEdition:S}})},[o,l,L]),U=h.useCallback(async S=>{const j=l;f(S),await o.updateDiagram({id:j,attributes:{id:S}})},[o,l,f]),Y=h.useCallback(async(S,j={updateHistory:!0})=>{const W=m;p(S);const V=new Date;_(V),await o.updateDiagram({id:l,attributes:{name:S,updatedAt:V}}),j.updateHistory&&(c({action:"updateDiagramName",redoData:{name:S},undoData:{name:W}}),u())},[o,l,p,c,m,u]),oe=h.useCallback(async(S,j={updateHistory:!0})=>{T(V=>[...V,...S]);const W=new Date;_(W),await Promise.all([o.updateDiagram({id:l,attributes:{updatedAt:W}}),...S.map(V=>o.addTable({diagramId:l,table:V}))]),i.emit({action:"add_tables",data:{tables:S}}),j.updateHistory&&(c({action:"addTables",redoData:{tables:S},undoData:{tableIds:S.map(V=>V.id)}}),u())},[o,l,T,c,u,i]),ae=h.useCallback(async(S,j={updateHistory:!0})=>oe([S],j),[oe]),ne=h.useCallback(async S=>{const j={id:Xe(),name:`table_${M.length+1}`,x:0,y:0,fields:[{id:Xe(),name:"id",type:b===ce.SQLITE?{id:"integer",name:"integer"}:{id:"bigint",name:"bigint"},unique:!0,nullable:!1,primaryKey:!0,createdAt:Date.now()}],indexes:[],color:ko(),createdAt:Date.now(),isView:!1,order:M.length,...S};return await ae(j),j},[ae,M,b]),J=h.useCallback(S=>M.find(j=>j.id===S)??null,[M]),ue=h.useCallback(async(S,j)=>{const W=S.map(q=>J(q)).filter(q=>!!q),V=A.filter(q=>S.includes(q.sourceTableId)||S.includes(q.targetTableId)),G=$.filter(q=>S.includes(q.tableId)||S.includes(q.dependentTableId));I(q=>q.filter(de=>!V.some(le=>le.id===de.id))),O(q=>q.filter(de=>!G.some(le=>le.id===de.id))),T(q=>q.filter(de=>!S.includes(de.id))),i.emit({action:"remove_tables",data:{tableIds:S}});const se=new Date;_(se),await Promise.all([o.updateDiagram({id:l,attributes:{updatedAt:se}}),...V.map(q=>o.deleteRelationship({diagramId:l,id:q.id})),...G.map(q=>o.deleteDependency({diagramId:l,id:q.id})),...S.map(q=>o.deleteTable({diagramId:l,id:q}))]),W.length>0&&(j!=null&&j.updateHistory)&&(c({action:"removeTables",redoData:{tableIds:S},undoData:{tables:W,relationships:V,dependencies:G}}),u())},[o,l,T,c,u,J,A,i,$]),ge=h.useCallback(async(S,j={updateHistory:!0})=>ue([S],j),[ue]),Ee=h.useCallback(async(S,j,W={updateHistory:!0})=>{const V=J(S);T(se=>se.map(q=>q.id===S?{...q,...j}:q)),i.emit({action:"update_table",data:{id:S,table:j}});const G=new Date;_(G),await Promise.all([o.updateDiagram({id:l,attributes:{updatedAt:G}}),o.updateTable({id:S,attributes:j})]),V&&W.updateHistory&&(c({action:"updateTable",redoData:{tableId:S,table:j},undoData:{tableId:S,table:V}}),u())},[o,T,c,u,J,l,i]),ct=h.useCallback(async(S,j={updateHistory:!0,forceOverride:!1})=>{const W=me=>{const we=S(me);return j.forceOverride?we:me.map(Le=>{const St=we.find(eo=>eo.id===Le.id);return St?{...Le,...St}:Le}).filter(Le=>we.some(St=>St.id===Le.id))},V=No(M),G=W(M),se=V.filter(me=>!G.some(we=>we.id===me.id)),q=A.filter(me=>se.some(we=>we.id===me.sourceTableId||we.id===me.targetTableId)),de=$.filter(me=>se.some(we=>we.id===me.tableId||we.id===me.dependentTableId));I(me=>me.filter(we=>!q.some(Le=>Le.id===we.id))),O(me=>me.filter(we=>!de.some(Le=>Le.id===we.id))),T(W),i.emit({action:"remove_tables",data:{tableIds:se.map(me=>me.id)}});const le=[];for(const me of G)le.push(o.putTable({diagramId:l,table:me}));for(const me of se)le.push(o.deleteTable({diagramId:l,id:me.id}));for(const me of q)le.push(o.deleteRelationship({diagramId:l,id:me.id}));for(const me of de)le.push(o.deleteDependency({diagramId:l,id:me.id}));const xe=new Date;_(xe),le.push(o.updateDiagram({id:l,attributes:{updatedAt:xe}})),await Promise.all(le),j.updateHistory&&(c({action:"updateTablesState",redoData:{tables:G},undoData:{tables:V,relationships:q,dependencies:de}}),u())},[o,M,T,l,c,u,A,i,$]),Ie=h.useCallback((S,j)=>{const W=J(S);return(W==null?void 0:W.fields.find(V=>V.id===j))??null},[J]),Be=h.useCallback(async(S,j,W,V={updateHistory:!0})=>{const G=Ie(S,j);T(de=>de.map(le=>le.id===S?{...le,fields:le.fields.map(xe=>xe.id===j?{...xe,...W}:xe)}:le));const se=await o.getTable({diagramId:l,id:S});if(!se)return;const q=new Date;_(q),await Promise.all([o.updateDiagram({id:l,attributes:{updatedAt:q}}),o.updateTable({id:S,attributes:{...se,fields:se.fields.map(de=>de.id===j?{...de,...W}:de)}})]),G&&V.updateHistory&&(c({action:"updateField",redoData:{tableId:S,fieldId:j,field:{...G,...W}},undoData:{tableId:S,fieldId:j,field:G}}),u())},[o,l,T,c,u,Ie]),ut=h.useCallback(async(S,j,W={updateHistory:!0})=>{var de;const V=((de=J(S))==null?void 0:de.fields)??[],G=Ie(S,j);T(le=>le.map(xe=>xe.id===S?{...xe,fields:xe.fields.filter(me=>me.id!==j)}:xe)),i.emit({action:"remove_field",data:{tableId:S,fieldId:j,fields:V.filter(le=>le.id!==j)}});const se=await o.getTable({diagramId:l,id:S});if(!se)return;const q=new Date;_(q),await Promise.all([o.updateDiagram({id:l,attributes:{updatedAt:q}}),o.updateTable({id:S,attributes:{...se,fields:se.fields.filter(le=>le.id!==j)}})]),G&&W.updateHistory&&(c({action:"removeField",redoData:{tableId:S,fieldId:j},undoData:{tableId:S,field:G}}),u())},[o,l,T,c,u,Ie,J,i]),lt=h.useCallback(async(S,j,W={updateHistory:!0})=>{var q;const V=((q=J(S))==null?void 0:q.fields)??[];T(de=>de.map(le=>le.id===S?{...le,fields:[...le.fields,j]}:le)),i.emit({action:"add_field",data:{tableId:S,field:j,fields:[...V,j]}});const G=await o.getTable({diagramId:l,id:S});if(!G)return;const se=new Date;_(se),await Promise.all([o.updateDiagram({id:l,attributes:{updatedAt:se}}),o.updateTable({id:S,attributes:{...G,fields:[...G.fields,j]}})]),W.updateHistory&&(c({action:"addField",redoData:{tableId:S,field:j},undoData:{tableId:S,fieldId:j.id}}),u())},[o,l,T,c,u,i,J]),dt=h.useCallback(async S=>{var V;const j=J(S),W={id:Xe(),name:`field_${(((V=j==null?void 0:j.fields)==null?void 0:V.length)??0)+1}`,type:b===ce.SQLITE?{id:"integer",name:"integer"}:{id:"bigint",name:"bigint"},unique:!1,nullable:!0,primaryKey:!1,createdAt:Date.now()};return await lt(S,W),W},[lt,J,b]),Pe=h.useCallback((S,j)=>{const W=J(S);return(W==null?void 0:W.indexes.find(V=>V.id===j))??null},[J]),ft=h.useCallback(async(S,j,W={updateHistory:!0})=>{T(se=>se.map(q=>q.id===S?{...q,indexes:[...q.indexes,j]}:q));const V=await o.getTable({diagramId:l,id:S});if(!V)return;const G=new Date;_(G),await Promise.all([o.updateDiagram({id:l,attributes:{updatedAt:G}}),o.updateTable({id:S,attributes:{...V,indexes:[...V.indexes,j]}})]),W.updateHistory&&(c({action:"addIndex",redoData:{tableId:S,index:j},undoData:{tableId:S,indexId:j.id}}),u())},[o,l,T,c,u]),ht=h.useCallback(async(S,j,W={updateHistory:!0})=>{const V=Pe(S,j);T(q=>q.map(de=>de.id===S?{...de,indexes:de.indexes.filter(le=>le.id!==j)}:de));const G=await o.getTable({diagramId:l,id:S});if(!G)return;const se=new Date;_(se),await Promise.all([o.updateDiagram({id:l,attributes:{updatedAt:se}}),o.updateTable({id:S,attributes:{...G,indexes:G.indexes.filter(q=>q.id!==j)}})]),V&&W.updateHistory&&(c({action:"removeIndex",redoData:{indexId:j,tableId:S},undoData:{tableId:S,index:V}}),u())},[o,l,T,c,u,Pe]),mt=h.useCallback(async S=>{var V;const j=J(S),W={id:Xe(),name:`index_${(((V=j==null?void 0:j.indexes)==null?void 0:V.length)??0)+1}`,fieldIds:[],unique:!1,createdAt:Date.now()};return await ft(S,W),W},[ft,J]),Et=h.useCallback(async(S,j,W,V={updateHistory:!0})=>{const G=Pe(S,j);T(de=>de.map(le=>le.id===S?{...le,indexes:le.indexes.map(xe=>xe.id===j?{...xe,...W}:xe)}:le));const se=await o.getTable({diagramId:l,id:S});if(!se)return;const q=new Date;_(q),await Promise.all([o.updateDiagram({id:l,attributes:{updatedAt:q}}),o.updateTable({id:S,attributes:{...se,indexes:se.indexes.map(de=>de.id===j?{...de,...W}:de)}})]),G&&V.updateHistory&&(c({action:"updateIndex",redoData:{tableId:S,indexId:j,index:W},undoData:{tableId:S,indexId:j,index:G}}),u())},[o,l,T,c,u,Pe]),Xt=h.useCallback(async(S,j={updateHistory:!0})=>{I(V=>[...V,...S]);const W=new Date;_(W),await Promise.all([...S.map(V=>o.addRelationship({diagramId:l,relationship:V})),o.updateDiagram({id:l,attributes:{updatedAt:W}})]),j.updateHistory&&(c({action:"addRelationships",redoData:{relationships:S},undoData:{relationshipIds:S.map(V=>V.id)}}),u())},[o,l,I,c,u]),pt=h.useCallback(async(S,j={updateHistory:!0})=>Xt([S],j),[Xt]),Yr=h.useCallback(async({sourceTableId:S,targetTableId:j,sourceFieldId:W,targetFieldId:V})=>{const G=J(S),se=(G==null?void 0:G.name)??"",q=G==null?void 0:G.fields.find(xe=>xe.id===W),de=(q==null?void 0:q.name)??"",le={id:Xe(),name:`${se}_${de}_fk`,sourceSchema:G==null?void 0:G.schema,sourceTableId:S,targetSchema:G==null?void 0:G.schema,targetTableId:j,sourceFieldId:W,targetFieldId:V,sourceCardinality:"one",targetCardinality:"one",createdAt:Date.now()};return await pt(le),le},[pt,J]),Yt=h.useCallback(S=>A.find(j=>j.id===S)??null,[A]),Wt=h.useCallback(async(S,j={updateHistory:!0})=>{const W=[...A.filter(G=>S.includes(G.id))];I(G=>G.filter(se=>!S.includes(se.id)));const V=new Date;_(V),await Promise.all([...S.map(G=>o.deleteRelationship({diagramId:l,id:G})),o.updateDiagram({id:l,attributes:{updatedAt:V}})]),W.length>0&&j.updateHistory&&(c({action:"removeRelationships",redoData:{relationshipsIds:S},undoData:{relationships:W}}),u())},[o,l,I,A,c,u]),Wr=h.useCallback(async(S,j={updateHistory:!0})=>Wt([S],j),[Wt]),Gr=h.useCallback(async(S,j,W={updateHistory:!0})=>{const V=Yt(S);I(se=>se.map(q=>q.id===S?{...q,...j}:q));const G=new Date;_(G),await Promise.all([o.updateDiagram({id:l,attributes:{updatedAt:G}}),o.updateRelationship({id:S,attributes:j})]),V&&W.updateHistory&&(c({action:"updateRelationship",redoData:{relationshipId:S,relationship:j},undoData:{relationshipId:S,relationship:V}}),u())},[o,I,c,Yt,u,l]),Gt=h.useCallback(async(S,j={updateHistory:!0})=>{O(V=>[...V,...S]);const W=new Date;_(W),await Promise.all([...S.map(V=>o.addDependency({diagramId:l,dependency:V})),o.updateDiagram({id:l,attributes:{updatedAt:W}})]),j.updateHistory&&(c({action:"addDependencies",redoData:{dependencies:S},undoData:{dependenciesIds:S.map(V=>V.id)}}),u())},[o,l,O,c,u]),Ut=h.useCallback(async(S,j={updateHistory:!0})=>Gt([S],j),[Gt]),Ur=h.useCallback(async({tableId:S,dependentTableId:j})=>{const W=J(S),V=J(j),G={id:Xe(),tableId:S,dependentTableId:j,dependentSchema:V==null?void 0:V.schema,schema:W==null?void 0:W.schema,createdAt:Date.now()};return await Ut(G),G},[Ut,J]),Kt=h.useCallback(S=>$.find(j=>j.id===S)??null,[$]),qt=h.useCallback(async(S,j={updateHistory:!0})=>{const W=[...$.filter(G=>S.includes(G.id))];O(G=>G.filter(se=>!S.includes(se.id)));const V=new Date;_(V),await Promise.all([...S.map(G=>o.deleteDependency({diagramId:l,id:G})),o.updateDiagram({id:l,attributes:{updatedAt:V}})]),W.length>0&&j.updateHistory&&(c({action:"removeDependencies",redoData:{dependenciesIds:S},undoData:{dependencies:W}}),u())},[o,l,O,c,u,$]),Kr=h.useCallback(async(S,j={updateHistory:!0})=>qt([S],j),[qt]),qr=h.useCallback(async(S,j,W={updateHistory:!0})=>{const V=Kt(S);O(se=>se.map(q=>q.id===S?{...q,...j}:q));const G=new Date;_(G),await Promise.all([o.updateDiagram({id:l,attributes:{updatedAt:G}}),o.updateDependency({id:S,attributes:j})]),V&&W.updateHistory&&(c({action:"updateDependency",redoData:{dependencyId:S,dependency:j},undoData:{dependencyId:S,dependency:V}}),u())},[o,l,O,c,u,Kt]),Zt=h.useCallback(async(S,j={updateHistory:!0})=>{C(V=>[...V,...S]);const W=new Date;_(W),await Promise.all([...S.map(V=>o.addArea({diagramId:l,area:V})),o.updateDiagram({id:l,attributes:{updatedAt:W}})]),j.updateHistory&&(c({action:"addAreas",redoData:{areas:S},undoData:{areaIds:S.map(V=>V.id)}}),u())},[o,l,C,c,u]),Qt=h.useCallback(async(S,j={updateHistory:!0})=>Zt([S],j),[Zt]),Fn=h.useCallback(async S=>{const j={id:Xe(),name:`Area ${F.length+1}`,x:0,y:0,width:300,height:200,color:ko(),...S};return await Qt(j),j},[F,Qt]),Jt=h.useCallback(S=>F.find(j=>j.id===S)??null,[F]),en=h.useCallback(async(S,j={updateHistory:!0})=>{const W=[...F.filter(G=>S.includes(G.id))];C(G=>G.filter(se=>!S.includes(se.id)));const V=new Date;_(V),await Promise.all([...S.map(G=>o.deleteArea({diagramId:l,id:G})),o.updateDiagram({id:l,attributes:{updatedAt:V}})]),W.length>0&&j.updateHistory&&(c({action:"removeAreas",redoData:{areaIds:S},undoData:{areas:W}}),u())},[o,l,C,F,c,u]),Zr=h.useCallback(async(S,j={updateHistory:!0})=>en([S],j),[en]),Qr=h.useCallback(async(S,j,W={updateHistory:!0})=>{const V=Jt(S);C(se=>se.map(q=>q.id===S?{...q,...j}:q));const G=new Date;_(G),await Promise.all([o.updateDiagram({id:l,attributes:{updatedAt:G}}),o.updateArea({id:S,attributes:j})]),V&&W.updateHistory&&(c({action:"updateArea",redoData:{areaId:S,area:j},undoData:{areaId:S,area:V}}),u())},[o,l,C,Jt,c,u]),tn=h.useCallback(async S=>{f(S.id),p(S.name),x(S.databaseType),L(S.databaseEdition),T((S==null?void 0:S.tables)??[]),I((S==null?void 0:S.relationships)??[]),O((S==null?void 0:S.dependencies)??[]),C((S==null?void 0:S.areas)??[]),w(S.createdAt),_(S.updatedAt),i.emit({action:"load_diagram",data:{diagram:S}})},[f,p,x,L,T,I,O,C,w,_,i]),Jr=h.useCallback(async S=>{const j=await o.getDiagram(S,{includeRelationships:!0,includeTables:!0,includeDependencies:!0,includeAreas:!0});return j&&tn(j),j},[o,tn]);return g.jsx(Ya.Provider,{value:{diagramId:l,diagramName:m,databaseType:b,tables:M,relationships:A,dependencies:$,areas:F,currentDiagram:X,schemas:k,filteredSchemas:z,events:i,readonly:D,filterSchemas:H,updateDiagramId:U,updateDiagramName:Y,loadDiagram:Jr,loadDiagramFromData:tn,updateDatabaseType:Z,updateDatabaseEdition:re,clearDiagramData:ee,deleteDiagram:K,updateDiagramUpdatedAt:Q,createTable:ne,addTable:ae,addTables:oe,getTable:J,removeTable:ge,removeTables:ue,updateTable:Ee,updateTablesState:ct,updateField:Be,removeField:ut,createField:dt,addField:lt,addIndex:ft,createIndex:mt,removeIndex:ht,getField:Ie,getIndex:Pe,updateIndex:Et,addRelationship:pt,addRelationships:Xt,createRelationship:Yr,getRelationship:Yt,removeRelationship:Wr,removeRelationships:Wt,updateRelationship:Gr,addDependency:Ut,addDependencies:Gt,createDependency:Ur,getDependency:Kt,removeDependency:Kr,removeDependencies:qt,updateDependency:qr,createArea:Fn,addArea:Qt,addAreas:Zt,getArea:Jt,removeArea:Zr,removeAreas:en,updateArea:Qr},children:e})},ym=h.createContext({undo:B,redo:B,hasUndo:!1,hasRedo:!1});function ve(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,r;n<e.length;n++)(r=ve(e[n]))!==""&&(t+=(t&&" ")+r);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var xm={value:()=>{}};function kr(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new sr(n)}function sr(e){this._=e}function vm(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",o=n.indexOf(".");if(o>=0&&(r=n.slice(o+1),n=n.slice(0,o)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}sr.prototype=kr.prototype={constructor:sr,on:function(e,t){var n=this._,r=vm(e+"",n),o,i=-1,s=r.length;if(arguments.length<2){for(;++i<s;)if((o=(e=r[i]).type)&&(o=wm(n[o],e.name)))return o;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++i<s;)if(o=(e=r[i]).type)n[o]=qi(n[o],e.name,t);else if(t==null)for(o in n)n[o]=qi(n[o],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new sr(e)},call:function(e,t){if((o=arguments.length-2)>0)for(var n=new Array(o),r=0,o,i;r<o;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(i=this._[e],r=0,o=i.length;r<o;++r)i[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],o=0,i=r.length;o<i;++o)r[o].value.apply(t,n)}};function wm(e,t){for(var n=0,r=e.length,o;n<r;++n)if((o=e[n]).name===t)return o.value}function qi(e,t,n){for(var r=0,o=e.length;r<o;++r)if(e[r].name===t){e[r]=xm,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var Oo="http://www.w3.org/1999/xhtml";const Zi={svg:"http://www.w3.org/2000/svg",xhtml:Oo,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Ar(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Zi.hasOwnProperty(t)?{space:Zi[t],local:e}:e}function bm(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Oo&&t.documentElement.namespaceURI===Oo?t.createElement(e):t.createElementNS(n,e)}}function Cm(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function fc(e){var t=Ar(e);return(t.local?Cm:bm)(t)}function _m(){}function ui(e){return e==null?_m:function(){return this.querySelector(e)}}function Em(e){typeof e!="function"&&(e=ui(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var i=t[o],s=i.length,a=r[o]=new Array(s),c,u,d=0;d<s;++d)(c=i[d])&&(u=e.call(c,c.__data__,d,i))&&("__data__"in c&&(u.__data__=c.__data__),a[d]=u);return new Ae(r,this._parents)}function Sm(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Mm(){return[]}function hc(e){return e==null?Mm:function(){return this.querySelectorAll(e)}}function Nm(e){return function(){return Sm(e.apply(this,arguments))}}function Tm(e){typeof e=="function"?e=Nm(e):e=hc(e);for(var t=this._groups,n=t.length,r=[],o=[],i=0;i<n;++i)for(var s=t[i],a=s.length,c,u=0;u<a;++u)(c=s[u])&&(r.push(e.call(c,c.__data__,u,s)),o.push(c));return new Ae(r,o)}function mc(e){return function(){return this.matches(e)}}function pc(e){return function(t){return t.matches(e)}}var km=Array.prototype.find;function Am(e){return function(){return km.call(this.children,e)}}function Rm(){return this.firstElementChild}function Dm(e){return this.select(e==null?Rm:Am(typeof e=="function"?e:pc(e)))}var Im=Array.prototype.filter;function Pm(){return Array.from(this.children)}function Lm(e){return function(){return Im.call(this.children,e)}}function jm(e){return this.selectAll(e==null?Pm:Lm(typeof e=="function"?e:pc(e)))}function $m(e){typeof e!="function"&&(e=mc(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var i=t[o],s=i.length,a=r[o]=[],c,u=0;u<s;++u)(c=i[u])&&e.call(c,c.__data__,u,i)&&a.push(c);return new Ae(r,this._parents)}function gc(e){return new Array(e.length)}function Om(){return new Ae(this._enter||this._groups.map(gc),this._parents)}function dr(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}dr.prototype={constructor:dr,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Fm(e){return function(){return e}}function Hm(e,t,n,r,o,i){for(var s=0,a,c=t.length,u=i.length;s<u;++s)(a=t[s])?(a.__data__=i[s],r[s]=a):n[s]=new dr(e,i[s]);for(;s<c;++s)(a=t[s])&&(o[s]=a)}function zm(e,t,n,r,o,i,s){var a,c,u=new Map,d=t.length,l=i.length,f=new Array(d),m;for(a=0;a<d;++a)(c=t[a])&&(f[a]=m=s.call(c,c.__data__,a,t)+"",u.has(m)?o[a]=c:u.set(m,c));for(a=0;a<l;++a)m=s.call(e,i[a],a,i)+"",(c=u.get(m))?(r[a]=c,c.__data__=i[a],u.delete(m)):n[a]=new dr(e,i[a]);for(a=0;a<d;++a)(c=t[a])&&u.get(f[a])===c&&(o[a]=c)}function Bm(e){return e.__data__}function Vm(e,t){if(!arguments.length)return Array.from(this,Bm);var n=t?zm:Hm,r=this._parents,o=this._groups;typeof e!="function"&&(e=Fm(e));for(var i=o.length,s=new Array(i),a=new Array(i),c=new Array(i),u=0;u<i;++u){var d=r[u],l=o[u],f=l.length,m=Xm(e.call(d,d&&d.__data__,u,r)),p=m.length,y=a[u]=new Array(p),w=s[u]=new Array(p),v=c[u]=new Array(f);n(d,l,y,w,v,m,t);for(var _=0,b=0,x,N;_<p;++_)if(x=y[_]){for(_>=b&&(b=_+1);!(N=w[b])&&++b<p;);x._next=N||null}}return s=new Ae(s,r),s._enter=a,s._exit=c,s}function Xm(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Ym(){return new Ae(this._exit||this._groups.map(gc),this._parents)}function Wm(e,t,n){var r=this.enter(),o=this,i=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(o=t(o),o&&(o=o.selection())),n==null?i.remove():n(i),r&&o?r.merge(o).order():o}function Gm(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,o=n.length,i=r.length,s=Math.min(o,i),a=new Array(o),c=0;c<s;++c)for(var u=n[c],d=r[c],l=u.length,f=a[c]=new Array(l),m,p=0;p<l;++p)(m=u[p]||d[p])&&(f[p]=m);for(;c<o;++c)a[c]=n[c];return new Ae(a,this._parents)}function Um(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],o=r.length-1,i=r[o],s;--o>=0;)(s=r[o])&&(i&&s.compareDocumentPosition(i)^4&&i.parentNode.insertBefore(s,i),i=s);return this}function Km(e){e||(e=qm);function t(l,f){return l&&f?e(l.__data__,f.__data__):!l-!f}for(var n=this._groups,r=n.length,o=new Array(r),i=0;i<r;++i){for(var s=n[i],a=s.length,c=o[i]=new Array(a),u,d=0;d<a;++d)(u=s[d])&&(c[d]=u);c.sort(t)}return new Ae(o,this._parents).order()}function qm(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Zm(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Qm(){return Array.from(this)}function Jm(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],o=0,i=r.length;o<i;++o){var s=r[o];if(s)return s}return null}function ep(){let e=0;for(const t of this)++e;return e}function tp(){return!this.node()}function np(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var o=t[n],i=0,s=o.length,a;i<s;++i)(a=o[i])&&e.call(a,a.__data__,i,o);return this}function rp(e){return function(){this.removeAttribute(e)}}function op(e){return function(){this.removeAttributeNS(e.space,e.local)}}function ip(e,t){return function(){this.setAttribute(e,t)}}function sp(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function ap(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function cp(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function up(e,t){var n=Ar(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?op:rp:typeof t=="function"?n.local?cp:ap:n.local?sp:ip)(n,t))}function yc(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function lp(e){return function(){this.style.removeProperty(e)}}function dp(e,t,n){return function(){this.style.setProperty(e,t,n)}}function fp(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function hp(e,t,n){return arguments.length>1?this.each((t==null?lp:typeof t=="function"?fp:dp)(e,t,n??"")):$t(this.node(),e)}function $t(e,t){return e.style.getPropertyValue(t)||yc(e).getComputedStyle(e,null).getPropertyValue(t)}function mp(e){return function(){delete this[e]}}function pp(e,t){return function(){this[e]=t}}function gp(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function yp(e,t){return arguments.length>1?this.each((t==null?mp:typeof t=="function"?gp:pp)(e,t)):this.node()[e]}function xc(e){return e.trim().split(/^|\s+/)}function li(e){return e.classList||new vc(e)}function vc(e){this._node=e,this._names=xc(e.getAttribute("class")||"")}vc.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function wc(e,t){for(var n=li(e),r=-1,o=t.length;++r<o;)n.add(t[r])}function bc(e,t){for(var n=li(e),r=-1,o=t.length;++r<o;)n.remove(t[r])}function xp(e){return function(){wc(this,e)}}function vp(e){return function(){bc(this,e)}}function wp(e,t){return function(){(t.apply(this,arguments)?wc:bc)(this,e)}}function bp(e,t){var n=xc(e+"");if(arguments.length<2){for(var r=li(this.node()),o=-1,i=n.length;++o<i;)if(!r.contains(n[o]))return!1;return!0}return this.each((typeof t=="function"?wp:t?xp:vp)(n,t))}function Cp(){this.textContent=""}function _p(e){return function(){this.textContent=e}}function Ep(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Sp(e){return arguments.length?this.each(e==null?Cp:(typeof e=="function"?Ep:_p)(e)):this.node().textContent}function Mp(){this.innerHTML=""}function Np(e){return function(){this.innerHTML=e}}function Tp(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function kp(e){return arguments.length?this.each(e==null?Mp:(typeof e=="function"?Tp:Np)(e)):this.node().innerHTML}function Ap(){this.nextSibling&&this.parentNode.appendChild(this)}function Rp(){return this.each(Ap)}function Dp(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Ip(){return this.each(Dp)}function Pp(e){var t=typeof e=="function"?e:fc(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Lp(){return null}function jp(e,t){var n=typeof e=="function"?e:fc(e),r=t==null?Lp:typeof t=="function"?t:ui(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function $p(){var e=this.parentNode;e&&e.removeChild(this)}function Op(){return this.each($p)}function Fp(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Hp(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function zp(e){return this.select(e?Hp:Fp)}function Bp(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Vp(e){return function(t){e.call(this,t,this.__data__)}}function Xp(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function Yp(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,o=t.length,i;n<o;++n)i=t[n],(!e.type||i.type===e.type)&&i.name===e.name?this.removeEventListener(i.type,i.listener,i.options):t[++r]=i;++r?t.length=r:delete this.__on}}}function Wp(e,t,n){return function(){var r=this.__on,o,i=Vp(t);if(r){for(var s=0,a=r.length;s<a;++s)if((o=r[s]).type===e.type&&o.name===e.name){this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=i,o.options=n),o.value=t;return}}this.addEventListener(e.type,i,n),o={type:e.type,name:e.name,value:t,listener:i,options:n},r?r.push(o):this.__on=[o]}}function Gp(e,t,n){var r=Xp(e+""),o,i=r.length,s;if(arguments.length<2){var a=this.node().__on;if(a){for(var c=0,u=a.length,d;c<u;++c)for(o=0,d=a[c];o<i;++o)if((s=r[o]).type===d.type&&s.name===d.name)return d.value}return}for(a=t?Wp:Yp,o=0;o<i;++o)this.each(a(r[o],t,n));return this}function Cc(e,t,n){var r=yc(e),o=r.CustomEvent;typeof o=="function"?o=new o(t,n):(o=r.document.createEvent("Event"),n?(o.initEvent(t,n.bubbles,n.cancelable),o.detail=n.detail):o.initEvent(t,!1,!1)),e.dispatchEvent(o)}function Up(e,t){return function(){return Cc(this,e,t)}}function Kp(e,t){return function(){return Cc(this,e,t.apply(this,arguments))}}function qp(e,t){return this.each((typeof t=="function"?Kp:Up)(e,t))}function*Zp(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],o=0,i=r.length,s;o<i;++o)(s=r[o])&&(yield s)}var _c=[null];function Ae(e,t){this._groups=e,this._parents=t}function Rn(){return new Ae([[document.documentElement]],_c)}function Qp(){return this}Ae.prototype=Rn.prototype={constructor:Ae,select:Em,selectAll:Tm,selectChild:Dm,selectChildren:jm,filter:$m,data:Vm,enter:Om,exit:Ym,join:Wm,merge:Gm,selection:Qp,order:Um,sort:Km,call:Zm,nodes:Qm,node:Jm,size:ep,empty:tp,each:np,attr:up,style:hp,property:yp,classed:bp,text:Sp,html:kp,raise:Rp,lower:Ip,append:Pp,insert:jp,remove:Op,clone:zp,datum:Bp,on:Gp,dispatch:qp,[Symbol.iterator]:Zp};function Te(e){return typeof e=="string"?new Ae([[document.querySelector(e)]],[document.documentElement]):new Ae([[e]],_c)}function Jp(e){let t;for(;t=e.sourceEvent;)e=t;return e}function je(e,t){if(e=Jp(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var o=t.getBoundingClientRect();return[e.clientX-o.left-t.clientLeft,e.clientY-o.top-t.clientTop]}}return[e.pageX,e.pageY]}const eg={passive:!1},xn={capture:!0,passive:!1};function uo(e){e.stopImmediatePropagation()}function It(e){e.preventDefault(),e.stopImmediatePropagation()}function Ec(e){var t=e.document.documentElement,n=Te(e).on("dragstart.drag",It,xn);"onselectstart"in t?n.on("selectstart.drag",It,xn):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Sc(e,t){var n=e.document.documentElement,r=Te(e).on("dragstart.drag",null);t&&(r.on("click.drag",It,xn),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const Xn=e=>()=>e;function Fo(e,{sourceEvent:t,subject:n,target:r,identifier:o,active:i,x:s,y:a,dx:c,dy:u,dispatch:d}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:o,enumerable:!0,configurable:!0},active:{value:i,enumerable:!0,configurable:!0},x:{value:s,enumerable:!0,configurable:!0},y:{value:a,enumerable:!0,configurable:!0},dx:{value:c,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:d}})}Fo.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function tg(e){return!e.ctrlKey&&!e.button}function ng(){return this.parentNode}function rg(e,t){return t??{x:e.x,y:e.y}}function og(){return navigator.maxTouchPoints||"ontouchstart"in this}function Mc(){var e=tg,t=ng,n=rg,r=og,o={},i=kr("start","drag","end"),s=0,a,c,u,d,l=0;function f(x){x.on("mousedown.drag",m).filter(r).on("touchstart.drag",w).on("touchmove.drag",v,eg).on("touchend.drag touchcancel.drag",_).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function m(x,N){if(!(d||!e.call(this,x,N))){var L=b(this,t.call(this,x,N),x,N,"mouse");L&&(Te(x.view).on("mousemove.drag",p,xn).on("mouseup.drag",y,xn),Ec(x.view),uo(x),u=!1,a=x.clientX,c=x.clientY,L("start",x))}}function p(x){if(It(x),!u){var N=x.clientX-a,L=x.clientY-c;u=N*N+L*L>l}o.mouse("drag",x)}function y(x){Te(x.view).on("mousemove.drag mouseup.drag",null),Sc(x.view,u),It(x),o.mouse("end",x)}function w(x,N){if(e.call(this,x,N)){var L=x.changedTouches,M=t.call(this,x,N),T=L.length,A,I;for(A=0;A<T;++A)(I=b(this,M,x,N,L[A].identifier,L[A]))&&(uo(x),I("start",x,L[A]))}}function v(x){var N=x.changedTouches,L=N.length,M,T;for(M=0;M<L;++M)(T=o[N[M].identifier])&&(It(x),T("drag",x,N[M]))}function _(x){var N=x.changedTouches,L=N.length,M,T;for(d&&clearTimeout(d),d=setTimeout(function(){d=null},500),M=0;M<L;++M)(T=o[N[M].identifier])&&(uo(x),T("end",x,N[M]))}function b(x,N,L,M,T,A){var I=i.copy(),$=je(A||L,N),O,F,C;if((C=n.call(x,new Fo("beforestart",{sourceEvent:L,target:f,identifier:T,active:s,x:$[0],y:$[1],dx:0,dy:0,dispatch:I}),M))!=null)return O=C.x-$[0]||0,F=C.y-$[1]||0,function P(E,R,D){var k=$,H;switch(E){case"start":o[T]=P,H=s++;break;case"end":delete o[T],--s;case"drag":$=je(D||R,N),H=s;break}I.call(E,x,new Fo(E,{sourceEvent:R,subject:C,target:f,identifier:T,active:H,x:$[0]+O,y:$[1]+F,dx:$[0]-k[0],dy:$[1]-k[1],dispatch:I}),M)}}return f.filter=function(x){return arguments.length?(e=typeof x=="function"?x:Xn(!!x),f):e},f.container=function(x){return arguments.length?(t=typeof x=="function"?x:Xn(x),f):t},f.subject=function(x){return arguments.length?(n=typeof x=="function"?x:Xn(x),f):n},f.touchable=function(x){return arguments.length?(r=typeof x=="function"?x:Xn(!!x),f):r},f.on=function(){var x=i.on.apply(i,arguments);return x===i?f:x},f.clickDistance=function(x){return arguments.length?(l=(x=+x)*x,f):Math.sqrt(l)},f}function di(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Nc(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Dn(){}var vn=.7,fr=1/vn,Pt="\\s*([+-]?\\d+)\\s*",wn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ye="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ig=/^#([0-9a-f]{3,8})$/,sg=new RegExp(`^rgb\\(${Pt},${Pt},${Pt}\\)$`),ag=new RegExp(`^rgb\\(${Ye},${Ye},${Ye}\\)$`),cg=new RegExp(`^rgba\\(${Pt},${Pt},${Pt},${wn}\\)$`),ug=new RegExp(`^rgba\\(${Ye},${Ye},${Ye},${wn}\\)$`),lg=new RegExp(`^hsl\\(${wn},${Ye},${Ye}\\)$`),dg=new RegExp(`^hsla\\(${wn},${Ye},${Ye},${wn}\\)$`),Qi={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};di(Dn,bn,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Ji,formatHex:Ji,formatHex8:fg,formatHsl:hg,formatRgb:es,toString:es});function Ji(){return this.rgb().formatHex()}function fg(){return this.rgb().formatHex8()}function hg(){return Tc(this).formatHsl()}function es(){return this.rgb().formatRgb()}function bn(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=ig.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?ts(t):n===3?new Ne(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Yn(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Yn(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=sg.exec(e))?new Ne(t[1],t[2],t[3],1):(t=ag.exec(e))?new Ne(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=cg.exec(e))?Yn(t[1],t[2],t[3],t[4]):(t=ug.exec(e))?Yn(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=lg.exec(e))?os(t[1],t[2]/100,t[3]/100,1):(t=dg.exec(e))?os(t[1],t[2]/100,t[3]/100,t[4]):Qi.hasOwnProperty(e)?ts(Qi[e]):e==="transparent"?new Ne(NaN,NaN,NaN,0):null}function ts(e){return new Ne(e>>16&255,e>>8&255,e&255,1)}function Yn(e,t,n,r){return r<=0&&(e=t=n=NaN),new Ne(e,t,n,r)}function mg(e){return e instanceof Dn||(e=bn(e)),e?(e=e.rgb(),new Ne(e.r,e.g,e.b,e.opacity)):new Ne}function Ho(e,t,n,r){return arguments.length===1?mg(e):new Ne(e,t,n,r??1)}function Ne(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}di(Ne,Ho,Nc(Dn,{brighter(e){return e=e==null?fr:Math.pow(fr,e),new Ne(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?vn:Math.pow(vn,e),new Ne(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Ne(vt(this.r),vt(this.g),vt(this.b),hr(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:ns,formatHex:ns,formatHex8:pg,formatRgb:rs,toString:rs}));function ns(){return`#${yt(this.r)}${yt(this.g)}${yt(this.b)}`}function pg(){return`#${yt(this.r)}${yt(this.g)}${yt(this.b)}${yt((isNaN(this.opacity)?1:this.opacity)*255)}`}function rs(){const e=hr(this.opacity);return`${e===1?"rgb(":"rgba("}${vt(this.r)}, ${vt(this.g)}, ${vt(this.b)}${e===1?")":`, ${e})`}`}function hr(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function vt(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function yt(e){return e=vt(e),(e<16?"0":"")+e.toString(16)}function os(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new $e(e,t,n,r)}function Tc(e){if(e instanceof $e)return new $e(e.h,e.s,e.l,e.opacity);if(e instanceof Dn||(e=bn(e)),!e)return new $e;if(e instanceof $e)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,o=Math.min(t,n,r),i=Math.max(t,n,r),s=NaN,a=i-o,c=(i+o)/2;return a?(t===i?s=(n-r)/a+(n<r)*6:n===i?s=(r-t)/a+2:s=(t-n)/a+4,a/=c<.5?i+o:2-i-o,s*=60):a=c>0&&c<1?0:s,new $e(s,a,c,e.opacity)}function gg(e,t,n,r){return arguments.length===1?Tc(e):new $e(e,t,n,r??1)}function $e(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}di($e,gg,Nc(Dn,{brighter(e){return e=e==null?fr:Math.pow(fr,e),new $e(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?vn:Math.pow(vn,e),new $e(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,o=2*n-r;return new Ne(lo(e>=240?e-240:e+120,o,r),lo(e,o,r),lo(e<120?e+240:e-120,o,r),this.opacity)},clamp(){return new $e(is(this.h),Wn(this.s),Wn(this.l),hr(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=hr(this.opacity);return`${e===1?"hsl(":"hsla("}${is(this.h)}, ${Wn(this.s)*100}%, ${Wn(this.l)*100}%${e===1?")":`, ${e})`}`}}));function is(e){return e=(e||0)%360,e<0?e+360:e}function Wn(e){return Math.max(0,Math.min(1,e||0))}function lo(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const kc=e=>()=>e;function yg(e,t){return function(n){return e+n*t}}function xg(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function vg(e){return(e=+e)==1?Ac:function(t,n){return n-t?xg(t,n,e):kc(isNaN(t)?n:t)}}function Ac(e,t){var n=t-e;return n?yg(e,n):kc(isNaN(e)?t:e)}const ss=function e(t){var n=vg(t);function r(o,i){var s=n((o=Ho(o)).r,(i=Ho(i)).r),a=n(o.g,i.g),c=n(o.b,i.b),u=Ac(o.opacity,i.opacity);return function(d){return o.r=s(d),o.g=a(d),o.b=c(d),o.opacity=u(d),o+""}}return r.gamma=e,r}(1);function ot(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var zo=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,fo=new RegExp(zo.source,"g");function wg(e){return function(){return e}}function bg(e){return function(t){return e(t)+""}}function Cg(e,t){var n=zo.lastIndex=fo.lastIndex=0,r,o,i,s=-1,a=[],c=[];for(e=e+"",t=t+"";(r=zo.exec(e))&&(o=fo.exec(t));)(i=o.index)>n&&(i=t.slice(n,i),a[s]?a[s]+=i:a[++s]=i),(r=r[0])===(o=o[0])?a[s]?a[s]+=o:a[++s]=o:(a[++s]=null,c.push({i:s,x:ot(r,o)})),n=fo.lastIndex;return n<t.length&&(i=t.slice(n),a[s]?a[s]+=i:a[++s]=i),a.length<2?c[0]?bg(c[0].x):wg(t):(t=c.length,function(u){for(var d=0,l;d<t;++d)a[(l=c[d]).i]=l.x(u);return a.join("")})}var as=180/Math.PI,Bo={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Rc(e,t,n,r,o,i){var s,a,c;return(s=Math.sqrt(e*e+t*t))&&(e/=s,t/=s),(c=e*n+t*r)&&(n-=e*c,r-=t*c),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,c/=a),e*r<t*n&&(e=-e,t=-t,c=-c,s=-s),{translateX:o,translateY:i,rotate:Math.atan2(t,e)*as,skewX:Math.atan(c)*as,scaleX:s,scaleY:a}}var Gn;function _g(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Bo:Rc(t.a,t.b,t.c,t.d,t.e,t.f)}function Eg(e){return e==null||(Gn||(Gn=document.createElementNS("http://www.w3.org/2000/svg","g")),Gn.setAttribute("transform",e),!(e=Gn.transform.baseVal.consolidate()))?Bo:(e=e.matrix,Rc(e.a,e.b,e.c,e.d,e.e,e.f))}function Dc(e,t,n,r){function o(u){return u.length?u.pop()+" ":""}function i(u,d,l,f,m,p){if(u!==l||d!==f){var y=m.push("translate(",null,t,null,n);p.push({i:y-4,x:ot(u,l)},{i:y-2,x:ot(d,f)})}else(l||f)&&m.push("translate("+l+t+f+n)}function s(u,d,l,f){u!==d?(u-d>180?d+=360:d-u>180&&(u+=360),f.push({i:l.push(o(l)+"rotate(",null,r)-2,x:ot(u,d)})):d&&l.push(o(l)+"rotate("+d+r)}function a(u,d,l,f){u!==d?f.push({i:l.push(o(l)+"skewX(",null,r)-2,x:ot(u,d)}):d&&l.push(o(l)+"skewX("+d+r)}function c(u,d,l,f,m,p){if(u!==l||d!==f){var y=m.push(o(m)+"scale(",null,",",null,")");p.push({i:y-4,x:ot(u,l)},{i:y-2,x:ot(d,f)})}else(l!==1||f!==1)&&m.push(o(m)+"scale("+l+","+f+")")}return function(u,d){var l=[],f=[];return u=e(u),d=e(d),i(u.translateX,u.translateY,d.translateX,d.translateY,l,f),s(u.rotate,d.rotate,l,f),a(u.skewX,d.skewX,l,f),c(u.scaleX,u.scaleY,d.scaleX,d.scaleY,l,f),u=d=null,function(m){for(var p=-1,y=f.length,w;++p<y;)l[(w=f[p]).i]=w.x(m);return l.join("")}}}var Sg=Dc(_g,"px, ","px)","deg)"),Mg=Dc(Eg,", ",")",")"),Ng=1e-12;function cs(e){return((e=Math.exp(e))+1/e)/2}function Tg(e){return((e=Math.exp(e))-1/e)/2}function kg(e){return((e=Math.exp(2*e))-1)/(e+1)}const Ag=function e(t,n,r){function o(i,s){var a=i[0],c=i[1],u=i[2],d=s[0],l=s[1],f=s[2],m=d-a,p=l-c,y=m*m+p*p,w,v;if(y<Ng)v=Math.log(f/u)/t,w=function(M){return[a+M*m,c+M*p,u*Math.exp(t*M*v)]};else{var _=Math.sqrt(y),b=(f*f-u*u+r*y)/(2*u*n*_),x=(f*f-u*u-r*y)/(2*f*n*_),N=Math.log(Math.sqrt(b*b+1)-b),L=Math.log(Math.sqrt(x*x+1)-x);v=(L-N)/t,w=function(M){var T=M*v,A=cs(N),I=u/(n*_)*(A*kg(t*T+N)-Tg(N));return[a+I*m,c+I*p,u*A/cs(t*T+N)]}}return w.duration=v*1e3*t/Math.SQRT2,w}return o.rho=function(i){var s=Math.max(.001,+i),a=s*s,c=a*a;return e(s,a,c)},o}(Math.SQRT2,2,4);var Ot=0,un=0,rn=0,Ic=1e3,mr,ln,pr=0,bt=0,Rr=0,Cn=typeof performance=="object"&&performance.now?performance:Date,Pc=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function fi(){return bt||(Pc(Rg),bt=Cn.now()+Rr)}function Rg(){bt=0}function gr(){this._call=this._time=this._next=null}gr.prototype=Lc.prototype={constructor:gr,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?fi():+n)+(t==null?0:+t),!this._next&&ln!==this&&(ln?ln._next=this:mr=this,ln=this),this._call=e,this._time=n,Vo()},stop:function(){this._call&&(this._call=null,this._time=1/0,Vo())}};function Lc(e,t,n){var r=new gr;return r.restart(e,t,n),r}function Dg(){fi(),++Ot;for(var e=mr,t;e;)(t=bt-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Ot}function us(){bt=(pr=Cn.now())+Rr,Ot=un=0;try{Dg()}finally{Ot=0,Pg(),bt=0}}function Ig(){var e=Cn.now(),t=e-pr;t>Ic&&(Rr-=t,pr=e)}function Pg(){for(var e,t=mr,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:mr=n);ln=e,Vo(r)}function Vo(e){if(!Ot){un&&(un=clearTimeout(un));var t=e-bt;t>24?(e<1/0&&(un=setTimeout(us,e-Cn.now()-Rr)),rn&&(rn=clearInterval(rn))):(rn||(pr=Cn.now(),rn=setInterval(Ig,Ic)),Ot=1,Pc(us))}}function ls(e,t,n){var r=new gr;return t=t==null?0:+t,r.restart(o=>{r.stop(),e(o+t)},t,n),r}var Lg=kr("start","end","cancel","interrupt"),jg=[],jc=0,ds=1,Xo=2,ar=3,fs=4,Yo=5,cr=6;function Dr(e,t,n,r,o,i){var s=e.__transition;if(!s)e.__transition={};else if(n in s)return;$g(e,n,{name:t,index:r,group:o,on:Lg,tween:jg,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:jc})}function hi(e,t){var n=ze(e,t);if(n.state>jc)throw new Error("too late; already scheduled");return n}function Ge(e,t){var n=ze(e,t);if(n.state>ar)throw new Error("too late; already running");return n}function ze(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function $g(e,t,n){var r=e.__transition,o;r[t]=n,n.timer=Lc(i,0,n.time);function i(u){n.state=ds,n.timer.restart(s,n.delay,n.time),n.delay<=u&&s(u-n.delay)}function s(u){var d,l,f,m;if(n.state!==ds)return c();for(d in r)if(m=r[d],m.name===n.name){if(m.state===ar)return ls(s);m.state===fs?(m.state=cr,m.timer.stop(),m.on.call("interrupt",e,e.__data__,m.index,m.group),delete r[d]):+d<t&&(m.state=cr,m.timer.stop(),m.on.call("cancel",e,e.__data__,m.index,m.group),delete r[d])}if(ls(function(){n.state===ar&&(n.state=fs,n.timer.restart(a,n.delay,n.time),a(u))}),n.state=Xo,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Xo){for(n.state=ar,o=new Array(f=n.tween.length),d=0,l=-1;d<f;++d)(m=n.tween[d].value.call(e,e.__data__,n.index,n.group))&&(o[++l]=m);o.length=l+1}}function a(u){for(var d=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(c),n.state=Yo,1),l=-1,f=o.length;++l<f;)o[l].call(e,d);n.state===Yo&&(n.on.call("end",e,e.__data__,n.index,n.group),c())}function c(){n.state=cr,n.timer.stop(),delete r[t];for(var u in r)return;delete e.__transition}}function ur(e,t){var n=e.__transition,r,o,i=!0,s;if(n){t=t==null?null:t+"";for(s in n){if((r=n[s]).name!==t){i=!1;continue}o=r.state>Xo&&r.state<Yo,r.state=cr,r.timer.stop(),r.on.call(o?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[s]}i&&delete e.__transition}}function Og(e){return this.each(function(){ur(this,e)})}function Fg(e,t){var n,r;return function(){var o=Ge(this,e),i=o.tween;if(i!==n){r=n=i;for(var s=0,a=r.length;s<a;++s)if(r[s].name===t){r=r.slice(),r.splice(s,1);break}}o.tween=r}}function Hg(e,t,n){var r,o;if(typeof n!="function")throw new Error;return function(){var i=Ge(this,e),s=i.tween;if(s!==r){o=(r=s).slice();for(var a={name:t,value:n},c=0,u=o.length;c<u;++c)if(o[c].name===t){o[c]=a;break}c===u&&o.push(a)}i.tween=o}}function zg(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=ze(this.node(),n).tween,o=0,i=r.length,s;o<i;++o)if((s=r[o]).name===e)return s.value;return null}return this.each((t==null?Fg:Hg)(n,e,t))}function mi(e,t,n){var r=e._id;return e.each(function(){var o=Ge(this,r);(o.value||(o.value={}))[t]=n.apply(this,arguments)}),function(o){return ze(o,r).value[t]}}function $c(e,t){var n;return(typeof t=="number"?ot:t instanceof bn?ss:(n=bn(t))?(t=n,ss):Cg)(e,t)}function Bg(e){return function(){this.removeAttribute(e)}}function Vg(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Xg(e,t,n){var r,o=n+"",i;return function(){var s=this.getAttribute(e);return s===o?null:s===r?i:i=t(r=s,n)}}function Yg(e,t,n){var r,o=n+"",i;return function(){var s=this.getAttributeNS(e.space,e.local);return s===o?null:s===r?i:i=t(r=s,n)}}function Wg(e,t,n){var r,o,i;return function(){var s,a=n(this),c;return a==null?void this.removeAttribute(e):(s=this.getAttribute(e),c=a+"",s===c?null:s===r&&c===o?i:(o=c,i=t(r=s,a)))}}function Gg(e,t,n){var r,o,i;return function(){var s,a=n(this),c;return a==null?void this.removeAttributeNS(e.space,e.local):(s=this.getAttributeNS(e.space,e.local),c=a+"",s===c?null:s===r&&c===o?i:(o=c,i=t(r=s,a)))}}function Ug(e,t){var n=Ar(e),r=n==="transform"?Mg:$c;return this.attrTween(e,typeof t=="function"?(n.local?Gg:Wg)(n,r,mi(this,"attr."+e,t)):t==null?(n.local?Vg:Bg)(n):(n.local?Yg:Xg)(n,r,t))}function Kg(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function qg(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function Zg(e,t){var n,r;function o(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&qg(e,i)),n}return o._value=t,o}function Qg(e,t){var n,r;function o(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&Kg(e,i)),n}return o._value=t,o}function Jg(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=Ar(e);return this.tween(n,(r.local?Zg:Qg)(r,t))}function e0(e,t){return function(){hi(this,e).delay=+t.apply(this,arguments)}}function t0(e,t){return t=+t,function(){hi(this,e).delay=t}}function n0(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?e0:t0)(t,e)):ze(this.node(),t).delay}function r0(e,t){return function(){Ge(this,e).duration=+t.apply(this,arguments)}}function o0(e,t){return t=+t,function(){Ge(this,e).duration=t}}function i0(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?r0:o0)(t,e)):ze(this.node(),t).duration}function s0(e,t){if(typeof t!="function")throw new Error;return function(){Ge(this,e).ease=t}}function a0(e){var t=this._id;return arguments.length?this.each(s0(t,e)):ze(this.node(),t).ease}function c0(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Ge(this,e).ease=n}}function u0(e){if(typeof e!="function")throw new Error;return this.each(c0(this._id,e))}function l0(e){typeof e!="function"&&(e=mc(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var i=t[o],s=i.length,a=r[o]=[],c,u=0;u<s;++u)(c=i[u])&&e.call(c,c.__data__,u,i)&&a.push(c);return new Ze(r,this._parents,this._name,this._id)}function d0(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,o=n.length,i=Math.min(r,o),s=new Array(r),a=0;a<i;++a)for(var c=t[a],u=n[a],d=c.length,l=s[a]=new Array(d),f,m=0;m<d;++m)(f=c[m]||u[m])&&(l[m]=f);for(;a<r;++a)s[a]=t[a];return new Ze(s,this._parents,this._name,this._id)}function f0(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function h0(e,t,n){var r,o,i=f0(t)?hi:Ge;return function(){var s=i(this,e),a=s.on;a!==r&&(o=(r=a).copy()).on(t,n),s.on=o}}function m0(e,t){var n=this._id;return arguments.length<2?ze(this.node(),n).on.on(e):this.each(h0(n,e,t))}function p0(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function g0(){return this.on("end.remove",p0(this._id))}function y0(e){var t=this._name,n=this._id;typeof e!="function"&&(e=ui(e));for(var r=this._groups,o=r.length,i=new Array(o),s=0;s<o;++s)for(var a=r[s],c=a.length,u=i[s]=new Array(c),d,l,f=0;f<c;++f)(d=a[f])&&(l=e.call(d,d.__data__,f,a))&&("__data__"in d&&(l.__data__=d.__data__),u[f]=l,Dr(u[f],t,n,f,u,ze(d,n)));return new Ze(i,this._parents,t,n)}function x0(e){var t=this._name,n=this._id;typeof e!="function"&&(e=hc(e));for(var r=this._groups,o=r.length,i=[],s=[],a=0;a<o;++a)for(var c=r[a],u=c.length,d,l=0;l<u;++l)if(d=c[l]){for(var f=e.call(d,d.__data__,l,c),m,p=ze(d,n),y=0,w=f.length;y<w;++y)(m=f[y])&&Dr(m,t,n,y,f,p);i.push(f),s.push(d)}return new Ze(i,s,t,n)}var v0=Rn.prototype.constructor;function w0(){return new v0(this._groups,this._parents)}function b0(e,t){var n,r,o;return function(){var i=$t(this,e),s=(this.style.removeProperty(e),$t(this,e));return i===s?null:i===n&&s===r?o:o=t(n=i,r=s)}}function Oc(e){return function(){this.style.removeProperty(e)}}function C0(e,t,n){var r,o=n+"",i;return function(){var s=$t(this,e);return s===o?null:s===r?i:i=t(r=s,n)}}function _0(e,t,n){var r,o,i;return function(){var s=$t(this,e),a=n(this),c=a+"";return a==null&&(c=a=(this.style.removeProperty(e),$t(this,e))),s===c?null:s===r&&c===o?i:(o=c,i=t(r=s,a))}}function E0(e,t){var n,r,o,i="style."+t,s="end."+i,a;return function(){var c=Ge(this,e),u=c.on,d=c.value[i]==null?a||(a=Oc(t)):void 0;(u!==n||o!==d)&&(r=(n=u).copy()).on(s,o=d),c.on=r}}function S0(e,t,n){var r=(e+="")=="transform"?Sg:$c;return t==null?this.styleTween(e,b0(e,r)).on("end.style."+e,Oc(e)):typeof t=="function"?this.styleTween(e,_0(e,r,mi(this,"style."+e,t))).each(E0(this._id,e)):this.styleTween(e,C0(e,r,t),n).on("end.style."+e,null)}function M0(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function N0(e,t,n){var r,o;function i(){var s=t.apply(this,arguments);return s!==o&&(r=(o=s)&&M0(e,s,n)),r}return i._value=t,i}function T0(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,N0(e,t,n??""))}function k0(e){return function(){this.textContent=e}}function A0(e){return function(){var t=e(this);this.textContent=t??""}}function R0(e){return this.tween("text",typeof e=="function"?A0(mi(this,"text",e)):k0(e==null?"":e+""))}function D0(e){return function(t){this.textContent=e.call(this,t)}}function I0(e){var t,n;function r(){var o=e.apply(this,arguments);return o!==n&&(t=(n=o)&&D0(o)),t}return r._value=e,r}function P0(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,I0(e))}function L0(){for(var e=this._name,t=this._id,n=Fc(),r=this._groups,o=r.length,i=0;i<o;++i)for(var s=r[i],a=s.length,c,u=0;u<a;++u)if(c=s[u]){var d=ze(c,t);Dr(c,e,n,u,s,{time:d.time+d.delay+d.duration,delay:0,duration:d.duration,ease:d.ease})}return new Ze(r,this._parents,e,n)}function j0(){var e,t,n=this,r=n._id,o=n.size();return new Promise(function(i,s){var a={value:s},c={value:function(){--o===0&&i()}};n.each(function(){var u=Ge(this,r),d=u.on;d!==e&&(t=(e=d).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(c)),u.on=t}),o===0&&i()})}var $0=0;function Ze(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function Fc(){return++$0}var Ue=Rn.prototype;Ze.prototype={constructor:Ze,select:y0,selectAll:x0,selectChild:Ue.selectChild,selectChildren:Ue.selectChildren,filter:l0,merge:d0,selection:w0,transition:L0,call:Ue.call,nodes:Ue.nodes,node:Ue.node,size:Ue.size,empty:Ue.empty,each:Ue.each,on:m0,attr:Ug,attrTween:Jg,style:S0,styleTween:T0,text:R0,textTween:P0,remove:g0,tween:zg,delay:n0,duration:i0,ease:a0,easeVarying:u0,end:j0,[Symbol.iterator]:Ue[Symbol.iterator]};function O0(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var F0={time:null,delay:0,duration:250,ease:O0};function H0(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function z0(e){var t,n;e instanceof Ze?(t=e._id,e=e._name):(t=Fc(),(n=F0).time=fi(),e=e==null?null:e+"");for(var r=this._groups,o=r.length,i=0;i<o;++i)for(var s=r[i],a=s.length,c,u=0;u<a;++u)(c=s[u])&&Dr(c,e,t,u,s,n||H0(c,t));return new Ze(r,this._parents,e,t)}Rn.prototype.interrupt=Og;Rn.prototype.transition=z0;const Un=e=>()=>e;function B0(e,{sourceEvent:t,target:n,transform:r,dispatch:o}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:o}})}function Ke(e,t,n){this.k=e,this.x=t,this.y=n}Ke.prototype={constructor:Ke,scale:function(e){return e===1?this:new Ke(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Ke(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Ir=new Ke(1,0,0);Hc.prototype=Ke.prototype;function Hc(e){for(;!e.__zoom;)if(!(e=e.parentNode))return Ir;return e.__zoom}function ho(e){e.stopImmediatePropagation()}function on(e){e.preventDefault(),e.stopImmediatePropagation()}function V0(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function X0(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function hs(){return this.__zoom||Ir}function Y0(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function W0(){return navigator.maxTouchPoints||"ontouchstart"in this}function G0(e,t,n){var r=e.invertX(t[0][0])-n[0][0],o=e.invertX(t[1][0])-n[1][0],i=e.invertY(t[0][1])-n[0][1],s=e.invertY(t[1][1])-n[1][1];return e.translate(o>r?(r+o)/2:Math.min(0,r)||Math.max(0,o),s>i?(i+s)/2:Math.min(0,i)||Math.max(0,s))}function zc(){var e=V0,t=X0,n=G0,r=Y0,o=W0,i=[0,1/0],s=[[-1/0,-1/0],[1/0,1/0]],a=250,c=Ag,u=kr("start","zoom","end"),d,l,f,m=500,p=150,y=0,w=10;function v(C){C.property("__zoom",hs).on("wheel.zoom",T,{passive:!1}).on("mousedown.zoom",A).on("dblclick.zoom",I).filter(o).on("touchstart.zoom",$).on("touchmove.zoom",O).on("touchend.zoom touchcancel.zoom",F).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}v.transform=function(C,P,E,R){var D=C.selection?C.selection():C;D.property("__zoom",hs),C!==D?N(C,P,E,R):D.interrupt().each(function(){L(this,arguments).event(R).start().zoom(null,typeof P=="function"?P.apply(this,arguments):P).end()})},v.scaleBy=function(C,P,E,R){v.scaleTo(C,function(){var D=this.__zoom.k,k=typeof P=="function"?P.apply(this,arguments):P;return D*k},E,R)},v.scaleTo=function(C,P,E,R){v.transform(C,function(){var D=t.apply(this,arguments),k=this.__zoom,H=E==null?x(D):typeof E=="function"?E.apply(this,arguments):E,z=k.invert(H),X=typeof P=="function"?P.apply(this,arguments):P;return n(b(_(k,X),H,z),D,s)},E,R)},v.translateBy=function(C,P,E,R){v.transform(C,function(){return n(this.__zoom.translate(typeof P=="function"?P.apply(this,arguments):P,typeof E=="function"?E.apply(this,arguments):E),t.apply(this,arguments),s)},null,R)},v.translateTo=function(C,P,E,R,D){v.transform(C,function(){var k=t.apply(this,arguments),H=this.__zoom,z=R==null?x(k):typeof R=="function"?R.apply(this,arguments):R;return n(Ir.translate(z[0],z[1]).scale(H.k).translate(typeof P=="function"?-P.apply(this,arguments):-P,typeof E=="function"?-E.apply(this,arguments):-E),k,s)},R,D)};function _(C,P){return P=Math.max(i[0],Math.min(i[1],P)),P===C.k?C:new Ke(P,C.x,C.y)}function b(C,P,E){var R=P[0]-E[0]*C.k,D=P[1]-E[1]*C.k;return R===C.x&&D===C.y?C:new Ke(C.k,R,D)}function x(C){return[(+C[0][0]+ +C[1][0])/2,(+C[0][1]+ +C[1][1])/2]}function N(C,P,E,R){C.on("start.zoom",function(){L(this,arguments).event(R).start()}).on("interrupt.zoom end.zoom",function(){L(this,arguments).event(R).end()}).tween("zoom",function(){var D=this,k=arguments,H=L(D,k).event(R),z=t.apply(D,k),X=E==null?x(z):typeof E=="function"?E.apply(D,k):E,ee=Math.max(z[1][0]-z[0][0],z[1][1]-z[0][1]),K=D.__zoom,Q=typeof P=="function"?P.apply(D,k):P,Z=c(K.invert(X).concat(ee/K.k),Q.invert(X).concat(ee/Q.k));return function(re){if(re===1)re=Q;else{var U=Z(re),Y=ee/U[2];re=new Ke(Y,X[0]-U[0]*Y,X[1]-U[1]*Y)}H.zoom(null,re)}})}function L(C,P,E){return!E&&C.__zooming||new M(C,P)}function M(C,P){this.that=C,this.args=P,this.active=0,this.sourceEvent=null,this.extent=t.apply(C,P),this.taps=0}M.prototype={event:function(C){return C&&(this.sourceEvent=C),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(C,P){return this.mouse&&C!=="mouse"&&(this.mouse[1]=P.invert(this.mouse[0])),this.touch0&&C!=="touch"&&(this.touch0[1]=P.invert(this.touch0[0])),this.touch1&&C!=="touch"&&(this.touch1[1]=P.invert(this.touch1[0])),this.that.__zoom=P,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(C){var P=Te(this.that).datum();u.call(C,this.that,new B0(C,{sourceEvent:this.sourceEvent,target:v,transform:this.that.__zoom,dispatch:u}),P)}};function T(C,...P){if(!e.apply(this,arguments))return;var E=L(this,P).event(C),R=this.__zoom,D=Math.max(i[0],Math.min(i[1],R.k*Math.pow(2,r.apply(this,arguments)))),k=je(C);if(E.wheel)(E.mouse[0][0]!==k[0]||E.mouse[0][1]!==k[1])&&(E.mouse[1]=R.invert(E.mouse[0]=k)),clearTimeout(E.wheel);else{if(R.k===D)return;E.mouse=[k,R.invert(k)],ur(this),E.start()}on(C),E.wheel=setTimeout(H,p),E.zoom("mouse",n(b(_(R,D),E.mouse[0],E.mouse[1]),E.extent,s));function H(){E.wheel=null,E.end()}}function A(C,...P){if(f||!e.apply(this,arguments))return;var E=C.currentTarget,R=L(this,P,!0).event(C),D=Te(C.view).on("mousemove.zoom",X,!0).on("mouseup.zoom",ee,!0),k=je(C,E),H=C.clientX,z=C.clientY;Ec(C.view),ho(C),R.mouse=[k,this.__zoom.invert(k)],ur(this),R.start();function X(K){if(on(K),!R.moved){var Q=K.clientX-H,Z=K.clientY-z;R.moved=Q*Q+Z*Z>y}R.event(K).zoom("mouse",n(b(R.that.__zoom,R.mouse[0]=je(K,E),R.mouse[1]),R.extent,s))}function ee(K){D.on("mousemove.zoom mouseup.zoom",null),Sc(K.view,R.moved),on(K),R.event(K).end()}}function I(C,...P){if(e.apply(this,arguments)){var E=this.__zoom,R=je(C.changedTouches?C.changedTouches[0]:C,this),D=E.invert(R),k=E.k*(C.shiftKey?.5:2),H=n(b(_(E,k),R,D),t.apply(this,P),s);on(C),a>0?Te(this).transition().duration(a).call(N,H,R,C):Te(this).call(v.transform,H,R,C)}}function $(C,...P){if(e.apply(this,arguments)){var E=C.touches,R=E.length,D=L(this,P,C.changedTouches.length===R).event(C),k,H,z,X;for(ho(C),H=0;H<R;++H)z=E[H],X=je(z,this),X=[X,this.__zoom.invert(X),z.identifier],D.touch0?!D.touch1&&D.touch0[2]!==X[2]&&(D.touch1=X,D.taps=0):(D.touch0=X,k=!0,D.taps=1+!!d);d&&(d=clearTimeout(d)),k&&(D.taps<2&&(l=X[0],d=setTimeout(function(){d=null},m)),ur(this),D.start())}}function O(C,...P){if(this.__zooming){var E=L(this,P).event(C),R=C.changedTouches,D=R.length,k,H,z,X;for(on(C),k=0;k<D;++k)H=R[k],z=je(H,this),E.touch0&&E.touch0[2]===H.identifier?E.touch0[0]=z:E.touch1&&E.touch1[2]===H.identifier&&(E.touch1[0]=z);if(H=E.that.__zoom,E.touch1){var ee=E.touch0[0],K=E.touch0[1],Q=E.touch1[0],Z=E.touch1[1],re=(re=Q[0]-ee[0])*re+(re=Q[1]-ee[1])*re,U=(U=Z[0]-K[0])*U+(U=Z[1]-K[1])*U;H=_(H,Math.sqrt(re/U)),z=[(ee[0]+Q[0])/2,(ee[1]+Q[1])/2],X=[(K[0]+Z[0])/2,(K[1]+Z[1])/2]}else if(E.touch0)z=E.touch0[0],X=E.touch0[1];else return;E.zoom("touch",n(b(H,z,X),E.extent,s))}}function F(C,...P){if(this.__zooming){var E=L(this,P).event(C),R=C.changedTouches,D=R.length,k,H;for(ho(C),f&&clearTimeout(f),f=setTimeout(function(){f=null},m),k=0;k<D;++k)H=R[k],E.touch0&&E.touch0[2]===H.identifier?delete E.touch0:E.touch1&&E.touch1[2]===H.identifier&&delete E.touch1;if(E.touch1&&!E.touch0&&(E.touch0=E.touch1,delete E.touch1),E.touch0)E.touch0[1]=this.__zoom.invert(E.touch0[0]);else if(E.end(),E.taps===2&&(H=je(H,this),Math.hypot(l[0]-H[0],l[1]-H[1])<w)){var z=Te(this).on("dblclick.zoom");z&&z.apply(this,arguments)}}}return v.wheelDelta=function(C){return arguments.length?(r=typeof C=="function"?C:Un(+C),v):r},v.filter=function(C){return arguments.length?(e=typeof C=="function"?C:Un(!!C),v):e},v.touchable=function(C){return arguments.length?(o=typeof C=="function"?C:Un(!!C),v):o},v.extent=function(C){return arguments.length?(t=typeof C=="function"?C:Un([[+C[0][0],+C[0][1]],[+C[1][0],+C[1][1]]]),v):t},v.scaleExtent=function(C){return arguments.length?(i[0]=+C[0],i[1]=+C[1],v):[i[0],i[1]]},v.translateExtent=function(C){return arguments.length?(s[0][0]=+C[0][0],s[1][0]=+C[1][0],s[0][1]=+C[0][1],s[1][1]=+C[1][1],v):[[s[0][0],s[0][1]],[s[1][0],s[1][1]]]},v.constrain=function(C){return arguments.length?(n=C,v):n},v.duration=function(C){return arguments.length?(a=+C,v):a},v.interpolate=function(C){return arguments.length?(c=C,v):c},v.on=function(){var C=u.on.apply(u,arguments);return C===u?v:C},v.clickDistance=function(C){return arguments.length?(y=(C=+C)*C,v):Math.sqrt(y)},v.tapDistance=function(C){return arguments.length?(w=+C,v):w},v}const Qe={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,{id:t,sourceHandle:n,targetHandle:r})=>`Couldn't create edge for ${e} handle id: "${e==="source"?n:r}", edge id: ${t}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(e="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${e}/dist/style.css' or base.css to make sure everything is working properly.`,error014:()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID."},_n=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],Bc=["Enter"," ","Escape"];var Ft;(function(e){e.Strict="strict",e.Loose="loose"})(Ft||(Ft={}));var wt;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(wt||(wt={}));var En;(function(e){e.Partial="partial",e.Full="full"})(En||(En={}));const Vc={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null};var it;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(it||(it={}));var yr;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(yr||(yr={}));var te;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(te||(te={}));const ms={[te.Left]:te.Right,[te.Right]:te.Left,[te.Top]:te.Bottom,[te.Bottom]:te.Top};function Xc(e){return e===null?null:e?"valid":"invalid"}const Yc=e=>"id"in e&&"source"in e&&"target"in e,U0=e=>"id"in e&&"position"in e&&!("source"in e)&&!("target"in e),pi=e=>"id"in e&&"internals"in e&&!("source"in e)&&!("target"in e),In=(e,t=[0,0])=>{const{width:n,height:r}=Je(e),o=e.origin??t,i=n*o[0],s=r*o[1];return{x:e.position.x-i,y:e.position.y-s}},K0=(e,t={nodeOrigin:[0,0],nodeLookup:void 0})=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((r,o)=>{const i=typeof o=="string";let s=!t.nodeLookup&&!i?o:void 0;t.nodeLookup&&(s=i?t.nodeLookup.get(o):pi(o)?o:t.nodeLookup.get(o.id));const a=s?xr(s,t.nodeOrigin):{x:0,y:0,x2:0,y2:0};return Pr(r,a)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return Lr(n)},Pn=(e,t={})=>{if(e.size===0)return{x:0,y:0,width:0,height:0};let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0};return e.forEach(r=>{if(t.filter===void 0||t.filter(r)){const o=xr(r);n=Pr(n,o)}}),Lr(n)},Wc=(e,t,[n,r,o]=[0,0,1],i=!1,s=!1)=>{const a={...Ln(t,[n,r,o]),width:t.width/o,height:t.height/o},c=[];for(const u of e.values()){const{measured:d,selectable:l=!0,hidden:f=!1}=u;if(s&&!l||f)continue;const m=d.width??u.width??u.initialWidth??null,p=d.height??u.height??u.initialHeight??null,y=Sn(a,zt(u)),w=(m??0)*(p??0),v=i&&y>0;(!u.internals.handleBounds||v||y>=w||u.dragging)&&c.push(u)}return c},q0=(e,t)=>{const n=new Set;return e.forEach(r=>{n.add(r.id)}),t.filter(r=>n.has(r.source)||n.has(r.target))};function Wo(e,t){const n=new Map,r=t!=null&&t.nodes?new Set(t.nodes.map(o=>o.id)):null;return e.forEach(o=>{o.measured.width&&o.measured.height&&((t==null?void 0:t.includeHiddenNodes)||!o.hidden)&&(!r||r.has(o.id))&&n.set(o.id,o)}),n}async function Go({nodes:e,width:t,height:n,panZoom:r,minZoom:o,maxZoom:i},s){if(e.size===0)return Promise.resolve(!1);const a=Pn(e),c=gi(a,t,n,(s==null?void 0:s.minZoom)??o,(s==null?void 0:s.maxZoom)??i,(s==null?void 0:s.padding)??.1);return await r.setViewport(c,{duration:s==null?void 0:s.duration}),Promise.resolve(!0)}function Gc({nodeId:e,nextPosition:t,nodeLookup:n,nodeOrigin:r=[0,0],nodeExtent:o,onError:i}){const s=n.get(e),a=s.parentId?n.get(s.parentId):void 0,{x:c,y:u}=a?a.internals.positionAbsolute:{x:0,y:0},d=s.origin??r;let l=o;if(s.extent==="parent"&&!s.expandParent)if(!a)i==null||i("005",Qe.error005());else{const m=a.measured.width,p=a.measured.height;m&&p&&(l=[[c,u],[c+m,u+p]])}else a&&Bt(s.extent)&&(l=[[s.extent[0][0]+c,s.extent[0][1]+u],[s.extent[1][0]+c,s.extent[1][1]+u]]);const f=Bt(l)?Ct(t,l,s.measured):t;return{position:{x:f.x-c+s.measured.width*d[0],y:f.y-u+s.measured.height*d[1]},positionAbsolute:f}}async function Z0({nodesToRemove:e=[],edgesToRemove:t=[],nodes:n,edges:r,onBeforeDelete:o}){const i=new Set(e.map(f=>f.id)),s=[];for(const f of n){if(f.deletable===!1)continue;const m=i.has(f.id),p=!m&&f.parentId&&s.find(y=>y.id===f.parentId);(m||p)&&s.push(f)}const a=new Set(t.map(f=>f.id)),c=r.filter(f=>f.deletable!==!1),d=q0(s,c);for(const f of c)a.has(f.id)&&!d.find(p=>p.id===f.id)&&d.push(f);if(!o)return{edges:d,nodes:s};const l=await o({nodes:s,edges:d});return typeof l=="boolean"?l?{edges:d,nodes:s}:{edges:[],nodes:[]}:l}const Ht=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),Ct=(e={x:0,y:0},t,n)=>({x:Ht(e.x,t[0][0],t[1][0]-((n==null?void 0:n.width)??0)),y:Ht(e.y,t[0][1],t[1][1]-((n==null?void 0:n.height)??0))});function Uc(e,t,n){const{width:r,height:o}=Je(n),{x:i,y:s}=n.internals.positionAbsolute;return Ct(e,[[i,s],[i+r,s+o]],t)}const ps=(e,t,n)=>e<t?Ht(Math.abs(e-t),1,t)/t:e>n?-Ht(Math.abs(e-n),1,t)/t:0,Kc=(e,t,n=15,r=40)=>{const o=ps(e.x,r,t.width-r)*n,i=ps(e.y,r,t.height-r)*n;return[o,i]},Pr=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),Uo=({x:e,y:t,width:n,height:r})=>({x:e,y:t,x2:e+n,y2:t+r}),Lr=({x:e,y:t,x2:n,y2:r})=>({x:e,y:t,width:n-e,height:r-t}),zt=(e,t=[0,0])=>{var o,i;const{x:n,y:r}=pi(e)?e.internals.positionAbsolute:In(e,t);return{x:n,y:r,width:((o=e.measured)==null?void 0:o.width)??e.width??e.initialWidth??0,height:((i=e.measured)==null?void 0:i.height)??e.height??e.initialHeight??0}},xr=(e,t=[0,0])=>{var o,i;const{x:n,y:r}=pi(e)?e.internals.positionAbsolute:In(e,t);return{x:n,y:r,x2:n+(((o=e.measured)==null?void 0:o.width)??e.width??e.initialWidth??0),y2:r+(((i=e.measured)==null?void 0:i.height)??e.height??e.initialHeight??0)}},qc=(e,t)=>Lr(Pr(Uo(e),Uo(t))),Sn=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),r=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*r)},gs=e=>Oe(e.width)&&Oe(e.height)&&Oe(e.x)&&Oe(e.y),Oe=e=>!isNaN(e)&&isFinite(e),Q0=(e,t)=>{},jr=(e,t=[1,1])=>({x:t[0]*Math.round(e.x/t[0]),y:t[1]*Math.round(e.y/t[1])}),Ln=({x:e,y:t},[n,r,o],i=!1,s=[1,1])=>{const a={x:(e-n)/o,y:(t-r)/o};return i?jr(a,s):a},Zc=({x:e,y:t},[n,r,o])=>({x:e*o+n,y:t*o+r}),gi=(e,t,n,r,o,i)=>{const s=t/(e.width*(1+i)),a=n/(e.height*(1+i)),c=Math.min(s,a),u=Ht(c,r,o),d=e.x+e.width/2,l=e.y+e.height/2,f=t/2-d*u,m=n/2-l*u;return{x:f,y:m,zoom:u}},vr=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0};function Bt(e){return e!==void 0&&e!=="parent"}function Je(e){var t,n;return{width:((t=e.measured)==null?void 0:t.width)??e.width??e.initialWidth??0,height:((n=e.measured)==null?void 0:n.height)??e.height??e.initialHeight??0}}function Qc(e){var t,n;return(((t=e.measured)==null?void 0:t.width)??e.width??e.initialWidth)!==void 0&&(((n=e.measured)==null?void 0:n.height)??e.height??e.initialHeight)!==void 0}function Jc(e,t={width:0,height:0},n,r,o){const i={...e},s=r.get(n);if(s){const a=s.origin||o;i.x+=s.internals.positionAbsolute.x-(t.width??0)*a[0],i.y+=s.internals.positionAbsolute.y-(t.height??0)*a[1]}return i}function ys(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function pn(e,{snapGrid:t=[0,0],snapToGrid:n=!1,transform:r,containerBounds:o}){const{x:i,y:s}=qe(e),a=Ln({x:i-((o==null?void 0:o.left)??0),y:s-((o==null?void 0:o.top)??0)},r),{x:c,y:u}=n?jr(a,t):a;return{xSnapped:c,ySnapped:u,...a}}const $r=e=>({width:e.offsetWidth,height:e.offsetHeight}),eu=e=>{var t;return((t=e==null?void 0:e.getRootNode)==null?void 0:t.call(e))||(window==null?void 0:window.document)},J0=["INPUT","SELECT","TEXTAREA"];function Ko(e){var r,o;const t=((o=(r=e.composedPath)==null?void 0:r.call(e))==null?void 0:o[0])||e.target;return(t==null?void 0:t.nodeType)!==1?!1:J0.includes(t.nodeName)||t.hasAttribute("contenteditable")||!!t.closest(".nokey")}const tu=e=>"clientX"in e,qe=(e,t)=>{var i,s;const n=tu(e),r=n?e.clientX:(i=e.touches)==null?void 0:i[0].clientX,o=n?e.clientY:(s=e.touches)==null?void 0:s[0].clientY;return{x:r-((t==null?void 0:t.left)??0),y:o-((t==null?void 0:t.top)??0)}},xs=(e,t,n,r,o)=>{const i=t.querySelectorAll(`.${e}`);return!i||!i.length?null:Array.from(i).map(s=>{const a=s.getBoundingClientRect();return{id:s.getAttribute("data-handleid"),type:e,nodeId:o,position:s.getAttribute("data-handlepos"),x:(a.left-n.left)/r,y:(a.top-n.top)/r,...$r(s)}})};function nu({sourceX:e,sourceY:t,targetX:n,targetY:r,sourceControlX:o,sourceControlY:i,targetControlX:s,targetControlY:a}){const c=e*.125+o*.375+s*.375+n*.125,u=t*.125+i*.375+a*.375+r*.125,d=Math.abs(c-e),l=Math.abs(u-t);return[c,u,d,l]}function Kn(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function vs({pos:e,x1:t,y1:n,x2:r,y2:o,c:i}){switch(e){case te.Left:return[t-Kn(t-r,i),n];case te.Right:return[t+Kn(r-t,i),n];case te.Top:return[t,n-Kn(n-o,i)];case te.Bottom:return[t,n+Kn(o-n,i)]}}function ru({sourceX:e,sourceY:t,sourcePosition:n=te.Bottom,targetX:r,targetY:o,targetPosition:i=te.Top,curvature:s=.25}){const[a,c]=vs({pos:n,x1:e,y1:t,x2:r,y2:o,c:s}),[u,d]=vs({pos:i,x1:r,y1:o,x2:e,y2:t,c:s}),[l,f,m,p]=nu({sourceX:e,sourceY:t,targetX:r,targetY:o,sourceControlX:a,sourceControlY:c,targetControlX:u,targetControlY:d});return[`M${e},${t} C${a},${c} ${u},${d} ${r},${o}`,l,f,m,p]}function ou({sourceX:e,sourceY:t,targetX:n,targetY:r}){const o=Math.abs(n-e)/2,i=n<e?n+o:n-o,s=Math.abs(r-t)/2,a=r<t?r+s:r-s;return[i,a,o,s]}function ey({sourceNode:e,targetNode:t,selected:n=!1,zIndex:r=0,elevateOnSelect:o=!1}){if(!o)return r;const i=n||t.selected||e.selected,s=Math.max(e.internals.z||0,t.internals.z||0,1e3);return r+(i?s:0)}function ty({sourceNode:e,targetNode:t,width:n,height:r,transform:o}){const i=Pr(xr(e),xr(t));i.x===i.x2&&(i.x2+=1),i.y===i.y2&&(i.y2+=1);const s={x:-o[0]/o[2],y:-o[1]/o[2],width:n/o[2],height:r/o[2]};return Sn(s,Lr(i))>0}const ny=({source:e,sourceHandle:t,target:n,targetHandle:r})=>`xy-edge__${e}${t||""}-${n}${r||""}`,ry=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),oy=(e,t)=>{if(!e.source||!e.target)return t;let n;return Yc(e)?n={...e}:n={...e,id:ny(e)},ry(n,t)?t:(n.sourceHandle===null&&delete n.sourceHandle,n.targetHandle===null&&delete n.targetHandle,t.concat(n))};function iu({sourceX:e,sourceY:t,targetX:n,targetY:r}){const[o,i,s,a]=ou({sourceX:e,sourceY:t,targetX:n,targetY:r});return[`M ${e},${t}L ${n},${r}`,o,i,s,a]}const ws={[te.Left]:{x:-1,y:0},[te.Right]:{x:1,y:0},[te.Top]:{x:0,y:-1},[te.Bottom]:{x:0,y:1}},iy=({source:e,sourcePosition:t=te.Bottom,target:n})=>t===te.Left||t===te.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},bs=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function sy({source:e,sourcePosition:t=te.Bottom,target:n,targetPosition:r=te.Top,center:o,offset:i}){const s=ws[t],a=ws[r],c={x:e.x+s.x*i,y:e.y+s.y*i},u={x:n.x+a.x*i,y:n.y+a.y*i},d=iy({source:c,sourcePosition:t,target:u}),l=d.x!==0?"x":"y",f=d[l];let m=[],p,y;const w={x:0,y:0},v={x:0,y:0},[_,b,x,N]=ou({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(s[l]*a[l]===-1){p=o.x??_,y=o.y??b;const M=[{x:p,y:c.y},{x:p,y:u.y}],T=[{x:c.x,y},{x:u.x,y}];s[l]===f?m=l==="x"?M:T:m=l==="x"?T:M}else{const M=[{x:c.x,y:u.y}],T=[{x:u.x,y:c.y}];if(l==="x"?m=s.x===f?T:M:m=s.y===f?M:T,t===r){const F=Math.abs(e[l]-n[l]);if(F<=i){const C=Math.min(i-1,i-F);s[l]===f?w[l]=(c[l]>e[l]?-1:1)*C:v[l]=(u[l]>n[l]?-1:1)*C}}if(t!==r){const F=l==="x"?"y":"x",C=s[l]===a[F],P=c[F]>u[F],E=c[F]<u[F];(s[l]===1&&(!C&&P||C&&E)||s[l]!==1&&(!C&&E||C&&P))&&(m=l==="x"?M:T)}const A={x:c.x+w.x,y:c.y+w.y},I={x:u.x+v.x,y:u.y+v.y},$=Math.max(Math.abs(A.x-m[0].x),Math.abs(I.x-m[0].x)),O=Math.max(Math.abs(A.y-m[0].y),Math.abs(I.y-m[0].y));$>=O?(p=(A.x+I.x)/2,y=m[0].y):(p=m[0].x,y=(A.y+I.y)/2)}return[[e,{x:c.x+w.x,y:c.y+w.y},...m,{x:u.x+v.x,y:u.y+v.y},n],p,y,x,N]}function ay(e,t,n,r){const o=Math.min(bs(e,t)/2,bs(t,n)/2,r),{x:i,y:s}=t;if(e.x===i&&i===n.x||e.y===s&&s===n.y)return`L${i} ${s}`;if(e.y===s){const u=e.x<n.x?-1:1,d=e.y<n.y?1:-1;return`L ${i+o*u},${s}Q ${i},${s} ${i},${s+o*d}`}const a=e.x<n.x?1:-1,c=e.y<n.y?-1:1;return`L ${i},${s+o*c}Q ${i},${s} ${i+o*a},${s}`}function qo({sourceX:e,sourceY:t,sourcePosition:n=te.Bottom,targetX:r,targetY:o,targetPosition:i=te.Top,borderRadius:s=5,centerX:a,centerY:c,offset:u=20}){const[d,l,f,m,p]=sy({source:{x:e,y:t},sourcePosition:n,target:{x:r,y:o},targetPosition:i,center:{x:a,y:c},offset:u});return[d.reduce((w,v,_)=>{let b="";return _>0&&_<d.length-1?b=ay(d[_-1],v,d[_+1],s):b=`${_===0?"M":"L"}${v.x} ${v.y}`,w+=b,w},""),l,f,m,p]}function Cs(e){var t;return e&&!!(e.internals.handleBounds||(t=e.handles)!=null&&t.length)&&!!(e.measured.width||e.width||e.initialWidth)}function cy(e){var l;const{sourceNode:t,targetNode:n}=e;if(!Cs(t)||!Cs(n))return null;const r=t.internals.handleBounds||_s(t.handles),o=n.internals.handleBounds||_s(n.handles),i=Es((r==null?void 0:r.source)??[],e.sourceHandle),s=Es(e.connectionMode===Ft.Strict?(o==null?void 0:o.target)??[]:((o==null?void 0:o.target)??[]).concat((o==null?void 0:o.source)??[]),e.targetHandle);if(!i||!s)return(l=e.onError)==null||l.call(e,"008",Qe.error008(i?"target":"source",{id:e.id,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle})),null;const a=(i==null?void 0:i.position)||te.Bottom,c=(s==null?void 0:s.position)||te.Top,u=Mn(t,i,a),d=Mn(n,s,c);return{sourceX:u.x,sourceY:u.y,targetX:d.x,targetY:d.y,sourcePosition:a,targetPosition:c}}function _s(e){if(!e)return null;const t=[],n=[];for(const r of e)r.width=r.width??1,r.height=r.height??1,r.type==="source"?t.push(r):r.type==="target"&&n.push(r);return{source:t,target:n}}function Mn(e,t,n=te.Left,r=!1){const o=((t==null?void 0:t.x)??0)+e.internals.positionAbsolute.x,i=((t==null?void 0:t.y)??0)+e.internals.positionAbsolute.y,{width:s,height:a}=t??Je(e);if(r)return{x:o+s/2,y:i+a/2};switch((t==null?void 0:t.position)??n){case te.Top:return{x:o+s/2,y:i};case te.Right:return{x:o+s,y:i+a/2};case te.Bottom:return{x:o+s/2,y:i+a};case te.Left:return{x:o,y:i+a/2}}}function Es(e,t){return e&&(t?e.find(n=>n.id===t):e[0])||null}function Zo(e,t){return e?typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(r=>`${r}=${e[r]}`).join("&")}`:""}function uy(e,{id:t,defaultColor:n,defaultMarkerStart:r,defaultMarkerEnd:o}){const i=new Set;return e.reduce((s,a)=>([a.markerStart||r,a.markerEnd||o].forEach(c=>{if(c&&typeof c=="object"){const u=Zo(c,t);i.has(u)||(s.push({id:u,color:c.color||n,...c}),i.add(u))}}),s),[]).sort((s,a)=>s.id.localeCompare(a.id))}const yi={nodeOrigin:[0,0],nodeExtent:_n,elevateNodesOnSelect:!0,defaults:{}},ly={...yi,checkEquality:!0};function xi(e,t){const n={...e};for(const r in t)t[r]!==void 0&&(n[r]=t[r]);return n}function dy(e,t,n){const r=xi(yi,n);for(const o of e.values())if(o.parentId)vi(o,e,t,r);else{const i=In(o,r.nodeOrigin),s=Bt(o.extent)?o.extent:r.nodeExtent,a=Ct(i,s,Je(o));o.internals.positionAbsolute=a}}function Qo(e,t,n,r){var a,c;const o=xi(ly,r),i=new Map(t),s=o!=null&&o.elevateNodesOnSelect?1e3:0;t.clear(),n.clear();for(const u of e){let d=i.get(u.id);if(o.checkEquality&&u===(d==null?void 0:d.internals.userNode))t.set(u.id,d);else{const l=In(u,o.nodeOrigin),f=Bt(u.extent)?u.extent:o.nodeExtent,m=Ct(l,f,Je(u));d={...o.defaults,...u,measured:{width:(a=u.measured)==null?void 0:a.width,height:(c=u.measured)==null?void 0:c.height},internals:{positionAbsolute:m,handleBounds:u.measured?d==null?void 0:d.internals.handleBounds:void 0,z:su(u,s),userNode:u}},t.set(u.id,d)}u.parentId&&vi(d,t,n,r)}}function fy(e,t){if(!e.parentId)return;const n=t.get(e.parentId);n?n.set(e.id,e):t.set(e.parentId,new Map([[e.id,e]]))}function vi(e,t,n,r){const{elevateNodesOnSelect:o,nodeOrigin:i,nodeExtent:s}=xi(yi,r),a=e.parentId,c=t.get(a);if(!c){console.warn(`Parent node ${a} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}fy(e,n);const u=o?1e3:0,{x:d,y:l,z:f}=hy(e,c,i,s,u),{positionAbsolute:m}=e.internals,p=d!==m.x||l!==m.y;(p||f!==e.internals.z)&&t.set(e.id,{...e,internals:{...e.internals,positionAbsolute:p?{x:d,y:l}:m,z:f}})}function su(e,t){return(Oe(e.zIndex)?e.zIndex:0)+(e.selected?t:0)}function hy(e,t,n,r,o){const{x:i,y:s}=t.internals.positionAbsolute,a=Je(e),c=In(e,n),u=Bt(e.extent)?Ct(c,e.extent,a):c;let d=Ct({x:i+u.x,y:s+u.y},r,a);e.extent==="parent"&&(d=Uc(d,a,t));const l=su(e,o),f=t.internals.z??0;return{x:d.x,y:d.y,z:f>l?f:l}}function wi(e,t,n,r=[0,0]){var s;const o=[],i=new Map;for(const a of e){const c=t.get(a.parentId);if(!c)continue;const u=((s=i.get(a.parentId))==null?void 0:s.expandedRect)??zt(c),d=qc(u,a.rect);i.set(a.parentId,{expandedRect:d,parent:c})}return i.size>0&&i.forEach(({expandedRect:a,parent:c},u)=>{var b;const d=c.internals.positionAbsolute,l=Je(c),f=c.origin??r,m=a.x<d.x?Math.round(Math.abs(d.x-a.x)):0,p=a.y<d.y?Math.round(Math.abs(d.y-a.y)):0,y=Math.max(l.width,Math.round(a.width)),w=Math.max(l.height,Math.round(a.height)),v=(y-l.width)*f[0],_=(w-l.height)*f[1];(m>0||p>0||v||_)&&(o.push({id:u,type:"position",position:{x:c.position.x-m+v,y:c.position.y-p+_}}),(b=n.get(u))==null||b.forEach(x=>{e.some(N=>N.id===x.id)||o.push({id:x.id,type:"position",position:{x:x.position.x+m,y:x.position.y+p}})})),(l.width<a.width||l.height<a.height||m||p)&&o.push({id:u,type:"dimensions",setAttributes:!0,dimensions:{width:y+(m?f[0]*m-v:0),height:w+(p?f[1]*p-_:0)}})}),o}function my(e,t,n,r,o,i){const s=r==null?void 0:r.querySelector(".xyflow__viewport");let a=!1;if(!s)return{changes:[],updatedInternals:a};const c=[],u=window.getComputedStyle(s),{m22:d}=new window.DOMMatrixReadOnly(u.transform),l=[];for(const f of e.values()){const m=t.get(f.id);if(!m)continue;if(m.hidden){t.set(m.id,{...m,internals:{...m.internals,handleBounds:void 0}}),a=!0;continue}const p=$r(f.nodeElement),y=m.measured.width!==p.width||m.measured.height!==p.height;if(!!(p.width&&p.height&&(y||!m.internals.handleBounds||f.force))){const v=f.nodeElement.getBoundingClientRect(),_=Bt(m.extent)?m.extent:i;let{positionAbsolute:b}=m.internals;m.parentId&&m.extent==="parent"?b=Uc(b,p,t.get(m.parentId)):_&&(b=Ct(b,_,p));const x={...m,measured:p,internals:{...m.internals,positionAbsolute:b,handleBounds:{source:xs("source",f.nodeElement,v,d,m.id),target:xs("target",f.nodeElement,v,d,m.id)}}};t.set(m.id,x),m.parentId&&vi(x,t,n,{nodeOrigin:o}),a=!0,y&&(c.push({id:m.id,type:"dimensions",dimensions:p}),m.expandParent&&m.parentId&&l.push({id:m.id,parentId:m.parentId,rect:zt(x,o)}))}}if(l.length>0){const f=wi(l,t,n,o);c.push(...f)}return{changes:c,updatedInternals:a}}async function py({delta:e,panZoom:t,transform:n,translateExtent:r,width:o,height:i}){if(!t||!e.x&&!e.y)return Promise.resolve(!1);const s=await t.setViewportConstrained({x:n[0]+e.x,y:n[1]+e.y,zoom:n[2]},[[0,0],[o,i]],r),a=!!s&&(s.x!==n[0]||s.y!==n[1]||s.k!==n[2]);return Promise.resolve(a)}function Ss(e,t,n,r,o,i){let s=o;const a=r.get(s)||new Map;r.set(s,a.set(n,t)),s=`${o}-${e}`;const c=r.get(s)||new Map;if(r.set(s,c.set(n,t)),i){s=`${o}-${e}-${i}`;const u=r.get(s)||new Map;r.set(s,u.set(n,t))}}function au(e,t,n){e.clear(),t.clear();for(const r of n){const{source:o,target:i,sourceHandle:s=null,targetHandle:a=null}=r,c={edgeId:r.id,source:o,target:i,sourceHandle:s,targetHandle:a},u=`${o}-${s}--${i}-${a}`,d=`${i}-${a}--${o}-${s}`;Ss("source",c,d,e,o,s),Ss("target",c,u,e,i,a),t.set(r.id,r)}}function cu(e,t){if(!e.parentId)return!1;const n=t.get(e.parentId);return n?n.selected?!0:cu(n,t):!1}function Ms(e,t,n){var o;let r=e;do{if((o=r==null?void 0:r.matches)!=null&&o.call(r,t))return!0;if(r===n)return!1;r=r==null?void 0:r.parentElement}while(r);return!1}function gy(e,t,n,r){const o=new Map;for(const[i,s]of e)if((s.selected||s.id===r)&&(!s.parentId||!cu(s,e))&&(s.draggable||t&&typeof s.draggable>"u")){const a=e.get(i);a&&o.set(i,{id:i,position:a.position||{x:0,y:0},distance:{x:n.x-a.internals.positionAbsolute.x,y:n.y-a.internals.positionAbsolute.y},extent:a.extent,parentId:a.parentId,origin:a.origin,expandParent:a.expandParent,internals:{positionAbsolute:a.internals.positionAbsolute||{x:0,y:0}},measured:{width:a.measured.width??0,height:a.measured.height??0}})}return o}function mo({nodeId:e,dragItems:t,nodeLookup:n,dragging:r=!0}){var s,a,c;const o=[];for(const[u,d]of t){const l=(s=n.get(u))==null?void 0:s.internals.userNode;l&&o.push({...l,position:d.position,dragging:r})}if(!e)return[o[0],o];const i=(a=n.get(e))==null?void 0:a.internals.userNode;return[i?{...i,position:((c=t.get(e))==null?void 0:c.position)||i.position,dragging:r}:o[0],o]}function yy({onNodeMouseDown:e,getStoreItems:t,onDragStart:n,onDrag:r,onDragStop:o}){let i={x:null,y:null},s=0,a=new Map,c=!1,u={x:0,y:0},d=null,l=!1,f=null,m=!1;function p({noDragClassName:w,handleSelector:v,domNode:_,isSelectable:b,nodeId:x,nodeClickDistance:N=0}){f=Te(_);function L({x:I,y:$},O){const{nodeLookup:F,nodeExtent:C,snapGrid:P,snapToGrid:E,nodeOrigin:R,onNodeDrag:D,onSelectionDrag:k,onError:H,updateNodePositions:z}=t();i={x:I,y:$};let X=!1,ee={x:0,y:0,x2:0,y2:0};if(a.size>1&&C){const K=Pn(a);ee=Uo(K)}for(const[K,Q]of a){if(!F.has(K))continue;let Z={x:I-Q.distance.x,y:$-Q.distance.y};E&&(Z=jr(Z,P));let re=[[C[0][0],C[0][1]],[C[1][0],C[1][1]]];if(a.size>1&&C&&!Q.extent){const{positionAbsolute:oe}=Q.internals,ae=oe.x-ee.x+C[0][0],ne=oe.x+Q.measured.width-ee.x2+C[1][0],J=oe.y-ee.y+C[0][1],ue=oe.y+Q.measured.height-ee.y2+C[1][1];re=[[ae,J],[ne,ue]]}const{position:U,positionAbsolute:Y}=Gc({nodeId:K,nextPosition:Z,nodeLookup:F,nodeExtent:re,nodeOrigin:R,onError:H});X=X||Q.position.x!==U.x||Q.position.y!==U.y,Q.position=U,Q.internals.positionAbsolute=Y}if(X&&(z(a,!0),O&&(r||D||!x&&k))){const[K,Q]=mo({nodeId:x,dragItems:a,nodeLookup:F});r==null||r(O,a,K,Q),D==null||D(O,K,Q),x||k==null||k(O,Q)}}async function M(){if(!d)return;const{transform:I,panBy:$,autoPanSpeed:O}=t(),[F,C]=Kc(u,d,O);(F!==0||C!==0)&&(i.x=(i.x??0)-F/I[2],i.y=(i.y??0)-C/I[2],await $({x:F,y:C})&&L(i,null)),s=requestAnimationFrame(M)}function T(I){var X;const{nodeLookup:$,multiSelectionActive:O,nodesDraggable:F,transform:C,snapGrid:P,snapToGrid:E,selectNodesOnDrag:R,onNodeDragStart:D,onSelectionDragStart:k,unselectNodesAndEdges:H}=t();l=!0,(!R||!b)&&!O&&x&&((X=$.get(x))!=null&&X.selected||H()),b&&R&&x&&(e==null||e(x));const z=pn(I.sourceEvent,{transform:C,snapGrid:P,snapToGrid:E,containerBounds:d});if(i=z,a=gy($,F,z,x),a.size>0&&(n||D||!x&&k)){const[ee,K]=mo({nodeId:x,dragItems:a,nodeLookup:$});n==null||n(I.sourceEvent,a,ee,K),D==null||D(I.sourceEvent,ee,K),x||k==null||k(I.sourceEvent,K)}}const A=Mc().clickDistance(N).on("start",I=>{const{domNode:$,nodeDragThreshold:O,transform:F,snapGrid:C,snapToGrid:P}=t();d=($==null?void 0:$.getBoundingClientRect())||null,m=!1,O===0&&T(I),i=pn(I.sourceEvent,{transform:F,snapGrid:C,snapToGrid:P,containerBounds:d}),u=qe(I.sourceEvent,d)}).on("drag",I=>{const{autoPanOnNodeDrag:$,transform:O,snapGrid:F,snapToGrid:C,nodeDragThreshold:P,nodeLookup:E}=t(),R=pn(I.sourceEvent,{transform:O,snapGrid:F,snapToGrid:C,containerBounds:d});if((I.sourceEvent.type==="touchmove"&&I.sourceEvent.touches.length>1||x&&!E.has(x))&&(m=!0),!m){if(!c&&$&&l&&(c=!0,M()),!l){const D=R.xSnapped-(i.x??0),k=R.ySnapped-(i.y??0);Math.sqrt(D*D+k*k)>P&&T(I)}(i.x!==R.xSnapped||i.y!==R.ySnapped)&&a&&l&&(u=qe(I.sourceEvent,d),L(R,I.sourceEvent))}}).on("end",I=>{if(!(!l||m)&&(c=!1,l=!1,cancelAnimationFrame(s),a.size>0)){const{nodeLookup:$,updateNodePositions:O,onNodeDragStop:F,onSelectionDragStop:C}=t();if(O(a,!1),o||F||!x&&C){const[P,E]=mo({nodeId:x,dragItems:a,nodeLookup:$,dragging:!1});o==null||o(I.sourceEvent,a,P,E),F==null||F(I.sourceEvent,P,E),x||C==null||C(I.sourceEvent,E)}}}).filter(I=>{const $=I.target;return!I.button&&(!w||!Ms($,`.${w}`,_))&&(!v||Ms($,v,_))});f.call(A)}function y(){f==null||f.on(".drag",null)}return{update:p,destroy:y}}function xy(e,t,n){const r=[],o={x:e.x-n,y:e.y-n,width:n*2,height:n*2};for(const i of t.values())Sn(o,zt(i))>0&&r.push(i);return r}const vy=250;function wy(e,t,n,r){var a,c;let o=[],i=1/0;const s=xy(e,n,t+vy);for(const u of s){const d=[...((a=u.internals.handleBounds)==null?void 0:a.source)??[],...((c=u.internals.handleBounds)==null?void 0:c.target)??[]];for(const l of d){if(r.nodeId===l.nodeId&&r.type===l.type&&r.id===l.id)continue;const{x:f,y:m}=Mn(u,l,l.position,!0),p=Math.sqrt(Math.pow(f-e.x,2)+Math.pow(m-e.y,2));p>t||(p<i?(o=[{...l,x:f,y:m}],i=p):p===i&&o.push({...l,x:f,y:m}))}}if(!o.length)return null;if(o.length>1){const u=r.type==="source"?"target":"source";return o.find(d=>d.type===u)??o[0]}return o[0]}function uu(e,t,n,r,o,i=!1){var u,d,l;const s=r.get(e);if(!s)return null;const a=o==="strict"?(u=s.internals.handleBounds)==null?void 0:u[t]:[...((d=s.internals.handleBounds)==null?void 0:d.source)??[],...((l=s.internals.handleBounds)==null?void 0:l.target)??[]],c=(n?a==null?void 0:a.find(f=>f.id===n):a==null?void 0:a[0])??null;return c&&i?{...c,...Mn(s,c,c.position,!0)}:c}function lu(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function by(e,t){let n=null;return t?n=!0:e&&!t&&(n=!1),n}const du=()=>!0;function Cy(e,{connectionMode:t,connectionRadius:n,handleId:r,nodeId:o,edgeUpdaterType:i,isTarget:s,domNode:a,nodeLookup:c,lib:u,autoPanOnConnect:d,flowId:l,panBy:f,cancelConnection:m,onConnectStart:p,onConnect:y,onConnectEnd:w,isValidConnection:v=du,onReconnectEnd:_,updateConnection:b,getTransform:x,getFromHandle:N,autoPanSpeed:L}){const M=eu(e.target);let T=0,A;const{x:I,y:$}=qe(e),O=M==null?void 0:M.elementFromPoint(I,$),F=lu(i,O),C=a==null?void 0:a.getBoundingClientRect();if(!C||!F)return;const P=uu(o,F,r,c,t);if(!P)return;let E=qe(e,C),R=!1,D=null,k=!1,H=null;function z(){if(!d||!C)return;const[Y,oe]=Kc(E,C,L);f({x:Y,y:oe}),T=requestAnimationFrame(z)}const X={...P,nodeId:o,type:F,position:P.position},ee=c.get(o),Q={inProgress:!0,isValid:null,from:Mn(ee,X,te.Left,!0),fromHandle:X,fromPosition:X.position,fromNode:ee,to:E,toHandle:null,toPosition:ms[X.position],toNode:null};b(Q);let Z=Q;p==null||p(e,{nodeId:o,handleId:r,handleType:F});function re(Y){if(!N()||!X){U(Y);return}const oe=x();E=qe(Y,C),A=wy(Ln(E,oe,!1,[1,1]),n,c,X),R||(z(),R=!0);const ae=fu(Y,{handle:A,connectionMode:t,fromNodeId:o,fromHandleId:r,fromType:s?"target":"source",isValidConnection:v,doc:M,lib:u,flowId:l,nodeLookup:c});H=ae.handleDomNode,D=ae.connection,k=by(!!A,ae.isValid);const ne={...Z,isValid:k,to:A&&k?Zc({x:A.x,y:A.y},oe):E,toHandle:ae.toHandle,toPosition:k&&ae.toHandle?ae.toHandle.position:ms[X.position],toNode:ae.toHandle?c.get(ae.toHandle.nodeId):null};k&&A&&Z.toHandle&&ne.toHandle&&Z.toHandle.type===ne.toHandle.type&&Z.toHandle.nodeId===ne.toHandle.nodeId&&Z.toHandle.id===ne.toHandle.id&&Z.to.x===ne.to.x&&Z.to.y===ne.to.y||(b(ne),Z=ne)}function U(Y){(A||H)&&D&&k&&(y==null||y(D));const{inProgress:oe,...ae}=Z,ne={...ae,toPosition:Z.toHandle?Z.toPosition:null};w==null||w(Y,ne),i&&(_==null||_(Y,ne)),m(),cancelAnimationFrame(T),R=!1,k=!1,D=null,H=null,M.removeEventListener("mousemove",re),M.removeEventListener("mouseup",U),M.removeEventListener("touchmove",re),M.removeEventListener("touchend",U)}M.addEventListener("mousemove",re),M.addEventListener("mouseup",U),M.addEventListener("touchmove",re),M.addEventListener("touchend",U)}function fu(e,{handle:t,connectionMode:n,fromNodeId:r,fromHandleId:o,fromType:i,doc:s,lib:a,flowId:c,isValidConnection:u=du,nodeLookup:d}){const l=i==="target",f=t?s.querySelector(`.${a}-flow__handle[data-id="${c}-${t==null?void 0:t.nodeId}-${t==null?void 0:t.id}-${t==null?void 0:t.type}"]`):null,{x:m,y:p}=qe(e),y=s.elementFromPoint(m,p),w=y!=null&&y.classList.contains(`${a}-flow__handle`)?y:f,v={handleDomNode:w,isValid:!1,connection:null,toHandle:null};if(w){const _=lu(void 0,w),b=w.getAttribute("data-nodeid"),x=w.getAttribute("data-handleid"),N=w.classList.contains("connectable"),L=w.classList.contains("connectableend");if(!b||!_)return v;const M={source:l?b:r,sourceHandle:l?x:o,target:l?r:b,targetHandle:l?o:x};v.connection=M;const A=N&&L&&(n===Ft.Strict?l&&_==="source"||!l&&_==="target":b!==r||x!==o);v.isValid=A&&u(M),v.toHandle=uu(b,_,x,d,n,!1)}return v}const Jo={onPointerDown:Cy,isValid:fu};function _y({domNode:e,panZoom:t,getTransform:n,getViewScale:r}){const o=Te(e);function i({translateExtent:a,width:c,height:u,zoomStep:d=10,pannable:l=!0,zoomable:f=!0,inversePan:m=!1}){const p=b=>{const x=n();if(b.sourceEvent.type!=="wheel"||!t)return;const N=-b.sourceEvent.deltaY*(b.sourceEvent.deltaMode===1?.05:b.sourceEvent.deltaMode?1:.002)*d,L=x[2]*Math.pow(2,N);t.scaleTo(L)};let y=[0,0];const w=b=>{(b.sourceEvent.type==="mousedown"||b.sourceEvent.type==="touchstart")&&(y=[b.sourceEvent.clientX??b.sourceEvent.touches[0].clientX,b.sourceEvent.clientY??b.sourceEvent.touches[0].clientY])},v=b=>{const x=n();if(b.sourceEvent.type!=="mousemove"&&b.sourceEvent.type!=="touchmove"||!t)return;const N=[b.sourceEvent.clientX??b.sourceEvent.touches[0].clientX,b.sourceEvent.clientY??b.sourceEvent.touches[0].clientY],L=[N[0]-y[0],N[1]-y[1]];y=N;const M=r()*Math.max(x[2],Math.log(x[2]))*(m?-1:1),T={x:x[0]-L[0]*M,y:x[1]-L[1]*M},A=[[0,0],[c,u]];t.setViewportConstrained({x:T.x,y:T.y,zoom:x[2]},A,a)},_=zc().on("start",w).on("zoom",l?v:null).on("zoom.wheel",f?p:null);o.call(_,{})}function s(){o.on("zoom",null)}return{update:i,destroy:s,pointer:je}}const Ey=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,Or=e=>({x:e.x,y:e.y,zoom:e.k}),po=({x:e,y:t,zoom:n})=>Ir.translate(e,t).scale(n),kt=(e,t)=>e.target.closest(`.${t}`),hu=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),go=(e,t=0,n=()=>{})=>{const r=typeof t=="number"&&t>0;return r||n(),r?e.transition().duration(t).on("end",n):e},mu=e=>{const t=e.ctrlKey&&vr()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t};function Sy({zoomPanValues:e,noWheelClassName:t,d3Selection:n,d3Zoom:r,panOnScrollMode:o,panOnScrollSpeed:i,zoomOnPinch:s,onPanZoomStart:a,onPanZoom:c,onPanZoomEnd:u}){return d=>{if(kt(d,t))return!1;d.preventDefault(),d.stopImmediatePropagation();const l=n.property("__zoom").k||1;if(d.ctrlKey&&s){const w=je(d),v=mu(d),_=l*Math.pow(2,v);r.scaleTo(n,_,w,d);return}const f=d.deltaMode===1?20:1;let m=o===wt.Vertical?0:d.deltaX*f,p=o===wt.Horizontal?0:d.deltaY*f;!vr()&&d.shiftKey&&o!==wt.Vertical&&(m=d.deltaY*f,p=0),r.translateBy(n,-(m/l)*i,-(p/l)*i,{internal:!0});const y=Or(n.property("__zoom"));clearTimeout(e.panScrollTimeout),e.isPanScrolling||(e.isPanScrolling=!0,a==null||a(d,y)),e.isPanScrolling&&(c==null||c(d,y),e.panScrollTimeout=setTimeout(()=>{u==null||u(d,y),e.isPanScrolling=!1},150))}}function My({noWheelClassName:e,preventScrolling:t,d3ZoomHandler:n}){return function(r,o){if(!t&&r.type==="wheel"&&!r.ctrlKey||kt(r,e))return null;r.preventDefault(),n.call(this,r,o)}}function Ny({zoomPanValues:e,onDraggingChange:t,onPanZoomStart:n}){return r=>{var i,s,a;if((i=r.sourceEvent)!=null&&i.internal)return;const o=Or(r.transform);e.mouseButton=((s=r.sourceEvent)==null?void 0:s.button)||0,e.isZoomingOrPanning=!0,e.prevViewport=o,((a=r.sourceEvent)==null?void 0:a.type)==="mousedown"&&t(!0),n&&(n==null||n(r.sourceEvent,o))}}function Ty({zoomPanValues:e,panOnDrag:t,onPaneContextMenu:n,onTransformChange:r,onPanZoom:o}){return i=>{var s,a;e.usedRightMouseButton=!!(n&&hu(t,e.mouseButton??0)),(s=i.sourceEvent)!=null&&s.sync||r([i.transform.x,i.transform.y,i.transform.k]),o&&!((a=i.sourceEvent)!=null&&a.internal)&&(o==null||o(i.sourceEvent,Or(i.transform)))}}function ky({zoomPanValues:e,panOnDrag:t,panOnScroll:n,onDraggingChange:r,onPanZoomEnd:o,onPaneContextMenu:i}){return s=>{var a;if(!((a=s.sourceEvent)!=null&&a.internal)&&(e.isZoomingOrPanning=!1,i&&hu(t,e.mouseButton??0)&&!e.usedRightMouseButton&&s.sourceEvent&&i(s.sourceEvent),e.usedRightMouseButton=!1,r(!1),o&&Ey(e.prevViewport,s.transform))){const c=Or(s.transform);e.prevViewport=c,clearTimeout(e.timerId),e.timerId=setTimeout(()=>{o==null||o(s.sourceEvent,c)},n?150:0)}}}function Ay({zoomActivationKeyPressed:e,zoomOnScroll:t,zoomOnPinch:n,panOnDrag:r,panOnScroll:o,zoomOnDoubleClick:i,userSelectionActive:s,noWheelClassName:a,noPanClassName:c,lib:u}){return d=>{var p;const l=e||t,f=n&&d.ctrlKey;if(d.button===1&&d.type==="mousedown"&&(kt(d,`${u}-flow__node`)||kt(d,`${u}-flow__edge`)))return!0;if(!r&&!l&&!o&&!i&&!n||s||kt(d,a)&&d.type==="wheel"||kt(d,c)&&(d.type!=="wheel"||o&&d.type==="wheel"&&!e)||!n&&d.ctrlKey&&d.type==="wheel")return!1;if(!n&&d.type==="touchstart"&&((p=d.touches)==null?void 0:p.length)>1)return d.preventDefault(),!1;if(!l&&!o&&!f&&d.type==="wheel"||!r&&(d.type==="mousedown"||d.type==="touchstart")||Array.isArray(r)&&!r.includes(d.button)&&d.type==="mousedown")return!1;const m=Array.isArray(r)&&r.includes(d.button)||!d.button||d.button<=1;return(!d.ctrlKey||d.type==="wheel")&&m}}function Ry({domNode:e,minZoom:t,maxZoom:n,paneClickDistance:r,translateExtent:o,viewport:i,onPanZoom:s,onPanZoomStart:a,onPanZoomEnd:c,onDraggingChange:u}){const d={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{x:0,y:0,zoom:0},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},l=e.getBoundingClientRect(),f=zc().clickDistance(!Oe(r)||r<0?0:r).scaleExtent([t,n]).translateExtent(o),m=Te(e).call(f);b({x:i.x,y:i.y,zoom:Ht(i.zoom,t,n)},[[0,0],[l.width,l.height]],o);const p=m.on("wheel.zoom"),y=m.on("dblclick.zoom");f.wheelDelta(mu);function w(O,F){return m?new Promise(C=>{f==null||f.transform(go(m,F==null?void 0:F.duration,()=>C(!0)),O)}):Promise.resolve(!1)}function v({noWheelClassName:O,noPanClassName:F,onPaneContextMenu:C,userSelectionActive:P,panOnScroll:E,panOnDrag:R,panOnScrollMode:D,panOnScrollSpeed:k,preventScrolling:H,zoomOnPinch:z,zoomOnScroll:X,zoomOnDoubleClick:ee,zoomActivationKeyPressed:K,lib:Q,onTransformChange:Z}){P&&!d.isZoomingOrPanning&&_();const U=E&&!K&&!P?Sy({zoomPanValues:d,noWheelClassName:O,d3Selection:m,d3Zoom:f,panOnScrollMode:D,panOnScrollSpeed:k,zoomOnPinch:z,onPanZoomStart:a,onPanZoom:s,onPanZoomEnd:c}):My({noWheelClassName:O,preventScrolling:H,d3ZoomHandler:p});if(m.on("wheel.zoom",U,{passive:!1}),!P){const oe=Ny({zoomPanValues:d,onDraggingChange:u,onPanZoomStart:a});f.on("start",oe);const ae=Ty({zoomPanValues:d,panOnDrag:R,onPaneContextMenu:!!C,onPanZoom:s,onTransformChange:Z});f.on("zoom",ae);const ne=ky({zoomPanValues:d,panOnDrag:R,panOnScroll:E,onPaneContextMenu:C,onPanZoomEnd:c,onDraggingChange:u});f.on("end",ne)}const Y=Ay({zoomActivationKeyPressed:K,panOnDrag:R,zoomOnScroll:X,panOnScroll:E,zoomOnDoubleClick:ee,zoomOnPinch:z,userSelectionActive:P,noPanClassName:F,noWheelClassName:O,lib:Q});f.filter(Y),ee?m.on("dblclick.zoom",y):m.on("dblclick.zoom",null)}function _(){f.on("zoom",null)}async function b(O,F,C){const P=po(O),E=f==null?void 0:f.constrain()(P,F,C);return E&&await w(E),new Promise(R=>R(E))}async function x(O,F){const C=po(O);return await w(C,F),new Promise(P=>P(C))}function N(O){if(m){const F=po(O),C=m.property("__zoom");(C.k!==O.zoom||C.x!==O.x||C.y!==O.y)&&(f==null||f.transform(m,F,null,{sync:!0}))}}function L(){const O=m?Hc(m.node()):{x:0,y:0,k:1};return{x:O.x,y:O.y,zoom:O.k}}function M(O,F){return m?new Promise(C=>{f==null||f.scaleTo(go(m,F==null?void 0:F.duration,()=>C(!0)),O)}):Promise.resolve(!1)}function T(O,F){return m?new Promise(C=>{f==null||f.scaleBy(go(m,F==null?void 0:F.duration,()=>C(!0)),O)}):Promise.resolve(!1)}function A(O){f==null||f.scaleExtent(O)}function I(O){f==null||f.translateExtent(O)}function $(O){const F=!Oe(O)||O<0?0:O;f==null||f.clickDistance(F)}return{update:v,destroy:_,setViewport:x,setViewportConstrained:b,getViewport:L,scaleTo:M,scaleBy:T,setScaleExtent:A,setTranslateExtent:I,syncViewport:N,setClickDistance:$}}var Lt;(function(e){e.Line="line",e.Handle="handle"})(Lt||(Lt={}));const Dy=["top-left","top-right","bottom-left","bottom-right"],Iy=["top","right","bottom","left"];function Py({width:e,prevWidth:t,height:n,prevHeight:r,affectsX:o,affectsY:i}){const s=e-t,a=n-r,c=[s>0?1:s<0?-1:0,a>0?1:a<0?-1:0];return s&&o&&(c[0]=c[0]*-1),a&&i&&(c[1]=c[1]*-1),c}function Ly(e){const t=e.includes("right")||e.includes("left"),n=e.includes("bottom")||e.includes("top"),r=e.includes("left"),o=e.includes("top");return{isHorizontal:t,isVertical:n,affectsX:r,affectsY:o}}function et(e,t){return Math.max(0,t-e)}function tt(e,t){return Math.max(0,e-t)}function qn(e,t,n){return Math.max(0,t-e,e-n)}function Ns(e,t){return e?!t:t}function jy(e,t,n,r,o,i,s,a){let{affectsX:c,affectsY:u}=t;const{isHorizontal:d,isVertical:l}=t,f=d&&l,{xSnapped:m,ySnapped:p}=n,{minWidth:y,maxWidth:w,minHeight:v,maxHeight:_}=r,{x:b,y:x,width:N,height:L,aspectRatio:M}=e;let T=Math.floor(d?m-e.pointerX:0),A=Math.floor(l?p-e.pointerY:0);const I=N+(c?-T:T),$=L+(u?-A:A),O=-i[0]*N,F=-i[1]*L;let C=qn(I,y,w),P=qn($,v,_);if(s){let D=0,k=0;c&&T<0?D=et(b+T+O,s[0][0]):!c&&T>0&&(D=tt(b+I+O,s[1][0])),u&&A<0?k=et(x+A+F,s[0][1]):!u&&A>0&&(k=tt(x+$+F,s[1][1])),C=Math.max(C,D),P=Math.max(P,k)}if(a){let D=0,k=0;c&&T>0?D=tt(b+T,a[0][0]):!c&&T<0&&(D=et(b+I,a[1][0])),u&&A>0?k=tt(x+A,a[0][1]):!u&&A<0&&(k=et(x+$,a[1][1])),C=Math.max(C,D),P=Math.max(P,k)}if(o){if(d){const D=qn(I/M,v,_)*M;if(C=Math.max(C,D),s){let k=0;!c&&!u||c&&!u&&f?k=tt(x+F+I/M,s[1][1])*M:k=et(x+F+(c?T:-T)/M,s[0][1])*M,C=Math.max(C,k)}if(a){let k=0;!c&&!u||c&&!u&&f?k=et(x+I/M,a[1][1])*M:k=tt(x+(c?T:-T)/M,a[0][1])*M,C=Math.max(C,k)}}if(l){const D=qn($*M,y,w)/M;if(P=Math.max(P,D),s){let k=0;!c&&!u||u&&!c&&f?k=tt(b+$*M+O,s[1][0])/M:k=et(b+(u?A:-A)*M+O,s[0][0])/M,P=Math.max(P,k)}if(a){let k=0;!c&&!u||u&&!c&&f?k=et(b+$*M,a[1][0])/M:k=tt(b+(u?A:-A)*M,a[0][0])/M,P=Math.max(P,k)}}}A=A+(A<0?P:-P),T=T+(T<0?C:-C),o&&(f?I>$*M?A=(Ns(c,u)?-T:T)/M:T=(Ns(c,u)?-A:A)*M:d?(A=T/M,u=c):(T=A*M,c=u));const E=c?b+T:b,R=u?x+A:x;return{width:N+(c?-T:T),height:L+(u?-A:A),x:i[0]*T*(c?-1:1)+E,y:i[1]*A*(u?-1:1)+R}}const pu={width:0,height:0,x:0,y:0},$y={...pu,pointerX:0,pointerY:0,aspectRatio:1};function Oy(e){return[[0,0],[e.measured.width,e.measured.height]]}function Fy(e,t,n){const r=t.position.x+e.position.x,o=t.position.y+e.position.y,i=e.measured.width??0,s=e.measured.height??0,a=n[0]*i,c=n[1]*s;return[[r-a,o-c],[r+i-a,o+s-c]]}function Hy({domNode:e,nodeId:t,getStoreItems:n,onChange:r,onEnd:o}){const i=Te(e);function s({controlPosition:c,boundaries:u,keepAspectRatio:d,onResizeStart:l,onResize:f,onResizeEnd:m,shouldResize:p}){let y={...pu},w={...$y};const v=Ly(c);let _,b=null,x=[],N,L,M;const T=Mc().on("start",A=>{const{nodeLookup:I,transform:$,snapGrid:O,snapToGrid:F,nodeOrigin:C,paneDomNode:P}=n();if(_=I.get(t),!_)return;b=(P==null?void 0:P.getBoundingClientRect())??null;const{xSnapped:E,ySnapped:R}=pn(A.sourceEvent,{transform:$,snapGrid:O,snapToGrid:F,containerBounds:b});y={width:_.measured.width??0,height:_.measured.height??0,x:_.position.x??0,y:_.position.y??0},w={...y,pointerX:E,pointerY:R,aspectRatio:y.width/y.height},N=void 0,_.parentId&&(_.extent==="parent"||_.expandParent)&&(N=I.get(_.parentId),L=N&&_.extent==="parent"?Oy(N):void 0),x=[],M=void 0;for(const[D,k]of I)if(k.parentId===t&&(x.push({id:D,position:{...k.position},extent:k.extent}),k.extent==="parent"||k.expandParent)){const H=Fy(k,_,k.origin??C);M?M=[[Math.min(H[0][0],M[0][0]),Math.min(H[0][1],M[0][1])],[Math.max(H[1][0],M[1][0]),Math.max(H[1][1],M[1][1])]]:M=H}l==null||l(A,{...y})}).on("drag",A=>{const{transform:I,snapGrid:$,snapToGrid:O,nodeOrigin:F}=n(),C=pn(A.sourceEvent,{transform:I,snapGrid:$,snapToGrid:O,containerBounds:b}),P=[];if(!_)return;const{x:E,y:R,width:D,height:k}=y,H={},z=_.origin??F,{width:X,height:ee,x:K,y:Q}=jy(w,v,C,u,d,z,L,M),Z=X!==D,re=ee!==k,U=K!==E&&Z,Y=Q!==R&&re;if(!U&&!Y&&!Z&&!re)return;if((U||Y||z[0]===1||z[1]===1)&&(H.x=U?K:y.x,H.y=Y?Q:y.y,y.x=H.x,y.y=H.y,x.length>0)){const J=K-E,ue=Q-R;for(const ge of x)ge.position={x:ge.position.x-J+z[0]*(X-D),y:ge.position.y-ue+z[1]*(ee-k)},P.push(ge)}if((Z||re)&&(H.width=Z?X:y.width,H.height=re?ee:y.height,y.width=H.width,y.height=H.height),N&&_.expandParent){const J=z[0]*(H.width??0);H.x&&H.x<J&&(y.x=J,w.x=w.x-(H.x-J));const ue=z[1]*(H.height??0);H.y&&H.y<ue&&(y.y=ue,w.y=w.y-(H.y-ue))}const oe=Py({width:y.width,prevWidth:D,height:y.height,prevHeight:k,affectsX:v.affectsX,affectsY:v.affectsY}),ae={...y,direction:oe};(p==null?void 0:p(A,ae))!==!1&&(f==null||f(A,ae),r(H,P))}).on("end",A=>{m==null||m(A,{...y}),o==null||o()});i.call(T)}function a(){i.on(".drag",null)}return{update:s,destroy:a}}var gu={exports:{}},yu={},xu={exports:{}},vu={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vt=h;function zy(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var By=typeof Object.is=="function"?Object.is:zy,Vy=Vt.useState,Xy=Vt.useEffect,Yy=Vt.useLayoutEffect,Wy=Vt.useDebugValue;function Gy(e,t){var n=t(),r=Vy({inst:{value:n,getSnapshot:t}}),o=r[0].inst,i=r[1];return Yy(function(){o.value=n,o.getSnapshot=t,yo(o)&&i({inst:o})},[e,n,t]),Xy(function(){return yo(o)&&i({inst:o}),e(function(){yo(o)&&i({inst:o})})},[e]),Wy(n),n}function yo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!By(e,n)}catch{return!0}}function Uy(e,t){return t()}var Ky=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Uy:Gy;vu.useSyncExternalStore=Vt.useSyncExternalStore!==void 0?Vt.useSyncExternalStore:Ky;xu.exports=vu;var qy=xu.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fr=h,Zy=qy;function Qy(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Jy=typeof Object.is=="function"?Object.is:Qy,e1=Zy.useSyncExternalStore,t1=Fr.useRef,n1=Fr.useEffect,r1=Fr.useMemo,o1=Fr.useDebugValue;yu.useSyncExternalStoreWithSelector=function(e,t,n,r,o){var i=t1(null);if(i.current===null){var s={hasValue:!1,value:null};i.current=s}else s=i.current;i=r1(function(){function c(m){if(!u){if(u=!0,d=m,m=r(m),o!==void 0&&s.hasValue){var p=s.value;if(o(p,m))return l=p}return l=m}if(p=l,Jy(d,m))return p;var y=r(m);return o!==void 0&&o(p,y)?(d=m,p):(d=m,l=y)}var u=!1,d,l,f=n===void 0?null:n;return[function(){return c(t())},f===null?void 0:function(){return c(f())}]},[t,n,r,o]);var a=e1(e,i[0],i[1]);return n1(function(){s.hasValue=!0,s.value=a},[a]),o1(a),a};gu.exports=yu;var i1=gu.exports;const s1=qd(i1),a1={},Ts=e=>{let t;const n=new Set,r=(d,l)=>{const f=typeof d=="function"?d(t):d;if(!Object.is(f,t)){const m=t;t=l??(typeof f!="object"||f===null)?f:Object.assign({},t,f),n.forEach(p=>p(t,m))}},o=()=>t,c={setState:r,getState:o,getInitialState:()=>u,subscribe:d=>(n.add(d),()=>n.delete(d)),destroy:()=>{(a1?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},u=t=e(r,o,c);return c},c1=e=>e?Ts(e):Ts,{useDebugValue:u1}=Ce,{useSyncExternalStoreWithSelector:l1}=s1,d1=e=>e;function wu(e,t=d1,n){const r=l1(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return u1(r),r}const ks=(e,t)=>{const n=c1(e),r=(o,i=t)=>wu(n,o,i);return Object.assign(r,n),r},f1=(e,t)=>e?ks(e,t):ks;function ye(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[r,o]of e)if(!Object.is(o,t.get(r)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(t,r)||!Object.is(e[r],t[r]))return!1;return!0}const Hr=h.createContext(null),h1=Hr.Provider,bu=Qe.error001();function he(e,t){const n=h.useContext(Hr);if(n===null)throw new Error(bu);return wu(n,e,t)}function pe(){const e=h.useContext(Hr);if(e===null)throw new Error(bu);return h.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe}),[e])}const As={display:"none"},m1={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},Cu="react-flow__node-desc",_u="react-flow__edge-desc",p1="react-flow__aria-live",g1=e=>e.ariaLiveMessage;function y1({rfId:e}){const t=he(g1);return g.jsx("div",{id:`${p1}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:m1,children:t})}function x1({rfId:e,disableKeyboardA11y:t}){return g.jsxs(g.Fragment,{children:[g.jsxs("div",{id:`${Cu}-${e}`,style:As,children:["Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "]}),g.jsx("div",{id:`${_u}-${e}`,style:As,children:"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."}),!t&&g.jsx(y1,{rfId:e})]})}const v1=e=>e.userSelectionActive?"none":"all",bi=h.forwardRef(({position:e="top-left",children:t,className:n,style:r,...o},i)=>{const s=he(v1),a=`${e}`.split("-");return g.jsx("div",{className:ve(["react-flow__panel",n,...a]),style:{...r,pointerEvents:s},ref:i,...o,children:t})});function w1({proOptions:e,position:t="bottom-right"}){return e!=null&&e.hideAttribution?null:g.jsx(bi,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:g.jsx("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}const b1=e=>{const t=[],n=[];for(const[,r]of e.nodeLookup)r.selected&&t.push(r.internals.userNode);for(const[,r]of e.edgeLookup)r.selected&&n.push(r);return{selectedNodes:t,selectedEdges:n}},Zn=e=>e.id;function C1(e,t){return ye(e.selectedNodes.map(Zn),t.selectedNodes.map(Zn))&&ye(e.selectedEdges.map(Zn),t.selectedEdges.map(Zn))}function _1({onSelectionChange:e}){const t=pe(),{selectedNodes:n,selectedEdges:r}=he(b1,C1);return h.useEffect(()=>{const o={nodes:n,edges:r};e==null||e(o),t.getState().onSelectionChangeHandlers.forEach(i=>i(o))},[n,r,e]),null}const E1=e=>!!e.onSelectionChangeHandlers;function S1({onSelectionChange:e}){const t=he(E1);return e||t?g.jsx(_1,{onSelectionChange:e}):null}const Eu=[0,0],M1={x:0,y:0,zoom:1},N1=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","onBeforeDelete","debug","autoPanSpeed","paneClickDistance"],Rs=[...N1,"rfId"],T1=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setPaneClickDistance:e.setPaneClickDistance}),Ds={translateExtent:_n,nodeOrigin:Eu,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1",paneClickDistance:0};function k1(e){const{setNodes:t,setEdges:n,setMinZoom:r,setMaxZoom:o,setTranslateExtent:i,setNodeExtent:s,reset:a,setDefaultNodesAndEdges:c,setPaneClickDistance:u}=he(T1,ye),d=pe();h.useEffect(()=>(c(e.defaultNodes,e.defaultEdges),()=>{l.current=Ds,a()}),[]);const l=h.useRef(Ds);return h.useEffect(()=>{for(const f of Rs){const m=e[f],p=l.current[f];m!==p&&(typeof e[f]>"u"||(f==="nodes"?t(m):f==="edges"?n(m):f==="minZoom"?r(m):f==="maxZoom"?o(m):f==="translateExtent"?i(m):f==="nodeExtent"?s(m):f==="paneClickDistance"?u(m):f==="fitView"?d.setState({fitViewOnInit:m}):f==="fitViewOptions"?d.setState({fitViewOnInitOptions:m}):d.setState({[f]:m})))}l.current=e},Rs.map(f=>e[f])),null}function Is(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function A1(e){var r;const[t,n]=h.useState(e==="system"?null:e);return h.useEffect(()=>{if(e!=="system"){n(e);return}const o=Is(),i=()=>n(o!=null&&o.matches?"dark":"light");return i(),o==null||o.addEventListener("change",i),()=>{o==null||o.removeEventListener("change",i)}},[e]),t!==null?t:(r=Is())!=null&&r.matches?"dark":"light"}const Ps=typeof document<"u"?document:null;function Nn(e=null,t={target:Ps,actInsideInputWithModifier:!0}){const[n,r]=h.useState(!1),o=h.useRef(!1),i=h.useRef(new Set([])),[s,a]=h.useMemo(()=>{if(e!==null){const u=(Array.isArray(e)?e:[e]).filter(l=>typeof l=="string").map(l=>l.replace("+",`
`).replace(`

`,`
+`).split(`
`)),d=u.reduce((l,f)=>l.concat(...f),[]);return[u,d]}return[[],[]]},[e]);return h.useEffect(()=>{const c=(t==null?void 0:t.target)||Ps;if(e!==null){const u=f=>{if(o.current=f.ctrlKey||f.metaKey||f.shiftKey,(!o.current||o.current&&!t.actInsideInputWithModifier)&&Ko(f))return!1;const p=js(f.code,a);i.current.add(f[p]),Ls(s,i.current,!1)&&(f.preventDefault(),r(!0))},d=f=>{if((!o.current||o.current&&!t.actInsideInputWithModifier)&&Ko(f))return!1;const p=js(f.code,a);Ls(s,i.current,!0)?(r(!1),i.current.clear()):i.current.delete(f[p]),f.key==="Meta"&&i.current.clear(),o.current=!1},l=()=>{i.current.clear(),r(!1)};return c==null||c.addEventListener("keydown",u),c==null||c.addEventListener("keyup",d),window.addEventListener("blur",l),window.addEventListener("contextmenu",l),()=>{c==null||c.removeEventListener("keydown",u),c==null||c.removeEventListener("keyup",d),window.removeEventListener("blur",l),window.removeEventListener("contextmenu",l)}}},[e,r]),n}function Ls(e,t,n){return e.filter(r=>n||r.length===t.size).some(r=>r.every(o=>t.has(o)))}function js(e,t){return t.includes(e)?"code":"key"}const R1=()=>{const e=pe();return h.useMemo(()=>({zoomIn:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1.2,{duration:t==null?void 0:t.duration}):Promise.resolve(!1)},zoomOut:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1/1.2,{duration:t==null?void 0:t.duration}):Promise.resolve(!1)},zoomTo:(t,n)=>{const{panZoom:r}=e.getState();return r?r.scaleTo(t,{duration:n==null?void 0:n.duration}):Promise.resolve(!1)},getZoom:()=>e.getState().transform[2],setViewport:async(t,n)=>{const{transform:[r,o,i],panZoom:s}=e.getState();return s?(await s.setViewport({x:t.x??r,y:t.y??o,zoom:t.zoom??i},{duration:n==null?void 0:n.duration}),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{const[t,n,r]=e.getState().transform;return{x:t,y:n,zoom:r}},fitView:t=>{const{nodeLookup:n,minZoom:r,maxZoom:o,panZoom:i,domNode:s}=e.getState();if(!i||!s)return Promise.resolve(!1);const a=Wo(n,t),{width:c,height:u}=$r(s);return Go({nodes:a,width:c,height:u,minZoom:r,maxZoom:o,panZoom:i},t)},setCenter:async(t,n,r)=>{const{width:o,height:i,maxZoom:s,panZoom:a}=e.getState(),c=typeof(r==null?void 0:r.zoom)<"u"?r.zoom:s,u=o/2-t*c,d=i/2-n*c;return a?(await a.setViewport({x:u,y:d,zoom:c},{duration:r==null?void 0:r.duration}),Promise.resolve(!0)):Promise.resolve(!1)},fitBounds:async(t,n)=>{const{width:r,height:o,minZoom:i,maxZoom:s,panZoom:a}=e.getState(),c=gi(t,r,o,i,s,(n==null?void 0:n.padding)??.1);return a?(await a.setViewport(c,{duration:n==null?void 0:n.duration}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(t,n={snapToGrid:!0})=>{const{transform:r,snapGrid:o,domNode:i}=e.getState();if(!i)return t;const{x:s,y:a}=i.getBoundingClientRect(),c={x:t.x-s,y:t.y-a};return Ln(c,r,n.snapToGrid,o)},flowToScreenPosition:t=>{const{transform:n,domNode:r}=e.getState();if(!r)return t;const{x:o,y:i}=r.getBoundingClientRect(),s=Zc(t,n);return{x:s.x+o,y:s.y+i}}}),[])};function Su(e,t){const n=[],r=new Map,o=[];for(const i of e)if(i.type==="add"){o.push(i);continue}else if(i.type==="remove"||i.type==="replace")r.set(i.id,[i]);else{const s=r.get(i.id);s?s.push(i):r.set(i.id,[i])}for(const i of t){const s=r.get(i.id);if(!s){n.push(i);continue}if(s[0].type==="remove")continue;if(s[0].type==="replace"){n.push({...s[0].item});continue}const a={...i};for(const c of s)D1(c,a);n.push(a)}return o.length&&o.forEach(i=>{i.index!==void 0?n.splice(i.index,0,{...i.item}):n.push({...i.item})}),n}function D1(e,t){switch(e.type){case"select":{t.selected=e.selected;break}case"position":{typeof e.position<"u"&&(t.position=e.position),typeof e.dragging<"u"&&(t.dragging=e.dragging);break}case"dimensions":{typeof e.dimensions<"u"&&(t.measured??(t.measured={}),t.measured.width=e.dimensions.width,t.measured.height=e.dimensions.height,e.setAttributes&&(t.width=e.dimensions.width,t.height=e.dimensions.height)),typeof e.resizing=="boolean"&&(t.resizing=e.resizing);break}}}function Mu(e,t){return Su(e,t)}function Nu(e,t){return Su(e,t)}function gt(e,t){return{id:e,type:"select",selected:t}}function At(e,t=new Set,n=!1){const r=[];for(const[o,i]of e){const s=t.has(o);!(i.selected===void 0&&!s)&&i.selected!==s&&(n&&(i.selected=s),r.push(gt(i.id,s)))}return r}function $s({items:e=[],lookup:t}){var o;const n=[],r=new Map(e.map(i=>[i.id,i]));for(const[i,s]of e.entries()){const a=t.get(s.id),c=((o=a==null?void 0:a.internals)==null?void 0:o.userNode)??a;c!==void 0&&c!==s&&n.push({id:s.id,item:s,type:"replace"}),c===void 0&&n.push({item:s,type:"add",index:i})}for(const[i]of t)r.get(i)===void 0&&n.push({id:i,type:"remove"});return n}function Os(e){return{id:e.id,type:"remove"}}const Fs=e=>U0(e),I1=e=>Yc(e);function Tu(e){return h.forwardRef(e)}const P1=typeof window<"u"?h.useLayoutEffect:h.useEffect;function Hs(e){const[t,n]=h.useState(BigInt(0)),[r]=h.useState(()=>L1(()=>n(o=>o+BigInt(1))));return P1(()=>{const o=r.get();o.length&&(e(o),r.reset())},[t]),r}function L1(e){let t=[];return{get:()=>t,reset:()=>{t=[]},push:n=>{t.push(n),e()}}}const ku=h.createContext(null);function j1({children:e}){const t=pe(),n=h.useCallback(a=>{const{nodes:c=[],setNodes:u,hasDefaultNodes:d,onNodesChange:l,nodeLookup:f}=t.getState();let m=c;for(const p of a)m=typeof p=="function"?p(m):p;d?u(m):l&&l($s({items:m,lookup:f}))},[]),r=Hs(n),o=h.useCallback(a=>{const{edges:c=[],setEdges:u,hasDefaultEdges:d,onEdgesChange:l,edgeLookup:f}=t.getState();let m=c;for(const p of a)m=typeof p=="function"?p(m):p;d?u(m):l&&l($s({items:m,lookup:f}))},[]),i=Hs(o),s=h.useMemo(()=>({nodeQueue:r,edgeQueue:i}),[]);return g.jsx(ku.Provider,{value:s,children:e})}function $1(){const e=h.useContext(ku);if(!e)throw new Error("useBatchContext must be used within a BatchProvider");return e}const O1=e=>!!e.panZoom;function Ci(){const e=R1(),t=pe(),n=$1(),r=he(O1),o=h.useMemo(()=>{const i=l=>t.getState().nodeLookup.get(l),s=l=>{n.nodeQueue.push(l)},a=l=>{n.edgeQueue.push(l)},c=l=>{var v,_;const{nodeLookup:f,nodeOrigin:m}=t.getState(),p=Fs(l)?l:f.get(l.id),y=p.parentId?Jc(p.position,p.measured,p.parentId,f,m):p.position,w={...p,position:y,width:((v=p.measured)==null?void 0:v.width)??p.width,height:((_=p.measured)==null?void 0:_.height)??p.height};return zt(w)},u=(l,f,m={replace:!1})=>{s(p=>p.map(y=>{if(y.id===l){const w=typeof f=="function"?f(y):f;return m.replace&&Fs(w)?w:{...y,...w}}return y}))},d=(l,f,m={replace:!1})=>{a(p=>p.map(y=>{if(y.id===l){const w=typeof f=="function"?f(y):f;return m.replace&&I1(w)?w:{...y,...w}}return y}))};return{getNodes:()=>t.getState().nodes.map(l=>({...l})),getNode:l=>{var f;return(f=i(l))==null?void 0:f.internals.userNode},getInternalNode:i,getEdges:()=>{const{edges:l=[]}=t.getState();return l.map(f=>({...f}))},getEdge:l=>t.getState().edgeLookup.get(l),setNodes:s,setEdges:a,addNodes:l=>{const f=Array.isArray(l)?l:[l];n.nodeQueue.push(m=>[...m,...f])},addEdges:l=>{const f=Array.isArray(l)?l:[l];n.edgeQueue.push(m=>[...m,...f])},toObject:()=>{const{nodes:l=[],edges:f=[],transform:m}=t.getState(),[p,y,w]=m;return{nodes:l.map(v=>({...v})),edges:f.map(v=>({...v})),viewport:{x:p,y,zoom:w}}},deleteElements:async({nodes:l=[],edges:f=[]})=>{const{nodes:m,edges:p,onNodesDelete:y,onEdgesDelete:w,triggerNodeChanges:v,triggerEdgeChanges:_,onDelete:b,onBeforeDelete:x}=t.getState(),{nodes:N,edges:L}=await Z0({nodesToRemove:l,edgesToRemove:f,nodes:m,edges:p,onBeforeDelete:x}),M=L.length>0,T=N.length>0;if(M){const A=L.map(Os);w==null||w(L),_(A)}if(T){const A=N.map(Os);y==null||y(N),v(A)}return(T||M)&&(b==null||b({nodes:N,edges:L})),{deletedNodes:N,deletedEdges:L}},getIntersectingNodes:(l,f=!0,m)=>{const p=gs(l),y=p?l:c(l),w=m!==void 0;return y?(m||t.getState().nodes).filter(v=>{const _=t.getState().nodeLookup.get(v.id);if(_&&!p&&(v.id===l.id||!_.internals.positionAbsolute))return!1;const b=zt(w?v:_),x=Sn(b,y);return f&&x>0||x>=y.width*y.height}):[]},isNodeIntersecting:(l,f,m=!0)=>{const y=gs(l)?l:c(l);if(!y)return!1;const w=Sn(y,f);return m&&w>0||w>=y.width*y.height},updateNode:u,updateNodeData:(l,f,m={replace:!1})=>{u(l,p=>{const y=typeof f=="function"?f(p):f;return m.replace?{...p,data:y}:{...p,data:{...p.data,...y}}},m)},updateEdge:d,updateEdgeData:(l,f,m={replace:!1})=>{d(l,p=>{const y=typeof f=="function"?f(p):f;return m.replace?{...p,data:y}:{...p,data:{...p.data,...y}}},m)},getNodesBounds:l=>{const{nodeLookup:f,nodeOrigin:m}=t.getState();return K0(l,{nodeLookup:f,nodeOrigin:m})},getHandleConnections:({type:l,id:f,nodeId:m})=>{var p;return Array.from(((p=t.getState().connectionLookup.get(`${m}-${l}${f?`-${f}`:""}`))==null?void 0:p.values())??[])},getNodeConnections:({type:l,handleId:f,nodeId:m})=>{var p;return Array.from(((p=t.getState().connectionLookup.get(`${m}${l?f?`-${l}-${f}`:`-${l}`:""}`))==null?void 0:p.values())??[])}}},[]);return h.useMemo(()=>({...o,...e,viewportInitialized:r}),[r])}const zs=e=>e.selected,F1={actInsideInputWithModifier:!1},H1=typeof window<"u"?window:void 0;function z1({deleteKeyCode:e,multiSelectionKeyCode:t}){const n=pe(),{deleteElements:r}=Ci(),o=Nn(e,F1),i=Nn(t,{target:H1});h.useEffect(()=>{if(o){const{edges:s,nodes:a}=n.getState();r({nodes:a.filter(zs),edges:s.filter(zs)}),n.setState({nodesSelectionActive:!1})}},[o]),h.useEffect(()=>{n.setState({multiSelectionActive:i})},[i])}function B1(e){const t=pe();h.useEffect(()=>{const n=()=>{var o,i;if(!e.current)return!1;const r=$r(e.current);(r.height===0||r.width===0)&&((i=(o=t.getState()).onError)==null||i.call(o,"004",Qe.error004())),t.setState({width:r.width||500,height:r.height||500})};if(e.current){n(),window.addEventListener("resize",n);const r=new ResizeObserver(()=>n());return r.observe(e.current),()=>{window.removeEventListener("resize",n),r&&e.current&&r.unobserve(e.current)}}},[])}const zr={position:"absolute",width:"100%",height:"100%",top:0,left:0},V1=e=>({userSelectionActive:e.userSelectionActive,lib:e.lib});function X1({onPaneContextMenu:e,zoomOnScroll:t=!0,zoomOnPinch:n=!0,panOnScroll:r=!1,panOnScrollSpeed:o=.5,panOnScrollMode:i=wt.Free,zoomOnDoubleClick:s=!0,panOnDrag:a=!0,defaultViewport:c,translateExtent:u,minZoom:d,maxZoom:l,zoomActivationKeyCode:f,preventScrolling:m=!0,children:p,noWheelClassName:y,noPanClassName:w,onViewportChange:v,isControlledViewport:_,paneClickDistance:b}){const x=pe(),N=h.useRef(null),{userSelectionActive:L,lib:M}=he(V1,ye),T=Nn(f),A=h.useRef();B1(N);const I=h.useCallback($=>{v==null||v({x:$[0],y:$[1],zoom:$[2]}),_||x.setState({transform:$})},[v,_]);return h.useEffect(()=>{if(N.current){A.current=Ry({domNode:N.current,minZoom:d,maxZoom:l,translateExtent:u,viewport:c,paneClickDistance:b,onDraggingChange:C=>x.setState({paneDragging:C}),onPanZoomStart:(C,P)=>{const{onViewportChangeStart:E,onMoveStart:R}=x.getState();R==null||R(C,P),E==null||E(P)},onPanZoom:(C,P)=>{const{onViewportChange:E,onMove:R}=x.getState();R==null||R(C,P),E==null||E(P)},onPanZoomEnd:(C,P)=>{const{onViewportChangeEnd:E,onMoveEnd:R}=x.getState();R==null||R(C,P),E==null||E(P)}});const{x:$,y:O,zoom:F}=A.current.getViewport();return x.setState({panZoom:A.current,transform:[$,O,F],domNode:N.current.closest(".react-flow")}),()=>{var C;(C=A.current)==null||C.destroy()}}},[]),h.useEffect(()=>{var $;($=A.current)==null||$.update({onPaneContextMenu:e,zoomOnScroll:t,zoomOnPinch:n,panOnScroll:r,panOnScrollSpeed:o,panOnScrollMode:i,zoomOnDoubleClick:s,panOnDrag:a,zoomActivationKeyPressed:T,preventScrolling:m,noPanClassName:w,userSelectionActive:L,noWheelClassName:y,lib:M,onTransformChange:I})},[e,t,n,r,o,i,s,a,T,m,w,L,y,M,I]),g.jsx("div",{className:"react-flow__renderer",ref:N,style:zr,children:p})}const Y1=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function W1(){const{userSelectionActive:e,userSelectionRect:t}=he(Y1,ye);return e&&t?g.jsx("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}const xo=(e,t)=>n=>{n.target===t.current&&(e==null||e(n))},G1=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging});function U1({isSelecting:e,selectionKeyPressed:t,selectionMode:n=En.Full,panOnDrag:r,selectionOnDrag:o,onSelectionStart:i,onSelectionEnd:s,onPaneClick:a,onPaneContextMenu:c,onPaneScroll:u,onPaneMouseEnter:d,onPaneMouseMove:l,onPaneMouseLeave:f,children:m}){const p=pe(),{userSelectionActive:y,elementsSelectable:w,dragging:v}=he(G1,ye),_=w&&(e||y),b=h.useRef(null),x=h.useRef(),N=h.useRef(new Set),L=h.useRef(new Set),M=h.useRef(!1),T=h.useRef(!1),A=E=>{if(M.current){M.current=!1;return}a==null||a(E),p.getState().resetSelectedElements(),p.setState({nodesSelectionActive:!1})},I=E=>{if(Array.isArray(r)&&(r!=null&&r.includes(2))){E.preventDefault();return}c==null||c(E)},$=u?E=>u(E):void 0,O=E=>{var z,X;const{resetSelectedElements:R,domNode:D}=p.getState();if(x.current=D==null?void 0:D.getBoundingClientRect(),!w||!e||E.button!==0||E.target!==b.current||!x.current)return;(X=(z=E.target)==null?void 0:z.setPointerCapture)==null||X.call(z,E.pointerId),T.current=!0,M.current=!1;const{x:k,y:H}=qe(E.nativeEvent,x.current);R(),p.setState({userSelectionRect:{width:0,height:0,startX:k,startY:H,x:k,y:H}}),i==null||i(E)},F=E=>{const{userSelectionRect:R,transform:D,nodeLookup:k,edgeLookup:H,connectionLookup:z,triggerNodeChanges:X,triggerEdgeChanges:ee,defaultEdgeOptions:K}=p.getState();if(!x.current||!R)return;M.current=!0;const{x:Q,y:Z}=qe(E.nativeEvent,x.current),{startX:re,startY:U}=R,Y={startX:re,startY:U,x:Q<re?Q:re,y:Z<U?Z:U,width:Math.abs(Q-re),height:Math.abs(Z-U)},oe=N.current,ae=L.current;N.current=new Set(Wc(k,Y,D,n===En.Partial,!0).map(J=>J.id)),L.current=new Set;const ne=(K==null?void 0:K.selectable)??!0;for(const J of N.current){const ue=z.get(J);if(ue)for(const{edgeId:ge}of ue.values()){const Ee=H.get(ge);Ee&&(Ee.selectable??ne)&&L.current.add(ge)}}if(!ys(oe,N.current)){const J=At(k,N.current,!0);X(J)}if(!ys(ae,L.current)){const J=At(H,L.current);ee(J)}p.setState({userSelectionRect:Y,userSelectionActive:!0,nodesSelectionActive:!1})},C=E=>{var D,k;if(E.button!==0||!T.current)return;(k=(D=E.target)==null?void 0:D.releasePointerCapture)==null||k.call(D,E.pointerId);const{userSelectionRect:R}=p.getState();!y&&R&&E.target===b.current&&(A==null||A(E)),p.setState({userSelectionActive:!1,userSelectionRect:null,nodesSelectionActive:N.current.size>0}),s==null||s(E),(t||o)&&(M.current=!1),T.current=!1},P=r===!0||Array.isArray(r)&&r.includes(0);return g.jsxs("div",{className:ve(["react-flow__pane",{draggable:P,dragging:v,selection:e}]),onClick:_?void 0:xo(A,b),onContextMenu:xo(I,b),onWheel:xo($,b),onPointerEnter:_?void 0:d,onPointerDown:_?O:l,onPointerMove:_?F:l,onPointerUp:_?C:void 0,onPointerLeave:f,ref:b,style:zr,children:[m,g.jsx(W1,{})]})}function ei({id:e,store:t,unselect:n=!1,nodeRef:r}){const{addSelectedNodes:o,unselectNodesAndEdges:i,multiSelectionActive:s,nodeLookup:a,onError:c}=t.getState(),u=a.get(e);if(!u){c==null||c("012",Qe.error012(e));return}t.setState({nodesSelectionActive:!1}),u.selected?(n||u.selected&&s)&&(i({nodes:[u],edges:[]}),requestAnimationFrame(()=>{var d;return(d=r==null?void 0:r.current)==null?void 0:d.blur()})):o([e])}function Au({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:r,nodeId:o,isSelectable:i,nodeClickDistance:s}){const a=pe(),[c,u]=h.useState(!1),d=h.useRef();return h.useEffect(()=>{d.current=yy({getStoreItems:()=>a.getState(),onNodeMouseDown:l=>{ei({id:l,store:a,nodeRef:e})},onDragStart:()=>{u(!0)},onDragStop:()=>{u(!1)}})},[]),h.useEffect(()=>{var l,f;if(t)(l=d.current)==null||l.destroy();else if(e.current)return(f=d.current)==null||f.update({noDragClassName:n,handleSelector:r,domNode:e.current,isSelectable:i,nodeId:o,nodeClickDistance:s}),()=>{var m;(m=d.current)==null||m.destroy()}},[n,r,t,i,e,o]),c}const K1=e=>t=>t.selected&&(t.draggable||e&&typeof t.draggable>"u");function Ru(){const e=pe();return h.useCallback(n=>{const{nodeExtent:r,snapToGrid:o,snapGrid:i,nodesDraggable:s,onError:a,updateNodePositions:c,nodeLookup:u,nodeOrigin:d}=e.getState(),l=new Map,f=K1(s),m=o?i[0]:5,p=o?i[1]:5,y=n.direction.x*m*n.factor,w=n.direction.y*p*n.factor;for(const[,v]of u){if(!f(v))continue;let _={x:v.internals.positionAbsolute.x+y,y:v.internals.positionAbsolute.y+w};o&&(_=jr(_,i));const{position:b,positionAbsolute:x}=Gc({nodeId:v.id,nextPosition:_,nodeLookup:u,nodeExtent:r,nodeOrigin:d,onError:a});v.position=b,v.internals.positionAbsolute=x,l.set(v.id,v)}c(l)},[])}const _i=h.createContext(null),q1=_i.Provider;_i.Consumer;const Du=()=>h.useContext(_i),Z1=e=>({connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName,rfId:e.rfId}),Q1=(e,t,n)=>r=>{const{connectionClickStartHandle:o,connectionMode:i,connection:s}=r,{fromHandle:a,toHandle:c,isValid:u}=s,d=(c==null?void 0:c.nodeId)===e&&(c==null?void 0:c.id)===t&&(c==null?void 0:c.type)===n;return{connectingFrom:(a==null?void 0:a.nodeId)===e&&(a==null?void 0:a.id)===t&&(a==null?void 0:a.type)===n,connectingTo:d,clickConnecting:(o==null?void 0:o.nodeId)===e&&(o==null?void 0:o.id)===t&&(o==null?void 0:o.type)===n,isPossibleEndHandle:i===Ft.Strict?(a==null?void 0:a.type)!==n:e!==(a==null?void 0:a.nodeId)||t!==(a==null?void 0:a.id),connectionInProcess:!!a,valid:d&&u}};function J1({type:e="source",position:t=te.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:o=!0,isConnectableEnd:i=!0,id:s,onConnect:a,children:c,className:u,onMouseDown:d,onTouchStart:l,...f},m){var C,P;const p=s||null,y=e==="target",w=pe(),v=Du(),{connectOnClick:_,noPanClassName:b,rfId:x}=he(Z1,ye),{connectingFrom:N,connectingTo:L,clickConnecting:M,isPossibleEndHandle:T,connectionInProcess:A,valid:I}=he(Q1(v,p,e),ye);v||(P=(C=w.getState()).onError)==null||P.call(C,"010",Qe.error010());const $=E=>{const{defaultEdgeOptions:R,onConnect:D,hasDefaultEdges:k}=w.getState(),H={...R,...E};if(k){const{edges:z,setEdges:X}=w.getState();X(oy(H,z))}D==null||D(H),a==null||a(H)},O=E=>{if(!v)return;const R=tu(E.nativeEvent);if(o&&(R&&E.button===0||!R)){const D=w.getState();Jo.onPointerDown(E.nativeEvent,{autoPanOnConnect:D.autoPanOnConnect,connectionMode:D.connectionMode,connectionRadius:D.connectionRadius,domNode:D.domNode,nodeLookup:D.nodeLookup,lib:D.lib,isTarget:y,handleId:p,nodeId:v,flowId:D.rfId,panBy:D.panBy,cancelConnection:D.cancelConnection,onConnectStart:D.onConnectStart,onConnectEnd:D.onConnectEnd,updateConnection:D.updateConnection,onConnect:$,isValidConnection:n||D.isValidConnection,getTransform:()=>w.getState().transform,getFromHandle:()=>w.getState().connection.fromHandle,autoPanSpeed:D.autoPanSpeed})}R?d==null||d(E):l==null||l(E)},F=E=>{const{onClickConnectStart:R,onClickConnectEnd:D,connectionClickStartHandle:k,connectionMode:H,isValidConnection:z,lib:X,rfId:ee,nodeLookup:K,connection:Q}=w.getState();if(!v||!k&&!o)return;if(!k){R==null||R(E.nativeEvent,{nodeId:v,handleId:p,handleType:e}),w.setState({connectionClickStartHandle:{nodeId:v,type:e,id:p}});return}const Z=eu(E.target),re=n||z,{connection:U,isValid:Y}=Jo.isValid(E.nativeEvent,{handle:{nodeId:v,id:p,type:e},connectionMode:H,fromNodeId:k.nodeId,fromHandleId:k.id||null,fromType:k.type,isValidConnection:re,flowId:ee,doc:Z,lib:X,nodeLookup:K});Y&&U&&$(U);const oe=structuredClone(Q);delete oe.inProgress,oe.toPosition=oe.toHandle?oe.toHandle.position:null,D==null||D(E,oe),w.setState({connectionClickStartHandle:null})};return g.jsx("div",{"data-handleid":p,"data-nodeid":v,"data-handlepos":t,"data-id":`${x}-${v}-${p}-${e}`,className:ve(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",b,u,{source:!y,target:y,connectable:r,connectablestart:o,connectableend:i,clickconnecting:M,connectingfrom:N,connectingto:L,valid:I,connectionindicator:r&&(!A||T)&&(A?i:o)}]),onMouseDown:O,onTouchStart:O,onClick:_?F:void 0,ref:m,...f,children:c})}const Fe=h.memo(Tu(J1));function ex({data:e,isConnectable:t,sourcePosition:n=te.Bottom}){return g.jsxs(g.Fragment,{children:[e==null?void 0:e.label,g.jsx(Fe,{type:"source",position:n,isConnectable:t})]})}function tx({data:e,isConnectable:t,targetPosition:n=te.Top,sourcePosition:r=te.Bottom}){return g.jsxs(g.Fragment,{children:[g.jsx(Fe,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label,g.jsx(Fe,{type:"source",position:r,isConnectable:t})]})}function nx(){return null}function rx({data:e,isConnectable:t,targetPosition:n=te.Top}){return g.jsxs(g.Fragment,{children:[g.jsx(Fe,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label]})}const wr={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},Bs={input:ex,default:tx,output:rx,group:nx};function ox(e){var t,n,r,o;return e.internals.handleBounds===void 0?{width:e.width??e.initialWidth??((t=e.style)==null?void 0:t.width),height:e.height??e.initialHeight??((n=e.style)==null?void 0:n.height)}:{width:e.width??((r=e.style)==null?void 0:r.width),height:e.height??((o=e.style)==null?void 0:o.height)}}const ix=e=>{const{width:t,height:n,x:r,y:o}=Pn(e.nodeLookup,{filter:i=>!!i.selected});return{width:Oe(t)?t:null,height:Oe(n)?n:null,userSelectionActive:e.userSelectionActive,transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]}) translate(${r}px,${o}px)`}};function sx({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){const r=pe(),{width:o,height:i,transformString:s,userSelectionActive:a}=he(ix,ye),c=Ru(),u=h.useRef(null);if(h.useEffect(()=>{var f;n||(f=u.current)==null||f.focus({preventScroll:!0})},[n]),Au({nodeRef:u}),a||!o||!i)return null;const d=e?f=>{const m=r.getState().nodes.filter(p=>p.selected);e(f,m)}:void 0,l=f=>{Object.prototype.hasOwnProperty.call(wr,f.key)&&(f.preventDefault(),c({direction:wr[f.key],factor:f.shiftKey?4:1}))};return g.jsx("div",{className:ve(["react-flow__nodesselection","react-flow__container",t]),style:{transform:s},children:g.jsx("div",{ref:u,className:"react-flow__nodesselection-rect",onContextMenu:d,tabIndex:n?void 0:-1,onKeyDown:n?void 0:l,style:{width:o,height:i}})})}const Vs=typeof window<"u"?window:void 0,ax=e=>({nodesSelectionActive:e.nodesSelectionActive,userSelectionActive:e.userSelectionActive});function Iu({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:o,onPaneContextMenu:i,onPaneScroll:s,paneClickDistance:a,deleteKeyCode:c,selectionKeyCode:u,selectionOnDrag:d,selectionMode:l,onSelectionStart:f,onSelectionEnd:m,multiSelectionKeyCode:p,panActivationKeyCode:y,zoomActivationKeyCode:w,elementsSelectable:v,zoomOnScroll:_,zoomOnPinch:b,panOnScroll:x,panOnScrollSpeed:N,panOnScrollMode:L,zoomOnDoubleClick:M,panOnDrag:T,defaultViewport:A,translateExtent:I,minZoom:$,maxZoom:O,preventScrolling:F,onSelectionContextMenu:C,noWheelClassName:P,noPanClassName:E,disableKeyboardA11y:R,onViewportChange:D,isControlledViewport:k}){const{nodesSelectionActive:H,userSelectionActive:z}=he(ax),X=Nn(u,{target:Vs}),ee=Nn(y,{target:Vs}),K=ee||T,Q=ee||x,Z=d&&K!==!0,re=X||z||Z;return z1({deleteKeyCode:c,multiSelectionKeyCode:p}),g.jsx(X1,{onPaneContextMenu:i,elementsSelectable:v,zoomOnScroll:_,zoomOnPinch:b,panOnScroll:Q,panOnScrollSpeed:N,panOnScrollMode:L,zoomOnDoubleClick:M,panOnDrag:!X&&K,defaultViewport:A,translateExtent:I,minZoom:$,maxZoom:O,zoomActivationKeyCode:w,preventScrolling:F,noWheelClassName:P,noPanClassName:E,onViewportChange:D,isControlledViewport:k,paneClickDistance:a,children:g.jsxs(U1,{onSelectionStart:f,onSelectionEnd:m,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:o,onPaneContextMenu:i,onPaneScroll:s,panOnDrag:K,isSelecting:!!re,selectionMode:l,selectionKeyPressed:X,selectionOnDrag:Z,children:[e,H&&g.jsx(sx,{onSelectionContextMenu:C,noPanClassName:E,disableKeyboardA11y:R})]})})}Iu.displayName="FlowRenderer";const cx=h.memo(Iu),ux=e=>t=>e?Wc(t.nodeLookup,{x:0,y:0,width:t.width,height:t.height},t.transform,!0).map(n=>n.id):Array.from(t.nodeLookup.keys());function lx(e){return he(h.useCallback(ux(e),[e]),ye)}const dx=e=>e.updateNodeInternals;function fx(){const e=he(dx),[t]=h.useState(()=>typeof ResizeObserver>"u"?null:new ResizeObserver(n=>{const r=new Map;n.forEach(o=>{const i=o.target.getAttribute("data-id");r.set(i,{id:i,nodeElement:o.target,force:!0})}),e(r)}));return h.useEffect(()=>()=>{t==null||t.disconnect()},[t]),t}function hx({node:e,nodeType:t,hasDimensions:n,resizeObserver:r}){const o=pe(),i=h.useRef(null),s=h.useRef(null),a=h.useRef(e.sourcePosition),c=h.useRef(e.targetPosition),u=h.useRef(t),d=n&&!!e.internals.handleBounds;return h.useEffect(()=>{i.current&&!e.hidden&&(!d||s.current!==i.current)&&(s.current&&(r==null||r.unobserve(s.current)),r==null||r.observe(i.current),s.current=i.current)},[d,e.hidden]),h.useEffect(()=>()=>{s.current&&(r==null||r.unobserve(s.current),s.current=null)},[]),h.useEffect(()=>{if(i.current){const l=u.current!==t,f=a.current!==e.sourcePosition,m=c.current!==e.targetPosition;(l||f||m)&&(u.current=t,a.current=e.sourcePosition,c.current=e.targetPosition,o.getState().updateNodeInternals(new Map([[e.id,{id:e.id,nodeElement:i.current,force:!0}]])))}},[e.id,t,e.sourcePosition,e.targetPosition]),i}function mx({id:e,onClick:t,onMouseEnter:n,onMouseMove:r,onMouseLeave:o,onContextMenu:i,onDoubleClick:s,nodesDraggable:a,elementsSelectable:c,nodesConnectable:u,nodesFocusable:d,resizeObserver:l,noDragClassName:f,noPanClassName:m,disableKeyboardA11y:p,rfId:y,nodeTypes:w,nodeExtent:v,nodeClickDistance:_,onError:b}){const{node:x,internals:N,isParent:L}=he(U=>{const Y=U.nodeLookup.get(e),oe=U.parentLookup.has(e);return{node:Y,internals:Y.internals,isParent:oe}},ye);let M=x.type||"default",T=(w==null?void 0:w[M])||Bs[M];T===void 0&&(b==null||b("003",Qe.error003(M)),M="default",T=Bs.default);const A=!!(x.draggable||a&&typeof x.draggable>"u"),I=!!(x.selectable||c&&typeof x.selectable>"u"),$=!!(x.connectable||u&&typeof x.connectable>"u"),O=!!(x.focusable||d&&typeof x.focusable>"u"),F=pe(),C=Qc(x),P=hx({node:x,nodeType:M,hasDimensions:C,resizeObserver:l}),E=Au({nodeRef:P,disabled:x.hidden||!A,noDragClassName:f,handleSelector:x.dragHandle,nodeId:e,isSelectable:I,nodeClickDistance:_}),R=Ru();if(x.hidden)return null;const D=Je(x),k=ox(x),H=I||A||t||n||r||o,z=n?U=>n(U,{...N.userNode}):void 0,X=r?U=>r(U,{...N.userNode}):void 0,ee=o?U=>o(U,{...N.userNode}):void 0,K=i?U=>i(U,{...N.userNode}):void 0,Q=s?U=>s(U,{...N.userNode}):void 0,Z=U=>{const{selectNodesOnDrag:Y,nodeDragThreshold:oe}=F.getState();I&&(!Y||!A||oe>0)&&ei({id:e,store:F,nodeRef:P}),t&&t(U,{...N.userNode})},re=U=>{if(!(Ko(U.nativeEvent)||p))if(Bc.includes(U.key)&&I){const Y=U.key==="Escape";ei({id:e,store:F,unselect:Y,nodeRef:P})}else A&&x.selected&&Object.prototype.hasOwnProperty.call(wr,U.key)&&(U.preventDefault(),F.setState({ariaLiveMessage:`Moved selected node ${U.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~N.positionAbsolute.x}, y: ${~~N.positionAbsolute.y}`}),R({direction:wr[U.key],factor:U.shiftKey?4:1}))};return g.jsx("div",{className:ve(["react-flow__node",`react-flow__node-${M}`,{[m]:A},x.className,{selected:x.selected,selectable:I,parent:L,draggable:A,dragging:E}]),ref:P,style:{zIndex:N.z,transform:`translate(${N.positionAbsolute.x}px,${N.positionAbsolute.y}px)`,pointerEvents:H?"all":"none",visibility:C?"visible":"hidden",...x.style,...k},"data-id":e,"data-testid":`rf__node-${e}`,onMouseEnter:z,onMouseMove:X,onMouseLeave:ee,onContextMenu:K,onClick:Z,onDoubleClick:Q,onKeyDown:O?re:void 0,tabIndex:O?0:void 0,role:O?"button":void 0,"aria-describedby":p?void 0:`${Cu}-${y}`,"aria-label":x.ariaLabel,children:g.jsx(q1,{value:e,children:g.jsx(T,{id:e,data:x.data,type:M,positionAbsoluteX:N.positionAbsolute.x,positionAbsoluteY:N.positionAbsolute.y,selected:x.selected??!1,selectable:I,draggable:A,deletable:x.deletable??!0,isConnectable:$,sourcePosition:x.sourcePosition,targetPosition:x.targetPosition,dragging:E,dragHandle:x.dragHandle,zIndex:N.z,parentId:x.parentId,...D})})})}const px=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,onError:e.onError});function Pu(e){const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:o,onError:i}=he(px,ye),s=lx(e.onlyRenderVisibleElements),a=fx();return g.jsx("div",{className:"react-flow__nodes",style:zr,children:s.map(c=>g.jsx(mx,{id:c,nodeTypes:e.nodeTypes,nodeExtent:e.nodeExtent,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,resizeObserver:a,nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:o,nodeClickDistance:e.nodeClickDistance,onError:i},c))})}Pu.displayName="NodeRenderer";const gx=h.memo(Pu);function yx(e){return he(h.useCallback(n=>{if(!e)return n.edges.map(o=>o.id);const r=[];if(n.width&&n.height)for(const o of n.edges){const i=n.nodeLookup.get(o.source),s=n.nodeLookup.get(o.target);i&&s&&ty({sourceNode:i,targetNode:s,width:n.width,height:n.height,transform:n.transform})&&r.push(o.id)}return r},[e]),ye)}const xx=({color:e="none",strokeWidth:t=1})=>g.jsx("polyline",{style:{stroke:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),vx=({color:e="none",strokeWidth:t=1})=>g.jsx("polyline",{style:{stroke:e,fill:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),Xs={[yr.Arrow]:xx,[yr.ArrowClosed]:vx};function wx(e){const t=pe();return h.useMemo(()=>{var o,i;return Object.prototype.hasOwnProperty.call(Xs,e)?Xs[e]:((i=(o=t.getState()).onError)==null||i.call(o,"009",Qe.error009(e)),null)},[e])}const bx=({id:e,type:t,color:n,width:r=12.5,height:o=12.5,markerUnits:i="strokeWidth",strokeWidth:s,orient:a="auto-start-reverse"})=>{const c=wx(t);return c?g.jsx("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${r}`,markerHeight:`${o}`,viewBox:"-10 -10 20 20",markerUnits:i,orient:a,refX:"0",refY:"0",children:g.jsx(c,{color:n,strokeWidth:s})}):null},Lu=({defaultColor:e,rfId:t})=>{const n=he(i=>i.edges),r=he(i=>i.defaultEdgeOptions),o=h.useMemo(()=>uy(n,{id:t,defaultColor:e,defaultMarkerStart:r==null?void 0:r.markerStart,defaultMarkerEnd:r==null?void 0:r.markerEnd}),[n,r,t,e]);return o.length?g.jsx("svg",{className:"react-flow__marker",children:g.jsx("defs",{children:o.map(i=>g.jsx(bx,{id:i.id,type:i.type,color:i.color,width:i.width,height:i.height,markerUnits:i.markerUnits,strokeWidth:i.strokeWidth,orient:i.orient},i.id))})}):null};Lu.displayName="MarkerDefinitions";var Cx=h.memo(Lu);function ju({x:e,y:t,label:n,labelStyle:r={},labelShowBg:o=!0,labelBgStyle:i={},labelBgPadding:s=[2,4],labelBgBorderRadius:a=2,children:c,className:u,...d}){const[l,f]=h.useState({x:1,y:0,width:0,height:0}),m=ve(["react-flow__edge-textwrapper",u]),p=h.useRef(null);return h.useEffect(()=>{if(p.current){const y=p.current.getBBox();f({x:y.x,y:y.y,width:y.width,height:y.height})}},[n]),typeof n>"u"||!n?null:g.jsxs("g",{transform:`translate(${e-l.width/2} ${t-l.height/2})`,className:m,visibility:l.width?"visible":"hidden",...d,children:[o&&g.jsx("rect",{width:l.width+2*s[0],x:-s[0],y:-s[1],height:l.height+2*s[1],className:"react-flow__edge-textbg",style:i,rx:a,ry:a}),g.jsx("text",{className:"react-flow__edge-text",y:l.height/2,dy:"0.3em",ref:p,style:r,children:n}),c]})}ju.displayName="EdgeText";const _x=h.memo(ju);function Br({path:e,labelX:t,labelY:n,label:r,labelStyle:o,labelShowBg:i,labelBgStyle:s,labelBgPadding:a,labelBgBorderRadius:c,interactionWidth:u=20,...d}){return g.jsxs(g.Fragment,{children:[g.jsx("path",{...d,d:e,fill:"none",className:ve(["react-flow__edge-path",d.className])}),u&&g.jsx("path",{d:e,fill:"none",strokeOpacity:0,strokeWidth:u,className:"react-flow__edge-interaction"}),r&&Oe(t)&&Oe(n)?g.jsx(_x,{x:t,y:n,label:r,labelStyle:o,labelShowBg:i,labelBgStyle:s,labelBgPadding:a,labelBgBorderRadius:c}):null]})}function Ys({pos:e,x1:t,y1:n,x2:r,y2:o}){return e===te.Left||e===te.Right?[.5*(t+r),n]:[t,.5*(n+o)]}function $u({sourceX:e,sourceY:t,sourcePosition:n=te.Bottom,targetX:r,targetY:o,targetPosition:i=te.Top}){const[s,a]=Ys({pos:n,x1:e,y1:t,x2:r,y2:o}),[c,u]=Ys({pos:i,x1:r,y1:o,x2:e,y2:t}),[d,l,f,m]=nu({sourceX:e,sourceY:t,targetX:r,targetY:o,sourceControlX:s,sourceControlY:a,targetControlX:c,targetControlY:u});return[`M${e},${t} C${s},${a} ${c},${u} ${r},${o}`,d,l,f,m]}function Ou(e){return h.memo(({id:t,sourceX:n,sourceY:r,targetX:o,targetY:i,sourcePosition:s=te.Bottom,targetPosition:a=te.Top,label:c,labelStyle:u,labelShowBg:d,labelBgStyle:l,labelBgPadding:f,labelBgBorderRadius:m,style:p,markerEnd:y,markerStart:w,interactionWidth:v})=>{const[_,b,x]=$u({sourceX:n,sourceY:r,sourcePosition:s,targetX:o,targetY:i,targetPosition:a}),N=e.isInternal?void 0:t;return g.jsx(Br,{id:N,path:_,labelX:b,labelY:x,label:c,labelStyle:u,labelShowBg:d,labelBgStyle:l,labelBgPadding:f,labelBgBorderRadius:m,style:p,markerEnd:y,markerStart:w,interactionWidth:v})})}const Ex=Ou({isInternal:!1}),Fu=Ou({isInternal:!0});Ex.displayName="SimpleBezierEdge";Fu.displayName="SimpleBezierEdgeInternal";function Hu(e){return h.memo(({id:t,sourceX:n,sourceY:r,targetX:o,targetY:i,label:s,labelStyle:a,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:l,style:f,sourcePosition:m=te.Bottom,targetPosition:p=te.Top,markerEnd:y,markerStart:w,pathOptions:v,interactionWidth:_})=>{const[b,x,N]=qo({sourceX:n,sourceY:r,sourcePosition:m,targetX:o,targetY:i,targetPosition:p,borderRadius:v==null?void 0:v.borderRadius,offset:v==null?void 0:v.offset}),L=e.isInternal?void 0:t;return g.jsx(Br,{id:L,path:b,labelX:x,labelY:N,label:s,labelStyle:a,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:l,style:f,markerEnd:y,markerStart:w,interactionWidth:_})})}const zu=Hu({isInternal:!1}),Bu=Hu({isInternal:!0});zu.displayName="SmoothStepEdge";Bu.displayName="SmoothStepEdgeInternal";function Vu(e){return h.memo(({id:t,...n})=>{var o;const r=e.isInternal?void 0:t;return g.jsx(zu,{...n,id:r,pathOptions:h.useMemo(()=>{var i;return{borderRadius:0,offset:(i=n.pathOptions)==null?void 0:i.offset}},[(o=n.pathOptions)==null?void 0:o.offset])})})}const Sx=Vu({isInternal:!1}),Xu=Vu({isInternal:!0});Sx.displayName="StepEdge";Xu.displayName="StepEdgeInternal";function Yu(e){return h.memo(({id:t,sourceX:n,sourceY:r,targetX:o,targetY:i,label:s,labelStyle:a,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:l,style:f,markerEnd:m,markerStart:p,interactionWidth:y})=>{const[w,v,_]=iu({sourceX:n,sourceY:r,targetX:o,targetY:i}),b=e.isInternal?void 0:t;return g.jsx(Br,{id:b,path:w,labelX:v,labelY:_,label:s,labelStyle:a,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:l,style:f,markerEnd:m,markerStart:p,interactionWidth:y})})}const Mx=Yu({isInternal:!1}),Wu=Yu({isInternal:!0});Mx.displayName="StraightEdge";Wu.displayName="StraightEdgeInternal";function Gu(e){return h.memo(({id:t,sourceX:n,sourceY:r,targetX:o,targetY:i,sourcePosition:s=te.Bottom,targetPosition:a=te.Top,label:c,labelStyle:u,labelShowBg:d,labelBgStyle:l,labelBgPadding:f,labelBgBorderRadius:m,style:p,markerEnd:y,markerStart:w,pathOptions:v,interactionWidth:_})=>{const[b,x,N]=ru({sourceX:n,sourceY:r,sourcePosition:s,targetX:o,targetY:i,targetPosition:a,curvature:v==null?void 0:v.curvature}),L=e.isInternal?void 0:t;return g.jsx(Br,{id:L,path:b,labelX:x,labelY:N,label:c,labelStyle:u,labelShowBg:d,labelBgStyle:l,labelBgPadding:f,labelBgBorderRadius:m,style:p,markerEnd:y,markerStart:w,interactionWidth:_})})}const Nx=Gu({isInternal:!1}),Uu=Gu({isInternal:!0});Nx.displayName="BezierEdge";Uu.displayName="BezierEdgeInternal";const Ws={default:Uu,straight:Wu,step:Xu,smoothstep:Bu,simplebezier:Fu},Gs={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},Tx=(e,t,n)=>n===te.Left?e-t:n===te.Right?e+t:e,kx=(e,t,n)=>n===te.Top?e-t:n===te.Bottom?e+t:e,Us="react-flow__edgeupdater";function Ks({position:e,centerX:t,centerY:n,radius:r=10,onMouseDown:o,onMouseEnter:i,onMouseOut:s,type:a}){return g.jsx("circle",{onMouseDown:o,onMouseEnter:i,onMouseOut:s,className:ve([Us,`${Us}-${a}`]),cx:Tx(t,r,e),cy:kx(n,r,e),r,stroke:"transparent",fill:"transparent"})}function Ax({isReconnectable:e,reconnectRadius:t,edge:n,sourceX:r,sourceY:o,targetX:i,targetY:s,sourcePosition:a,targetPosition:c,onReconnect:u,onReconnectStart:d,onReconnectEnd:l,setReconnecting:f,setUpdateHover:m}){const p=pe(),y=(x,N)=>{if(x.button!==0)return;const{autoPanOnConnect:L,domNode:M,isValidConnection:T,connectionMode:A,connectionRadius:I,lib:$,onConnectStart:O,onConnectEnd:F,cancelConnection:C,nodeLookup:P,rfId:E,panBy:R,updateConnection:D}=p.getState(),k=N.type==="target";f(!0),d==null||d(x,n,N.type);const H=(X,ee)=>{f(!1),l==null||l(X,n,N.type,ee)},z=X=>u==null?void 0:u(n,X);Jo.onPointerDown(x.nativeEvent,{autoPanOnConnect:L,connectionMode:A,connectionRadius:I,domNode:M,handleId:N.id,nodeId:N.nodeId,nodeLookup:P,isTarget:k,edgeUpdaterType:N.type,lib:$,flowId:E,cancelConnection:C,panBy:R,isValidConnection:T,onConnect:z,onConnectStart:O,onConnectEnd:F,onReconnectEnd:H,updateConnection:D,getTransform:()=>p.getState().transform,getFromHandle:()=>p.getState().connection.fromHandle})},w=x=>y(x,{nodeId:n.target,id:n.targetHandle??null,type:"target"}),v=x=>y(x,{nodeId:n.source,id:n.sourceHandle??null,type:"source"}),_=()=>m(!0),b=()=>m(!1);return g.jsxs(g.Fragment,{children:[(e===!0||e==="source")&&g.jsx(Ks,{position:a,centerX:r,centerY:o,radius:t,onMouseDown:w,onMouseEnter:_,onMouseOut:b,type:"source"}),(e===!0||e==="target")&&g.jsx(Ks,{position:c,centerX:i,centerY:s,radius:t,onMouseDown:v,onMouseEnter:_,onMouseOut:b,type:"target"})]})}function Rx({id:e,edgesFocusable:t,edgesReconnectable:n,elementsSelectable:r,onClick:o,onDoubleClick:i,onContextMenu:s,onMouseEnter:a,onMouseMove:c,onMouseLeave:u,reconnectRadius:d,onReconnect:l,onReconnectStart:f,onReconnectEnd:m,rfId:p,edgeTypes:y,noPanClassName:w,onError:v,disableKeyboardA11y:_}){let b=he(ne=>ne.edgeLookup.get(e));const x=he(ne=>ne.defaultEdgeOptions);b=x?{...x,...b}:b;let N=b.type||"default",L=(y==null?void 0:y[N])||Ws[N];L===void 0&&(v==null||v("011",Qe.error011(N)),N="default",L=Ws.default);const M=!!(b.focusable||t&&typeof b.focusable>"u"),T=typeof l<"u"&&(b.reconnectable||n&&typeof b.reconnectable>"u"),A=!!(b.selectable||r&&typeof b.selectable>"u"),I=h.useRef(null),[$,O]=h.useState(!1),[F,C]=h.useState(!1),P=pe(),{zIndex:E,sourceX:R,sourceY:D,targetX:k,targetY:H,sourcePosition:z,targetPosition:X}=he(h.useCallback(ne=>{const J=ne.nodeLookup.get(b.source),ue=ne.nodeLookup.get(b.target);if(!J||!ue)return{zIndex:b.zIndex,...Gs};const ge=cy({id:e,sourceNode:J,targetNode:ue,sourceHandle:b.sourceHandle||null,targetHandle:b.targetHandle||null,connectionMode:ne.connectionMode,onError:v});return{zIndex:ey({selected:b.selected,zIndex:b.zIndex,sourceNode:J,targetNode:ue,elevateOnSelect:ne.elevateEdgesOnSelect}),...ge||Gs}},[b.source,b.target,b.sourceHandle,b.targetHandle,b.selected,b.zIndex]),ye),ee=h.useMemo(()=>b.markerStart?`url('#${Zo(b.markerStart,p)}')`:void 0,[b.markerStart,p]),K=h.useMemo(()=>b.markerEnd?`url('#${Zo(b.markerEnd,p)}')`:void 0,[b.markerEnd,p]);if(b.hidden||R===null||D===null||k===null||H===null)return null;const Q=ne=>{var Ee;const{addSelectedEdges:J,unselectNodesAndEdges:ue,multiSelectionActive:ge}=P.getState();A&&(P.setState({nodesSelectionActive:!1}),b.selected&&ge?(ue({nodes:[],edges:[b]}),(Ee=I.current)==null||Ee.blur()):J([e])),o&&o(ne,b)},Z=i?ne=>{i(ne,{...b})}:void 0,re=s?ne=>{s(ne,{...b})}:void 0,U=a?ne=>{a(ne,{...b})}:void 0,Y=c?ne=>{c(ne,{...b})}:void 0,oe=u?ne=>{u(ne,{...b})}:void 0,ae=ne=>{var J;if(!_&&Bc.includes(ne.key)&&A){const{unselectNodesAndEdges:ue,addSelectedEdges:ge}=P.getState();ne.key==="Escape"?((J=I.current)==null||J.blur(),ue({edges:[b]})):ge([e])}};return g.jsx("svg",{style:{zIndex:E},children:g.jsxs("g",{className:ve(["react-flow__edge",`react-flow__edge-${N}`,b.className,w,{selected:b.selected,animated:b.animated,inactive:!A&&!o,updating:$,selectable:A}]),onClick:Q,onDoubleClick:Z,onContextMenu:re,onMouseEnter:U,onMouseMove:Y,onMouseLeave:oe,onKeyDown:M?ae:void 0,tabIndex:M?0:void 0,role:M?"button":"img","data-id":e,"data-testid":`rf__edge-${e}`,"aria-label":b.ariaLabel===null?void 0:b.ariaLabel||`Edge from ${b.source} to ${b.target}`,"aria-describedby":M?`${_u}-${p}`:void 0,ref:I,children:[!F&&g.jsx(L,{id:e,source:b.source,target:b.target,type:b.type,selected:b.selected,animated:b.animated,selectable:A,deletable:b.deletable??!0,label:b.label,labelStyle:b.labelStyle,labelShowBg:b.labelShowBg,labelBgStyle:b.labelBgStyle,labelBgPadding:b.labelBgPadding,labelBgBorderRadius:b.labelBgBorderRadius,sourceX:R,sourceY:D,targetX:k,targetY:H,sourcePosition:z,targetPosition:X,data:b.data,style:b.style,sourceHandleId:b.sourceHandle,targetHandleId:b.targetHandle,markerStart:ee,markerEnd:K,pathOptions:"pathOptions"in b?b.pathOptions:void 0,interactionWidth:b.interactionWidth}),T&&g.jsx(Ax,{edge:b,isReconnectable:T,reconnectRadius:d,onReconnect:l,onReconnectStart:f,onReconnectEnd:m,sourceX:R,sourceY:D,targetX:k,targetY:H,sourcePosition:z,targetPosition:X,setUpdateHover:O,setReconnecting:C})]})})}const Dx=e=>({edgesFocusable:e.edgesFocusable,edgesReconnectable:e.edgesReconnectable,elementsSelectable:e.elementsSelectable,connectionMode:e.connectionMode,onError:e.onError});function Ku({defaultMarkerColor:e,onlyRenderVisibleElements:t,rfId:n,edgeTypes:r,noPanClassName:o,onReconnect:i,onEdgeContextMenu:s,onEdgeMouseEnter:a,onEdgeMouseMove:c,onEdgeMouseLeave:u,onEdgeClick:d,reconnectRadius:l,onEdgeDoubleClick:f,onReconnectStart:m,onReconnectEnd:p,disableKeyboardA11y:y}){const{edgesFocusable:w,edgesReconnectable:v,elementsSelectable:_,onError:b}=he(Dx,ye),x=yx(t);return g.jsxs("div",{className:"react-flow__edges",children:[g.jsx(Cx,{defaultColor:e,rfId:n}),x.map(N=>g.jsx(Rx,{id:N,edgesFocusable:w,edgesReconnectable:v,elementsSelectable:_,noPanClassName:o,onReconnect:i,onContextMenu:s,onMouseEnter:a,onMouseMove:c,onMouseLeave:u,onClick:d,reconnectRadius:l,onDoubleClick:f,onReconnectStart:m,onReconnectEnd:p,rfId:n,onError:b,edgeTypes:r,disableKeyboardA11y:y},N))]})}Ku.displayName="EdgeRenderer";const Ix=h.memo(Ku),Px=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function Lx({children:e}){const t=he(Px);return g.jsx("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:t},children:e})}function jx(e){const t=Ci(),n=h.useRef(!1);h.useEffect(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}const $x=e=>{var t;return(t=e.panZoom)==null?void 0:t.syncViewport};function Ox(e){const t=he($x),n=pe();return h.useEffect(()=>{e&&(t==null||t(e),n.setState({transform:[e.x,e.y,e.zoom]}))},[e,t]),null}function Fx(e){return e.connection.inProgress?{...e.connection,to:Ln(e.connection.to,e.transform)}:{...e.connection}}function Hx(e){return Fx}function Ei(e){const t=Hx();return he(t,ye)}const zx=e=>({nodesConnectable:e.nodesConnectable,isValid:e.connection.isValid,inProgress:e.connection.inProgress,width:e.width,height:e.height});function Bx({containerStyle:e,style:t,type:n,component:r}){const{nodesConnectable:o,width:i,height:s,isValid:a,inProgress:c}=he(zx,ye);return!(i&&o&&c)?null:g.jsx("svg",{style:e,width:i,height:s,className:"react-flow__connectionline react-flow__container",children:g.jsx("g",{className:ve(["react-flow__connection",Xc(a)]),children:g.jsx(qu,{style:t,type:n,CustomComponent:r,isValid:a})})})}const qu=({style:e,type:t=it.Bezier,CustomComponent:n,isValid:r})=>{const{inProgress:o,from:i,fromNode:s,fromHandle:a,fromPosition:c,to:u,toNode:d,toHandle:l,toPosition:f}=Ei();if(!o)return;if(n)return g.jsx(n,{connectionLineType:t,connectionLineStyle:e,fromNode:s,fromHandle:a,fromX:i.x,fromY:i.y,toX:u.x,toY:u.y,fromPosition:c,toPosition:f,connectionStatus:Xc(r),toNode:d,toHandle:l});let m="";const p={sourceX:i.x,sourceY:i.y,sourcePosition:c,targetX:u.x,targetY:u.y,targetPosition:f};switch(t){case it.Bezier:[m]=ru(p);break;case it.SimpleBezier:[m]=$u(p);break;case it.Step:[m]=qo({...p,borderRadius:0});break;case it.SmoothStep:[m]=qo(p);break;default:[m]=iu(p)}return g.jsx("path",{d:m,fill:"none",className:"react-flow__connection-path",style:e})};qu.displayName="ConnectionLine";const Vx={};function qs(e=Vx){h.useRef(e),pe(),h.useEffect(()=>{},[e])}function Xx(){pe(),h.useRef(!1),h.useEffect(()=>{},[])}function Zu({nodeTypes:e,edgeTypes:t,onInit:n,onNodeClick:r,onEdgeClick:o,onNodeDoubleClick:i,onEdgeDoubleClick:s,onNodeMouseEnter:a,onNodeMouseMove:c,onNodeMouseLeave:u,onNodeContextMenu:d,onSelectionContextMenu:l,onSelectionStart:f,onSelectionEnd:m,connectionLineType:p,connectionLineStyle:y,connectionLineComponent:w,connectionLineContainerStyle:v,selectionKeyCode:_,selectionOnDrag:b,selectionMode:x,multiSelectionKeyCode:N,panActivationKeyCode:L,zoomActivationKeyCode:M,deleteKeyCode:T,onlyRenderVisibleElements:A,elementsSelectable:I,defaultViewport:$,translateExtent:O,minZoom:F,maxZoom:C,preventScrolling:P,defaultMarkerColor:E,zoomOnScroll:R,zoomOnPinch:D,panOnScroll:k,panOnScrollSpeed:H,panOnScrollMode:z,zoomOnDoubleClick:X,panOnDrag:ee,onPaneClick:K,onPaneMouseEnter:Q,onPaneMouseMove:Z,onPaneMouseLeave:re,onPaneScroll:U,onPaneContextMenu:Y,paneClickDistance:oe,nodeClickDistance:ae,onEdgeContextMenu:ne,onEdgeMouseEnter:J,onEdgeMouseMove:ue,onEdgeMouseLeave:ge,reconnectRadius:Ee,onReconnect:ct,onReconnectStart:Ie,onReconnectEnd:Be,noDragClassName:ut,noWheelClassName:lt,noPanClassName:dt,disableKeyboardA11y:Pe,nodeExtent:ft,rfId:ht,viewport:mt,onViewportChange:Et}){return qs(e),qs(t),Xx(),jx(n),Ox(mt),g.jsx(cx,{onPaneClick:K,onPaneMouseEnter:Q,onPaneMouseMove:Z,onPaneMouseLeave:re,onPaneContextMenu:Y,onPaneScroll:U,paneClickDistance:oe,deleteKeyCode:T,selectionKeyCode:_,selectionOnDrag:b,selectionMode:x,onSelectionStart:f,onSelectionEnd:m,multiSelectionKeyCode:N,panActivationKeyCode:L,zoomActivationKeyCode:M,elementsSelectable:I,zoomOnScroll:R,zoomOnPinch:D,zoomOnDoubleClick:X,panOnScroll:k,panOnScrollSpeed:H,panOnScrollMode:z,panOnDrag:ee,defaultViewport:$,translateExtent:O,minZoom:F,maxZoom:C,onSelectionContextMenu:l,preventScrolling:P,noDragClassName:ut,noWheelClassName:lt,noPanClassName:dt,disableKeyboardA11y:Pe,onViewportChange:Et,isControlledViewport:!!mt,children:g.jsxs(Lx,{children:[g.jsx(Ix,{edgeTypes:t,onEdgeClick:o,onEdgeDoubleClick:s,onReconnect:ct,onReconnectStart:Ie,onReconnectEnd:Be,onlyRenderVisibleElements:A,onEdgeContextMenu:ne,onEdgeMouseEnter:J,onEdgeMouseMove:ue,onEdgeMouseLeave:ge,reconnectRadius:Ee,defaultMarkerColor:E,noPanClassName:dt,disableKeyboardA11y:Pe,rfId:ht}),g.jsx(Bx,{style:y,type:p,component:w,containerStyle:v}),g.jsx("div",{className:"react-flow__edgelabel-renderer"}),g.jsx(gx,{nodeTypes:e,onNodeClick:r,onNodeDoubleClick:i,onNodeMouseEnter:a,onNodeMouseMove:c,onNodeMouseLeave:u,onNodeContextMenu:d,nodeClickDistance:ae,onlyRenderVisibleElements:A,noPanClassName:dt,noDragClassName:ut,disableKeyboardA11y:Pe,nodeExtent:ft,rfId:ht}),g.jsx("div",{className:"react-flow__viewport-portal"})]})})}Zu.displayName="GraphView";const Yx=h.memo(Zu),Zs=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:o,height:i,fitView:s,nodeOrigin:a,nodeExtent:c}={})=>{const u=new Map,d=new Map,l=new Map,f=new Map,m=r??t??[],p=n??e??[],y=a??[0,0],w=c??_n;au(l,f,m),Qo(p,u,d,{nodeOrigin:y,nodeExtent:w,elevateNodesOnSelect:!1});let v=[0,0,1];if(s&&o&&i){const _=Pn(u,{filter:L=>!!((L.width||L.initialWidth)&&(L.height||L.initialHeight))}),{x:b,y:x,zoom:N}=gi(_,o,i,.5,2,.1);v=[b,x,N]}return{rfId:"1",width:0,height:0,transform:v,nodes:p,nodeLookup:u,parentLookup:d,edges:m,edgeLookup:f,connectionLookup:l,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:n!==void 0,hasDefaultEdges:r!==void 0,panZoom:null,minZoom:.5,maxZoom:2,translateExtent:_n,nodeExtent:w,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:Ft.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:y,nodeDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!1,fitViewOnInit:!1,fitViewDone:!1,fitViewOnInitOptions:void 0,selectNodesOnDrag:!0,multiSelectionActive:!1,connection:{...Vc},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanSpeed:15,connectionRadius:20,onError:Q0,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1}},Wx=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:o,height:i,fitView:s,nodeOrigin:a,nodeExtent:c})=>f1((u,d)=>({...Zs({nodes:e,edges:t,width:o,height:i,fitView:s,nodeOrigin:a,nodeExtent:c,defaultNodes:n,defaultEdges:r}),setNodes:l=>{const{nodeLookup:f,parentLookup:m,nodeOrigin:p,elevateNodesOnSelect:y}=d();Qo(l,f,m,{nodeOrigin:p,nodeExtent:c,elevateNodesOnSelect:y,checkEquality:!0}),u({nodes:l})},setEdges:l=>{const{connectionLookup:f,edgeLookup:m}=d();au(f,m,l),u({edges:l})},setDefaultNodesAndEdges:(l,f)=>{if(l){const{setNodes:m}=d();m(l),u({hasDefaultNodes:!0})}if(f){const{setEdges:m}=d();m(f),u({hasDefaultEdges:!0})}},updateNodeInternals:(l,f={triggerFitView:!0})=>{const{triggerNodeChanges:m,nodeLookup:p,parentLookup:y,fitViewOnInit:w,fitViewDone:v,fitViewOnInitOptions:_,domNode:b,nodeOrigin:x,nodeExtent:N,debug:L,fitViewSync:M}=d(),{changes:T,updatedInternals:A}=my(l,p,y,b,x,N);if(A){if(dy(p,y,{nodeOrigin:x,nodeExtent:N}),f.triggerFitView){let I=v;!v&&w&&(I=M({..._,nodes:_==null?void 0:_.nodes})),u({fitViewDone:I})}else u({});(T==null?void 0:T.length)>0&&(L&&console.log("React Flow: trigger node changes",T),m==null||m(T))}},updateNodePositions:(l,f=!1)=>{const m=[],p=[];for(const[y,w]of l){const v=!!(w!=null&&w.expandParent&&(w!=null&&w.parentId)&&(w!=null&&w.position)),_={id:y,type:"position",position:v?{x:Math.max(0,w.position.x),y:Math.max(0,w.position.y)}:w.position,dragging:f};v&&m.push({id:y,parentId:w.parentId,rect:{...w.internals.positionAbsolute,width:w.measured.width,height:w.measured.height}}),p.push(_)}if(m.length>0){const{nodeLookup:y,parentLookup:w,nodeOrigin:v}=d(),_=wi(m,y,w,v);p.push(..._)}d().triggerNodeChanges(p)},triggerNodeChanges:l=>{const{onNodesChange:f,setNodes:m,nodes:p,hasDefaultNodes:y,debug:w}=d();if(l!=null&&l.length){if(y){const v=Mu(l,p);m(v)}w&&console.log("React Flow: trigger node changes",l),f==null||f(l)}},triggerEdgeChanges:l=>{const{onEdgesChange:f,setEdges:m,edges:p,hasDefaultEdges:y,debug:w}=d();if(l!=null&&l.length){if(y){const v=Nu(l,p);m(v)}w&&console.log("React Flow: trigger edge changes",l),f==null||f(l)}},addSelectedNodes:l=>{const{multiSelectionActive:f,edgeLookup:m,nodeLookup:p,triggerNodeChanges:y,triggerEdgeChanges:w}=d();if(f){const v=l.map(_=>gt(_,!0));y(v);return}y(At(p,new Set([...l]),!0)),w(At(m))},addSelectedEdges:l=>{const{multiSelectionActive:f,edgeLookup:m,nodeLookup:p,triggerNodeChanges:y,triggerEdgeChanges:w}=d();if(f){const v=l.map(_=>gt(_,!0));w(v);return}w(At(m,new Set([...l]))),y(At(p,new Set,!0))},unselectNodesAndEdges:({nodes:l,edges:f}={})=>{const{edges:m,nodes:p,nodeLookup:y,triggerNodeChanges:w,triggerEdgeChanges:v}=d(),_=l||p,b=f||m,x=_.map(L=>{const M=y.get(L.id);return M&&(M.selected=!1),gt(L.id,!1)}),N=b.map(L=>gt(L.id,!1));w(x),v(N)},setMinZoom:l=>{const{panZoom:f,maxZoom:m}=d();f==null||f.setScaleExtent([l,m]),u({minZoom:l})},setMaxZoom:l=>{const{panZoom:f,minZoom:m}=d();f==null||f.setScaleExtent([m,l]),u({maxZoom:l})},setTranslateExtent:l=>{var f;(f=d().panZoom)==null||f.setTranslateExtent(l),u({translateExtent:l})},setPaneClickDistance:l=>{var f;(f=d().panZoom)==null||f.setClickDistance(l)},resetSelectedElements:()=>{const{edges:l,nodes:f,triggerNodeChanges:m,triggerEdgeChanges:p}=d(),y=f.reduce((v,_)=>_.selected?[...v,gt(_.id,!1)]:v,[]),w=l.reduce((v,_)=>_.selected?[...v,gt(_.id,!1)]:v,[]);m(y),p(w)},setNodeExtent:l=>{const{nodes:f,nodeLookup:m,parentLookup:p,nodeOrigin:y,elevateNodesOnSelect:w,nodeExtent:v}=d();l[0][0]===v[0][0]&&l[0][1]===v[0][1]&&l[1][0]===v[1][0]&&l[1][1]===v[1][1]||(Qo(f,m,p,{nodeOrigin:y,nodeExtent:l,elevateNodesOnSelect:w,checkEquality:!1}),u({nodeExtent:l}))},panBy:l=>{const{transform:f,width:m,height:p,panZoom:y,translateExtent:w}=d();return py({delta:l,panZoom:y,transform:f,translateExtent:w,width:m,height:p})},fitView:l=>{const{panZoom:f,width:m,height:p,minZoom:y,maxZoom:w,nodeLookup:v}=d();if(!f)return Promise.resolve(!1);const _=Wo(v,l);return Go({nodes:_,width:m,height:p,panZoom:f,minZoom:y,maxZoom:w},l)},fitViewSync:l=>{const{panZoom:f,width:m,height:p,minZoom:y,maxZoom:w,nodeLookup:v}=d();if(!f)return!1;const _=Wo(v,l);return Go({nodes:_,width:m,height:p,panZoom:f,minZoom:y,maxZoom:w},l),_.size>0},cancelConnection:()=>{u({connection:{...Vc}})},updateConnection:l=>{u({connection:l})},reset:()=>u({...Zs()})}),Object.is);function Gx({initialNodes:e,initialEdges:t,defaultNodes:n,defaultEdges:r,initialWidth:o,initialHeight:i,fitView:s,nodeOrigin:a,nodeExtent:c,children:u}){const[d]=h.useState(()=>Wx({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:o,height:i,fitView:s,nodeOrigin:a,nodeExtent:c}));return g.jsx(h1,{value:d,children:g.jsx(j1,{children:u})})}function Ux({children:e,nodes:t,edges:n,defaultNodes:r,defaultEdges:o,width:i,height:s,fitView:a,nodeOrigin:c,nodeExtent:u}){return h.useContext(Hr)?g.jsx(g.Fragment,{children:e}):g.jsx(Gx,{initialNodes:t,initialEdges:n,defaultNodes:r,defaultEdges:o,initialWidth:i,initialHeight:s,fitView:a,nodeOrigin:c,nodeExtent:u,children:e})}const Kx={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};function qx({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,className:o,nodeTypes:i,edgeTypes:s,onNodeClick:a,onEdgeClick:c,onInit:u,onMove:d,onMoveStart:l,onMoveEnd:f,onConnect:m,onConnectStart:p,onConnectEnd:y,onClickConnectStart:w,onClickConnectEnd:v,onNodeMouseEnter:_,onNodeMouseMove:b,onNodeMouseLeave:x,onNodeContextMenu:N,onNodeDoubleClick:L,onNodeDragStart:M,onNodeDrag:T,onNodeDragStop:A,onNodesDelete:I,onEdgesDelete:$,onDelete:O,onSelectionChange:F,onSelectionDragStart:C,onSelectionDrag:P,onSelectionDragStop:E,onSelectionContextMenu:R,onSelectionStart:D,onSelectionEnd:k,onBeforeDelete:H,connectionMode:z,connectionLineType:X=it.Bezier,connectionLineStyle:ee,connectionLineComponent:K,connectionLineContainerStyle:Q,deleteKeyCode:Z="Backspace",selectionKeyCode:re="Shift",selectionOnDrag:U=!1,selectionMode:Y=En.Full,panActivationKeyCode:oe="Space",multiSelectionKeyCode:ae=vr()?"Meta":"Control",zoomActivationKeyCode:ne=vr()?"Meta":"Control",snapToGrid:J,snapGrid:ue,onlyRenderVisibleElements:ge=!1,selectNodesOnDrag:Ee,nodesDraggable:ct,nodesConnectable:Ie,nodesFocusable:Be,nodeOrigin:ut=Eu,edgesFocusable:lt,edgesReconnectable:dt,elementsSelectable:Pe=!0,defaultViewport:ft=M1,minZoom:ht=.5,maxZoom:mt=2,translateExtent:Et=_n,preventScrolling:Xt=!0,nodeExtent:pt,defaultMarkerColor:Yr="#b1b1b7",zoomOnScroll:Yt=!0,zoomOnPinch:Wt=!0,panOnScroll:Wr=!1,panOnScrollSpeed:Gr=.5,panOnScrollMode:Gt=wt.Free,zoomOnDoubleClick:Ut=!0,panOnDrag:Ur=!0,onPaneClick:Kt,onPaneMouseEnter:qt,onPaneMouseMove:Kr,onPaneMouseLeave:qr,onPaneScroll:Zt,onPaneContextMenu:Qt,paneClickDistance:Fn=0,nodeClickDistance:Jt=0,children:en,onReconnect:Zr,onReconnectStart:Qr,onReconnectEnd:tn,onEdgeContextMenu:Jr,onEdgeDoubleClick:S,onEdgeMouseEnter:j,onEdgeMouseMove:W,onEdgeMouseLeave:V,reconnectRadius:G=10,onNodesChange:se,onEdgesChange:q,noDragClassName:de="nodrag",noWheelClassName:le="nowheel",noPanClassName:xe="nopan",fitView:me,fitViewOptions:we,connectOnClick:Le,attributionPosition:St,proOptions:eo,defaultEdgeOptions:Sd,elevateNodesOnSelect:Md,elevateEdgesOnSelect:Nd,disableKeyboardA11y:$i=!1,autoPanOnConnect:Td,autoPanOnNodeDrag:kd,autoPanSpeed:Ad,connectionRadius:Rd,isValidConnection:Dd,onError:Id,style:Pd,id:Oi,nodeDragThreshold:Ld,viewport:jd,onViewportChange:$d,width:Od,height:Fd,colorMode:Hd="light",debug:zd,...Bd},Vd){const to=Oi||"1",Xd=A1(Hd);return g.jsx("div",{"data-testid":"rf__wrapper",...Bd,style:{...Pd,...Kx},ref:Vd,className:ve(["react-flow",o,Xd]),id:Oi,children:g.jsxs(Ux,{nodes:e,edges:t,width:Od,height:Fd,fitView:me,nodeOrigin:ut,nodeExtent:pt,children:[g.jsx(Yx,{onInit:u,onNodeClick:a,onEdgeClick:c,onNodeMouseEnter:_,onNodeMouseMove:b,onNodeMouseLeave:x,onNodeContextMenu:N,onNodeDoubleClick:L,nodeTypes:i,edgeTypes:s,connectionLineType:X,connectionLineStyle:ee,connectionLineComponent:K,connectionLineContainerStyle:Q,selectionKeyCode:re,selectionOnDrag:U,selectionMode:Y,deleteKeyCode:Z,multiSelectionKeyCode:ae,panActivationKeyCode:oe,zoomActivationKeyCode:ne,onlyRenderVisibleElements:ge,defaultViewport:ft,translateExtent:Et,minZoom:ht,maxZoom:mt,preventScrolling:Xt,zoomOnScroll:Yt,zoomOnPinch:Wt,zoomOnDoubleClick:Ut,panOnScroll:Wr,panOnScrollSpeed:Gr,panOnScrollMode:Gt,panOnDrag:Ur,onPaneClick:Kt,onPaneMouseEnter:qt,onPaneMouseMove:Kr,onPaneMouseLeave:qr,onPaneScroll:Zt,onPaneContextMenu:Qt,paneClickDistance:Fn,nodeClickDistance:Jt,onSelectionContextMenu:R,onSelectionStart:D,onSelectionEnd:k,onReconnect:Zr,onReconnectStart:Qr,onReconnectEnd:tn,onEdgeContextMenu:Jr,onEdgeDoubleClick:S,onEdgeMouseEnter:j,onEdgeMouseMove:W,onEdgeMouseLeave:V,reconnectRadius:G,defaultMarkerColor:Yr,noDragClassName:de,noWheelClassName:le,noPanClassName:xe,rfId:to,disableKeyboardA11y:$i,nodeExtent:pt,viewport:jd,onViewportChange:$d}),g.jsx(k1,{nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:m,onConnectStart:p,onConnectEnd:y,onClickConnectStart:w,onClickConnectEnd:v,nodesDraggable:ct,nodesConnectable:Ie,nodesFocusable:Be,edgesFocusable:lt,edgesReconnectable:dt,elementsSelectable:Pe,elevateNodesOnSelect:Md,elevateEdgesOnSelect:Nd,minZoom:ht,maxZoom:mt,nodeExtent:pt,onNodesChange:se,onEdgesChange:q,snapToGrid:J,snapGrid:ue,connectionMode:z,translateExtent:Et,connectOnClick:Le,defaultEdgeOptions:Sd,fitView:me,fitViewOptions:we,onNodesDelete:I,onEdgesDelete:$,onDelete:O,onNodeDragStart:M,onNodeDrag:T,onNodeDragStop:A,onSelectionDrag:P,onSelectionDragStart:C,onSelectionDragStop:E,onMove:d,onMoveStart:l,onMoveEnd:f,noPanClassName:xe,nodeOrigin:ut,rfId:to,autoPanOnConnect:Td,autoPanOnNodeDrag:kd,autoPanSpeed:Ad,onError:Id,connectionRadius:Rd,isValidConnection:Dd,selectNodesOnDrag:Ee,nodeDragThreshold:Ld,onBeforeDelete:H,paneClickDistance:Fn,debug:zd}),g.jsx(S1,{onSelectionChange:F}),en,g.jsx(w1,{proOptions:eo,position:St}),g.jsx(x1,{rfId:to,disableKeyboardA11y:$i})]})})}var h2=Tu(qx);function Qu(){const e=pe();return h.useCallback(t=>{const{domNode:n,updateNodeInternals:r}=e.getState(),o=Array.isArray(t)?t:[t],i=new Map;o.forEach(s=>{const a=n==null?void 0:n.querySelector(`.react-flow__node[data-id="${s}"]`);a&&i.set(s,{id:s,nodeElement:a,force:!0})}),requestAnimationFrame(()=>r(i,{triggerFitView:!1}))},[])}const Zx=e=>({x:e.transform[0],y:e.transform[1],zoom:e.transform[2]});function m2(){return he(Zx,ye)}function p2(e){const[t,n]=h.useState(e),r=h.useCallback(o=>n(i=>Mu(o,i)),[]);return[t,n,r]}function g2(e){const[t,n]=h.useState(e),r=h.useCallback(o=>n(i=>Nu(o,i)),[]);return[t,n,r]}function y2({onStart:e,onChange:t,onEnd:n}){const r=pe();h.useEffect(()=>{r.setState({onViewportChangeStart:e})},[e]),h.useEffect(()=>{r.setState({onViewportChange:t})},[t]),h.useEffect(()=>{r.setState({onViewportChangeEnd:n})},[n])}function Qx({dimensions:e,lineWidth:t,variant:n,className:r}){return g.jsx("path",{strokeWidth:t,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`,className:ve(["react-flow__background-pattern",n,r])})}function Jx({radius:e,className:t}){return g.jsx("circle",{cx:e,cy:e,r:e,className:ve(["react-flow__background-pattern","dots",t])})}var st;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(st||(st={}));const ev={[st.Dots]:1,[st.Lines]:1,[st.Cross]:6},tv=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function Ju({id:e,variant:t=st.Dots,gap:n=20,size:r,lineWidth:o=1,offset:i=0,color:s,bgColor:a,style:c,className:u,patternClassName:d}){const l=h.useRef(null),{transform:f,patternId:m}=he(tv,ye),p=r||ev[t],y=t===st.Dots,w=t===st.Cross,v=Array.isArray(n)?n:[n,n],_=[v[0]*f[2]||1,v[1]*f[2]||1],b=p*f[2],x=Array.isArray(i)?i:[i,i],N=w?[b,b]:_,L=[x[0]*f[2]||1+N[0]/2,x[1]*f[2]||1+N[1]/2],M=`${m}${e||""}`;return g.jsxs("svg",{className:ve(["react-flow__background",u]),style:{...c,...zr,"--xy-background-color-props":a,"--xy-background-pattern-color-props":s},ref:l,"data-testid":"rf__background",children:[g.jsx("pattern",{id:M,x:f[0]%_[0],y:f[1]%_[1],width:_[0],height:_[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${L[0]},-${L[1]})`,children:y?g.jsx(Jx,{radius:b/2,className:d}):g.jsx(Qx,{dimensions:N,lineWidth:o,variant:t,className:d})}),g.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${M})`})]})}Ju.displayName="Background";const x2=h.memo(Ju);function nv(){return g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:g.jsx("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function rv(){return g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:g.jsx("path",{d:"M0 0h32v4.2H0z"})})}function ov(){return g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:g.jsx("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function iv(){return g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:g.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function sv(){return g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:g.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function Qn({children:e,className:t,...n}){return g.jsx("button",{type:"button",className:ve(["react-flow__controls-button",t]),...n,children:e})}const av=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom});function el({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:r=!0,fitViewOptions:o,onZoomIn:i,onZoomOut:s,onFitView:a,onInteractiveChange:c,className:u,children:d,position:l="bottom-left",orientation:f="vertical","aria-label":m="React Flow controls"}){const p=pe(),{isInteractive:y,minZoomReached:w,maxZoomReached:v}=he(av,ye),{zoomIn:_,zoomOut:b,fitView:x}=Ci(),N=()=>{_(),i==null||i()},L=()=>{b(),s==null||s()},M=()=>{x(o),a==null||a()},T=()=>{p.setState({nodesDraggable:!y,nodesConnectable:!y,elementsSelectable:!y}),c==null||c(!y)},A=f==="horizontal"?"horizontal":"vertical";return g.jsxs(bi,{className:ve(["react-flow__controls",A,u]),position:l,style:e,"data-testid":"rf__controls","aria-label":m,children:[t&&g.jsxs(g.Fragment,{children:[g.jsx(Qn,{onClick:N,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:v,children:g.jsx(nv,{})}),g.jsx(Qn,{onClick:L,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:w,children:g.jsx(rv,{})})]}),n&&g.jsx(Qn,{className:"react-flow__controls-fitview",onClick:M,title:"fit view","aria-label":"fit view",children:g.jsx(ov,{})}),r&&g.jsx(Qn,{className:"react-flow__controls-interactive",onClick:T,title:"toggle interactivity","aria-label":"toggle interactivity",children:y?g.jsx(sv,{}):g.jsx(iv,{})}),d]})}el.displayName="Controls";const v2=h.memo(el);function cv({id:e,x:t,y:n,width:r,height:o,style:i,color:s,strokeColor:a,strokeWidth:c,className:u,borderRadius:d,shapeRendering:l,selected:f,onClick:m}){const{background:p,backgroundColor:y}=i||{},w=s||p||y;return g.jsx("rect",{className:ve(["react-flow__minimap-node",{selected:f},u]),x:t,y:n,rx:d,ry:d,width:r,height:o,style:{fill:w,stroke:a,strokeWidth:c},shapeRendering:l,onClick:m?v=>m(v,e):void 0})}const uv=h.memo(cv),lv=e=>e.nodes.map(t=>t.id),vo=e=>e instanceof Function?e:()=>e;function dv({nodeStrokeColor:e,nodeColor:t,nodeClassName:n="",nodeBorderRadius:r=5,nodeStrokeWidth:o,nodeComponent:i=uv,onClick:s}){const a=he(lv,ye),c=vo(t),u=vo(e),d=vo(n),l=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return g.jsx(g.Fragment,{children:a.map(f=>g.jsx(hv,{id:f,nodeColorFunc:c,nodeStrokeColorFunc:u,nodeClassNameFunc:d,nodeBorderRadius:r,nodeStrokeWidth:o,NodeComponent:i,onClick:s,shapeRendering:l},f))})}function fv({id:e,nodeColorFunc:t,nodeStrokeColorFunc:n,nodeClassNameFunc:r,nodeBorderRadius:o,nodeStrokeWidth:i,shapeRendering:s,NodeComponent:a,onClick:c}){const{node:u,x:d,y:l,width:f,height:m}=he(p=>{const y=p.nodeLookup.get(e),{x:w,y:v}=y.internals.positionAbsolute,{width:_,height:b}=Je(y);return{node:y,x:w,y:v,width:_,height:b}},ye);return!u||u.hidden||!Qc(u)?null:g.jsx(a,{x:d,y:l,width:f,height:m,style:u.style,selected:!!u.selected,className:r(u),color:t(u),borderRadius:o,strokeColor:n(u),strokeWidth:i,shapeRendering:s,onClick:c,id:u.id})}const hv=h.memo(fv);var mv=h.memo(dv);const pv=200,gv=150,yv=e=>{const t={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:t,boundingRect:e.nodeLookup.size>0?qc(Pn(e.nodeLookup),t):t,rfId:e.rfId,panZoom:e.panZoom,translateExtent:e.translateExtent,flowWidth:e.width,flowHeight:e.height}},xv="react-flow__minimap-desc";function tl({style:e,className:t,nodeStrokeColor:n,nodeColor:r,nodeClassName:o="",nodeBorderRadius:i=5,nodeStrokeWidth:s,nodeComponent:a,bgColor:c,maskColor:u,maskStrokeColor:d,maskStrokeWidth:l,position:f="bottom-right",onClick:m,onNodeClick:p,pannable:y=!1,zoomable:w=!1,ariaLabel:v="React Flow mini map",inversePan:_,zoomStep:b=10,offsetScale:x=5}){const N=pe(),L=h.useRef(null),{boundingRect:M,viewBB:T,rfId:A,panZoom:I,translateExtent:$,flowWidth:O,flowHeight:F}=he(yv,ye),C=(e==null?void 0:e.width)??pv,P=(e==null?void 0:e.height)??gv,E=M.width/C,R=M.height/P,D=Math.max(E,R),k=D*C,H=D*P,z=x*D,X=M.x-(k-M.width)/2-z,ee=M.y-(H-M.height)/2-z,K=k+z*2,Q=H+z*2,Z=`${xv}-${A}`,re=h.useRef(0),U=h.useRef();re.current=D,h.useEffect(()=>{if(L.current&&I)return U.current=_y({domNode:L.current,panZoom:I,getTransform:()=>N.getState().transform,getViewScale:()=>re.current}),()=>{var ae;(ae=U.current)==null||ae.destroy()}},[I]),h.useEffect(()=>{var ae;(ae=U.current)==null||ae.update({translateExtent:$,width:O,height:F,inversePan:_,pannable:y,zoomStep:b,zoomable:w})},[y,w,_,b,$,O,F]);const Y=m?ae=>{var ue;const[ne,J]=((ue=U.current)==null?void 0:ue.pointer(ae))||[0,0];m(ae,{x:ne,y:J})}:void 0,oe=p?h.useCallback((ae,ne)=>{const J=N.getState().nodeLookup.get(ne);p(ae,J)},[]):void 0;return g.jsx(bi,{position:f,style:{...e,"--xy-minimap-background-color-props":typeof c=="string"?c:void 0,"--xy-minimap-mask-background-color-props":typeof u=="string"?u:void 0,"--xy-minimap-mask-stroke-color-props":typeof d=="string"?d:void 0,"--xy-minimap-mask-stroke-width-props":typeof l=="number"?l*D:void 0,"--xy-minimap-node-background-color-props":typeof r=="string"?r:void 0,"--xy-minimap-node-stroke-color-props":typeof n=="string"?n:void 0,"--xy-minimap-node-stroke-width-props":typeof s=="string"?s:void 0},className:ve(["react-flow__minimap",t]),"data-testid":"rf__minimap",children:g.jsxs("svg",{width:C,height:P,viewBox:`${X} ${ee} ${K} ${Q}`,className:"react-flow__minimap-svg",role:"img","aria-labelledby":Z,ref:L,onClick:Y,children:[v&&g.jsx("title",{id:Z,children:v}),g.jsx(mv,{onClick:oe,nodeColor:r,nodeStrokeColor:n,nodeBorderRadius:i,nodeClassName:o,nodeStrokeWidth:s,nodeComponent:a}),g.jsx("path",{className:"react-flow__minimap-mask",d:`M${X-z},${ee-z}h${K+z*2}v${Q+z*2}h${-K-z*2}z
        M${T.x},${T.y}h${T.width}v${T.height}h${-T.width}z`,fillRule:"evenodd",pointerEvents:"none"})]})})}tl.displayName="MiniMap";const w2=h.memo(tl);function vv({nodeId:e,position:t,variant:n=Lt.Handle,className:r,style:o={},children:i,color:s,minWidth:a=10,minHeight:c=10,maxWidth:u=Number.MAX_VALUE,maxHeight:d=Number.MAX_VALUE,keepAspectRatio:l=!1,shouldResize:f,onResizeStart:m,onResize:p,onResizeEnd:y}){const w=Du(),v=typeof e=="string"?e:w,_=pe(),b=h.useRef(null),x=n===Lt.Line?"right":"bottom-right",N=t??x,L=h.useRef(null);h.useEffect(()=>{if(!(!b.current||!v))return L.current||(L.current=Hy({domNode:b.current,nodeId:v,getStoreItems:()=>{const{nodeLookup:I,transform:$,snapGrid:O,snapToGrid:F,nodeOrigin:C,domNode:P}=_.getState();return{nodeLookup:I,transform:$,snapGrid:O,snapToGrid:F,nodeOrigin:C,paneDomNode:P}},onChange:(I,$)=>{const{triggerNodeChanges:O,nodeLookup:F,parentLookup:C,nodeOrigin:P}=_.getState(),E=[],R={x:I.x,y:I.y},D=F.get(v);if(D&&D.expandParent&&D.parentId){const k=D.origin??P,H=I.width??D.measured.width,z=I.height??D.measured.height,X={id:D.id,parentId:D.parentId,rect:{width:H,height:z,...Jc({x:I.x??D.position.x,y:I.y??D.position.y},{width:H,height:z},D.parentId,F,k)}},ee=wi([X],F,C,P);E.push(...ee),R.x=I.x?Math.max(k[0]*H,I.x):void 0,R.y=I.y?Math.max(k[1]*z,I.y):void 0}if(R.x!==void 0&&R.y!==void 0){const k={id:v,type:"position",position:{...R}};E.push(k)}if(I.width!==void 0&&I.height!==void 0){const k={id:v,type:"dimensions",resizing:!0,setAttributes:!0,dimensions:{width:I.width,height:I.height}};E.push(k)}for(const k of $){const H={...k,type:"position"};E.push(H)}O(E)},onEnd:()=>{const I={id:v,type:"dimensions",resizing:!1};_.getState().triggerNodeChanges([I])}})),L.current.update({controlPosition:N,boundaries:{minWidth:a,minHeight:c,maxWidth:u,maxHeight:d},keepAspectRatio:l,onResizeStart:m,onResize:p,onResizeEnd:y,shouldResize:f}),()=>{var I;(I=L.current)==null||I.destroy()}},[N,a,c,u,d,l,m,p,y,f]);const M=N.split("-"),T=n===Lt.Line?"borderColor":"backgroundColor",A=s?{...o,[T]:s}:o;return g.jsx("div",{className:ve(["react-flow__resize-control","nodrag",...M,n,r]),ref:b,style:A,children:i})}const Qs=h.memo(vv);function wv({nodeId:e,isVisible:t=!0,handleClassName:n,handleStyle:r,lineClassName:o,lineStyle:i,color:s,minWidth:a=10,minHeight:c=10,maxWidth:u=Number.MAX_VALUE,maxHeight:d=Number.MAX_VALUE,keepAspectRatio:l=!1,shouldResize:f,onResizeStart:m,onResize:p,onResizeEnd:y}){return t?g.jsxs(g.Fragment,{children:[Iy.map(w=>g.jsx(Qs,{className:o,style:i,nodeId:e,position:w,variant:Lt.Line,color:s,minWidth:a,minHeight:c,maxWidth:u,maxHeight:d,onResizeStart:m,keepAspectRatio:l,shouldResize:f,onResize:p,onResizeEnd:y},w)),Dy.map(w=>g.jsx(Qs,{className:n,style:r,nodeId:e,position:w,color:s,minWidth:a,minHeight:c,maxWidth:u,maxHeight:d,onResizeStart:m,keepAspectRatio:l,shouldResize:f,onResize:p,onResizeEnd:y},w))]}):null}const bv=ie.object({id:ie.string(),name:ie.string(),unique:ie.boolean(),fieldIds:ie.array(ie.string()),createdAt:ie.number()}),Cv=({aggregatedIndexes:e,fields:t})=>e.map(n=>({id:Xe(),name:n.name,unique:!!n.unique,fieldIds:n.columns.sort((r,o)=>r.position-o.position).map(r=>{var o;return(o=t.find(i=>i.name===r.name))==null?void 0:o.id}).filter(r=>r!==void 0),createdAt:Date.now()})),_v=[{name:"uint8",id:"uint8"},{name:"uint16",id:"uint16"},{name:"uint32",id:"uint32"},{name:"uint64",id:"uint64"},{name:"uint128",id:"uint128"},{name:"uint256",id:"uint256"},{name:"int8",id:"int8"},{name:"int16",id:"int16"},{name:"int32",id:"int32"},{name:"int64",id:"int64"},{name:"int128",id:"int128"},{name:"int256",id:"int256"},{name:"float32",id:"float32"},{name:"float64",id:"float64"},{name:"tinyint",id:"tinyint"},{name:"int1",id:"int1"},{name:"byte",id:"byte"},{name:"tinyint signed",id:"tinyint_signed"},{name:"int1 signed",id:"int1_signed"},{name:"smallint",id:"smallint"},{name:"smallint signed",id:"smallint_signed"},{name:"int",id:"int"},{name:"integer",id:"integer"},{name:"mediumint",id:"mediumint"},{name:"mediumint signed",id:"mediumint_signed"},{name:"int signed",id:"int_signed"},{name:"integer signed",id:"integer_signed"},{name:"bigint",id:"bigint"},{name:"signed",id:"signed"},{name:"bigint signed",id:"bigint_signed"},{name:"time",id:"time"},{name:"float",id:"float"},{name:"double",id:"double"},{name:"real",id:"real"},{name:"single",id:"single"},{name:"double precision",id:"double_precision"},{name:"longtext",id:"longtext"},{name:"mediumtext",id:"mediumtext"},{name:"tinytext",id:"tinytext"},{name:"text",id:"text"},{name:"longblob",id:"longblob"},{name:"mediumblob",id:"mediumblob"},{name:"tinyblob",id:"tinyblob"},{name:"blob",id:"blob"},{name:"varchar",id:"varchar",hasCharMaxLength:!0},{name:"char",id:"char",hasCharMaxLength:!0},{name:"char large object",id:"char_large_object"},{name:"char varying",id:"char_varying",hasCharMaxLength:!0},{name:"character large object",id:"character_large_object"},{name:"character varying",id:"character_varying",hasCharMaxLength:!0},{name:"nchar large object",id:"nchar_large_object"},{name:"nchar varying",id:"nchar_varying",hasCharMaxLength:!0},{name:"national character large object",id:"national_character_large_object"},{name:"national character varying",id:"national_character_varying",hasCharMaxLength:!0},{name:"national char varying",id:"national_char_varying",hasCharMaxLength:!0},{name:"national character",id:"national_character",hasCharMaxLength:!0},{name:"national char",id:"national_char",hasCharMaxLength:!0},{name:"binary large object",id:"binary_large_object"},{name:"binary varying",id:"binary_varying",hasCharMaxLength:!0},{name:"fixedstring",id:"fixedstring",hasCharMaxLength:!0},{name:"string",id:"string"},{name:"date",id:"date"},{name:"date32",id:"date32"},{name:"datetime",id:"datetime"},{name:"datetime64",id:"datetime64"},{name:"object",id:"object"},{name:"json",id:"json"},{name:"uuid",id:"uuid"},{name:"boolean",id:"boolean"},{name:"enum",id:"enum"},{name:"lowcardinality",id:"lowcardinality"},{name:"array",id:"array"},{name:"tuple",id:"tuple"},{name:"map",id:"map"},{name:"simpleaggregatefunction",id:"simpleaggregatefunction"},{name:"aggregatefunction",id:"aggregatefunction"},{name:"nested",id:"nested"},{name:"ipv4",id:"ipv4"},{name:"ipv6",id:"ipv6"},{name:"point",id:"point"},{name:"ring",id:"ring"},{name:"polygon",id:"polygon"},{name:"multipolygon",id:"multipolygon"},{name:"expression",id:"expression"},{name:"set",id:"set"},{name:"nothing",id:"nothing"},{name:"interval",id:"interval"}],Ev=[{name:"varchar",id:"varchar",hasCharMaxLength:!0,usageLevel:1},{name:"int",id:"int",usageLevel:1},{name:"text",id:"text",usageLevel:1},{name:"boolean",id:"boolean",usageLevel:1},{name:"date",id:"date",usageLevel:1},{name:"timestamp",id:"timestamp",usageLevel:1},{name:"decimal",id:"decimal",usageLevel:2},{name:"datetime",id:"datetime",usageLevel:2},{name:"json",id:"json",usageLevel:2},{name:"uuid",id:"uuid",usageLevel:2},{name:"bigint",id:"bigint"},{name:"binary",id:"binary",hasCharMaxLength:!0},{name:"blob",id:"blob"},{name:"char",id:"char",hasCharMaxLength:!0},{name:"double",id:"double"},{name:"enum",id:"enum"},{name:"float",id:"float"},{name:"numeric",id:"numeric"},{name:"real",id:"real"},{name:"set",id:"set"},{name:"smallint",id:"smallint"},{name:"time",id:"time"},{name:"varbinary",id:"varbinary",hasCharMaxLength:!0}],Sv=[{name:"int",id:"int",usageLevel:1},{name:"bigint",id:"bigint",usageLevel:1},{name:"decimal",id:"decimal",usageLevel:1},{name:"boolean",id:"boolean",usageLevel:1},{name:"datetime",id:"datetime",usageLevel:1},{name:"date",id:"date",usageLevel:1},{name:"timestamp",id:"timestamp",usageLevel:1},{name:"varchar",id:"varchar",hasCharMaxLength:!0,usageLevel:1},{name:"text",id:"text",usageLevel:1},{name:"json",id:"json",usageLevel:2},{name:"uuid",id:"uuid",usageLevel:2},{name:"tinyint",id:"tinyint"},{name:"smallint",id:"smallint"},{name:"mediumint",id:"mediumint"},{name:"numeric",id:"numeric"},{name:"float",id:"float"},{name:"double",id:"double"},{name:"bit",id:"bit"},{name:"bool",id:"bool"},{name:"time",id:"time"},{name:"year",id:"year"},{name:"char",id:"char",hasCharMaxLength:!0},{name:"binary",id:"binary",hasCharMaxLength:!0},{name:"varbinary",id:"varbinary",hasCharMaxLength:!0},{name:"tinyblob",id:"tinyblob"},{name:"blob",id:"blob"},{name:"mediumblob",id:"mediumblob"},{name:"longblob",id:"longblob"},{name:"tinytext",id:"tinytext"},{name:"mediumtext",id:"mediumtext"},{name:"longtext",id:"longtext"},{name:"enum",id:"enum"},{name:"set",id:"set"},{name:"geometry",id:"geometry"},{name:"point",id:"point"},{name:"linestring",id:"linestring"},{name:"polygon",id:"polygon"},{name:"multipoint",id:"multipoint"},{name:"multilinestring",id:"multilinestring"},{name:"multipolygon",id:"multipolygon"},{name:"geometrycollection",id:"geometrycollection"}],Mv=[{name:"int",id:"int",usageLevel:1},{name:"varchar",id:"varchar",hasCharMaxLength:!0,usageLevel:1},{name:"text",id:"text",usageLevel:1},{name:"boolean",id:"boolean",usageLevel:1},{name:"timestamp",id:"timestamp",usageLevel:1},{name:"date",id:"date",usageLevel:1},{name:"bigint",id:"bigint",usageLevel:2},{name:"decimal",id:"decimal",usageLevel:2},{name:"datetime",id:"datetime",usageLevel:2},{name:"json",id:"json",usageLevel:2},{name:"tinyint",id:"tinyint"},{name:"smallint",id:"smallint"},{name:"mediumint",id:"mediumint"},{name:"float",id:"float"},{name:"double",id:"double"},{name:"bit",id:"bit"},{name:"char",id:"char",hasCharMaxLength:!0},{name:"tinytext",id:"tinytext"},{name:"mediumtext",id:"mediumtext"},{name:"longtext",id:"longtext"},{name:"binary",id:"binary"},{name:"varbinary",id:"varbinary"},{name:"tinyblob",id:"tinyblob"},{name:"blob",id:"blob"},{name:"mediumblob",id:"mediumblob"},{name:"longblob",id:"longblob"},{name:"enum",id:"enum"},{name:"set",id:"set"},{name:"time",id:"time"},{name:"year",id:"year"},{name:"geometry",id:"geometry"},{name:"point",id:"point"},{name:"linestring",id:"linestring"},{name:"polygon",id:"polygon"},{name:"multipoint",id:"multipoint"},{name:"multilinestring",id:"multilinestring"},{name:"multipolygon",id:"multipolygon"},{name:"geometrycollection",id:"geometrycollection"}],Js=[{name:"integer",id:"integer",usageLevel:1},{name:"varchar",id:"varchar",hasCharMaxLength:!0,usageLevel:1},{name:"text",id:"text",usageLevel:1},{name:"boolean",id:"boolean",usageLevel:1},{name:"timestamp",id:"timestamp",usageLevel:1},{name:"date",id:"date",usageLevel:1},{name:"bigint",id:"bigint",usageLevel:2},{name:"decimal",id:"decimal",usageLevel:2},{name:"serial",id:"serial",usageLevel:2},{name:"json",id:"json",usageLevel:2},{name:"jsonb",id:"jsonb",usageLevel:2},{name:"uuid",id:"uuid",usageLevel:2},{name:"timestamp with time zone",id:"timestamp_with_time_zone",usageLevel:2},{name:"numeric",id:"numeric"},{name:"real",id:"real"},{name:"double precision",id:"double_precision"},{name:"smallserial",id:"smallserial"},{name:"bigserial",id:"bigserial"},{name:"money",id:"money"},{name:"smallint",id:"smallint"},{name:"char",id:"char",hasCharMaxLength:!0},{name:"character varying",id:"character_varying",hasCharMaxLength:!0},{name:"time",id:"time"},{name:"timestamp without time zone",id:"timestamp_without_time_zone"},{name:"time with time zone",id:"time_with_time_zone"},{name:"time without time zone",id:"time_without_time_zone"},{name:"interval",id:"interval"},{name:"bytea",id:"bytea"},{name:"enum",id:"enum"},{name:"point",id:"point"},{name:"line",id:"line"},{name:"lseg",id:"lseg"},{name:"box",id:"box"},{name:"path",id:"path"},{name:"polygon",id:"polygon"},{name:"circle",id:"circle"},{name:"cidr",id:"cidr"},{name:"inet",id:"inet"},{name:"macaddr",id:"macaddr"},{name:"macaddr8",id:"macaddr8"},{name:"bit",id:"bit"},{name:"bit varying",id:"bit_varying"},{name:"tsvector",id:"tsvector"},{name:"tsquery",id:"tsquery"},{name:"xml",id:"xml"},{name:"array",id:"array"},{name:"int4range",id:"int4range"},{name:"int8range",id:"int8range"},{name:"numrange",id:"numrange"},{name:"tsrange",id:"tsrange"},{name:"tstzrange",id:"tstzrange"},{name:"daterange",id:"daterange"},{name:"oid",id:"oid"},{name:"regproc",id:"regproc"},{name:"regprocedure",id:"regprocedure"},{name:"regoper",id:"regoper"},{name:"regoperator",id:"regoperator"},{name:"regclass",id:"regclass"},{name:"regtype",id:"regtype"},{name:"regrole",id:"regrole"},{name:"regnamespace",id:"regnamespace"},{name:"regconfig",id:"regconfig"},{name:"regdictionary",id:"regdictionary"},{name:"user-defined",id:"user-defined"}],Nv=[{name:"int",id:"int",usageLevel:1},{name:"bit",id:"bit",usageLevel:1},{name:"varchar",id:"varchar",hasCharMaxLength:!0,usageLevel:1},{name:"nvarchar",id:"nvarchar",hasCharMaxLength:!0,usageLevel:1},{name:"text",id:"text",usageLevel:1},{name:"datetime",id:"datetime",usageLevel:1},{name:"date",id:"date",usageLevel:1},{name:"bigint",id:"bigint",usageLevel:2},{name:"decimal",id:"decimal",usageLevel:2},{name:"datetime2",id:"datetime2",usageLevel:2},{name:"uniqueidentifier",id:"uniqueidentifier",usageLevel:2},{name:"json",id:"json",usageLevel:2},{name:"numeric",id:"numeric"},{name:"smallint",id:"smallint"},{name:"smallmoney",id:"smallmoney"},{name:"tinyint",id:"tinyint"},{name:"money",id:"money"},{name:"float",id:"float"},{name:"real",id:"real"},{name:"char",id:"char",hasCharMaxLength:!0},{name:"nchar",id:"nchar",hasCharMaxLength:!0},{name:"ntext",id:"ntext"},{name:"binary",id:"binary",hasCharMaxLength:!0},{name:"varbinary",id:"varbinary",hasCharMaxLength:!0},{name:"image",id:"image"},{name:"datetimeoffset",id:"datetimeoffset"},{name:"smalldatetime",id:"smalldatetime"},{name:"time",id:"time"},{name:"timestamp",id:"timestamp"},{name:"xml",id:"xml"},{name:"cursor",id:"cursor"},{name:"hierarchyid",id:"hierarchyid"},{name:"sql_variant",id:"sql_variant"},{name:"geometry",id:"geometry"},{name:"geography",id:"geography"}],Tv=[{name:"integer",id:"integer",usageLevel:1},{name:"int",id:"int",usageLevel:1},{name:"text",id:"text",usageLevel:1},{name:"varchar",id:"varchar",hasCharMaxLength:!0,usageLevel:1},{name:"date",id:"date",usageLevel:1},{name:"datetime",id:"datetime",usageLevel:1},{name:"boolean",id:"boolean",usageLevel:1},{name:"decimal",id:"decimal",usageLevel:2},{name:"json",id:"json",usageLevel:2},{name:"real",id:"real"},{name:"numeric",id:"numeric"},{name:"float",id:"float"},{name:"blob",id:"blob"}],kv=ie.object({id:ie.string(),name:ie.string()}),Ve={[ce.GENERIC]:Ev,[ce.POSTGRESQL]:Js,[ce.MYSQL]:Mv,[ce.SQL_SERVER]:Nv,[ce.MARIADB]:Sv,[ce.SQLITE]:Tv,[ce.CLICKHOUSE]:_v,[ce.COCKROACHDB]:Js},nt=e=>[...e].sort((n,r)=>(n.usageLevel||3)<(r.usageLevel||3)?-1:(n.usageLevel||3)>(r.usageLevel||3)?1:n.name.localeCompare(r.name)),b2={[ce.GENERIC]:nt([...Ve[ce.GENERIC]]),[ce.POSTGRESQL]:nt([...Ve[ce.POSTGRESQL]]),[ce.MYSQL]:nt([...Ve[ce.MYSQL]]),[ce.SQL_SERVER]:nt([...Ve[ce.SQL_SERVER]]),[ce.MARIADB]:nt([...Ve[ce.MARIADB]]),[ce.SQLITE]:nt([...Ve[ce.SQLITE]]),[ce.CLICKHOUSE]:nt([...Ve[ce.CLICKHOUSE]]),[ce.COCKROACHDB]:nt([...Ve[ce.COCKROACHDB]])},Av={[ce.POSTGRESQL]:{serial:["integer"],smallserial:["smallint"],bigserial:["bigint"]},[ce.MYSQL]:{int:["integer"],tinyint:["boolean"]},[ce.SQL_SERVER]:{},[ce.MARIADB]:{},[ce.SQLITE]:{},[ce.CLICKHOUSE]:{},[ce.COCKROACHDB]:{},[ce.GENERIC]:{}};function C2(e,t,n){var o,i;if(e.id===t.id)return!0;const r=Av[n]||{};return((o=r[e.id])==null?void 0:o.includes(t.id))||((i=r[t.id])==null?void 0:i.includes(e.id))}const Rv=Object.values(Ve).flat(),_2=e=>({id:e.id,name:e.name}),E2=(e,t)=>(t?Ve[t]:Rv).find(r=>r.id===e),Dv=ie.object({id:ie.string(),name:ie.string(),type:kv,primaryKey:ie.boolean(),unique:ie.boolean(),nullable:ie.boolean(),createdAt:ie.number(),characterMaximumLength:ie.string().optional(),precision:ie.number().optional(),scale:ie.number().optional(),default:ie.string().optional(),collation:ie.string().optional(),comments:ie.string().optional()}),Iv=({columns:e,tableSchema:t,tableInfo:n,primaryKeys:r,aggregatedIndexes:o})=>{const i=e.filter(c=>Rt(c.schema)===t&&c.table===n.table).reduce((c,u)=>(c.has(u.name)||c.set(u.name,u),c),new Map),s=Array.from(i.values()).sort((c,u)=>c.ordinal_position-u.ordinal_position),a=r.filter(c=>c.table===n.table&&Rt(c.schema)===t).map(c=>c.column.trim());return s.map(c=>{var u,d;return{id:Xe(),name:c.name,type:{id:c.type.split(" ").join("_").toLowerCase(),name:c.type.toLowerCase()},primaryKey:a.includes(c.name),unique:Object.values(o).some(l=>l.unique&&l.columns.length===1&&l.columns[0].name===c.name),nullable:!!c.nullable,...c.character_maximum_length&&c.character_maximum_length!=="null"?{characterMaximumLength:c.character_maximum_length}:{},...(u=c.precision)!=null&&u.precision?{precision:c.precision.precision}:{},...(d=c.precision)!=null&&d.scale?{scale:c.precision.scale}:{},...c.default?{default:c.default}:{},...c.collation?{collation:c.collation}:{},createdAt:Date.now(),comments:c.comment?c.comment:void 0}})},S2=ie.object({schema:ie.string(),table:ie.string(),name:ie.string(),column:ie.string(),index_type:ie.string(),cardinality:ie.number().nullable().optional(),size:ie.number().nullable().optional(),unique:ie.union([ie.boolean(),ie.number()]),direction:ie.string(),column_position:ie.number()}),Pv=({tableInfo:e,tableSchema:t,indexes:n})=>{const r=n.filter(o=>{const i=Rt(o.schema);return o.table===e.table&&i===t});return Object.values(r.reduce((o,i)=>{const s=`${i.schema}_${i.name}`;return o[s]?o[s].columns.push({name:i.column,position:i.column_position}):o[s]={...i,columns:[{name:i.column,position:i.column_position}]},o},{}))},M2=ie.object({id:ie.string(),name:ie.string(),schema:ie.string().optional(),x:ie.number(),y:ie.number(),fields:ie.array(Dv),indexes:ie.array(bv),color:ie.string(),isView:ie.boolean(),isMaterializedView:ie.boolean().optional(),createdAt:ie.number(),width:ie.number().optional(),comments:ie.string().optional(),order:ie.number().optional()}),N2=(e,t)=>!t||!e.schema||t.includes(ma(e.schema)),Lv=(e,t)=>{if(!t)return"";let n;return e===ce.SQL_SERVER?n=Zd(t):n=Qd(t),n},T2=({databaseMetadata:e,databaseType:t})=>{const{tables:n,pk_info:r,columns:o,indexes:i,views:s}=e;return n.map(a=>{const c=Rt(a.schema),u=Pv({tableInfo:a,tableSchema:c,indexes:i}),d=Iv({aggregatedIndexes:u,columns:o,primaryKeys:r,tableInfo:a,tableSchema:c}),l=Cv({aggregatedIndexes:u,fields:d}),f=s.some(p=>Rt(p.schema)===c&&p.view_name===a.table),m=s.some(p=>Rt(p.schema)===c&&p.view_name===a.table&&Lv(t,p.view_definition).toLowerCase().includes("materialized"));return{id:Xe(),name:a.table,schema:c,x:Math.random()*1e3,y:Math.random()*800,fields:d,indexes:l,color:m?pf:f?gf:ko(),isView:f,isMaterializedView:m,createdAt:Date.now(),comments:a.comment?a.comment:void 0}})},k2=({relationships:e,tables:t,mode:n="all"})=>{const r=No(t),o=No(e),i=s=>{const m=new Map;o.forEach(x=>{m.has(x.sourceTableId)||m.set(x.sourceTableId,new Set),m.has(x.targetTableId)||m.set(x.targetTableId,new Set),m.get(x.sourceTableId).add(x.targetTableId),m.get(x.targetTableId).add(x.sourceTableId)});const p=[...s].sort((x,N)=>{var L,M;return(((L=m.get(N.id))==null?void 0:L.size)||0)-(((M=m.get(x.id))==null?void 0:M.size)||0)}),y=new Set,w=new Map,v=(x,N,L)=>{for(const[M,T]of w)if(M!==L&&Math.abs(x-T.x)<300&&Math.abs(N-T.y)<400)return!0;return!1},_=(x,N,L)=>{const M=Math.max(200,300)/2;let T=0,A=0,I=0;const $=1e3;for(;I<$;){const O=x+A*Math.cos(T),F=N+A*Math.sin(T);if(!v(O,F,L))return{x:O,y:F};T+=Math.PI/4,T>=2*Math.PI&&(T=0,A+=M),I++}return{x:x+A*Math.cos(T),y:N+A*Math.sin(T)}},b=(x,N,L)=>{if(y.has(x.id))return;const{x:M,y:T}=_(N,L,x.id);x.x=M,x.y=T,w.set(x.id,{x:x.x,y:x.y}),y.add(x.id);const A=m.get(x.id)||new Set;let I=0;const $=2*Math.PI/A.size;A.forEach(O=>{if(!y.has(O)){const F=s.find(C=>C.id===O);if(F){const C=M+Math.cos(I)*400,P=T+Math.sin(I)*(300+100*2);b(F,C,P),I+=$}}})};p.forEach((x,N)=>{if(!y.has(x.id)){const L=Math.floor(N/6),T=100+N%6*(200+100*2),A=100+L*(300+100*2);b(x,T,A)}}),s.forEach(x=>{const N=w.get(x.id);N&&(x.x=N.x,x.y=N.y)})};if(n==="perSchema"){const s=r.reduce((a,c)=>{const u=c.schema||"default";return a[u]||(a[u]=[]),a[u].push(c),a},{});Object.values(s).forEach(i)}else i(r);return r};var wo="rovingFocusGroup.onEntryFocus",jv={bubbles:!1,cancelable:!0},Vr="RovingFocusGroup",[ti,nl,$v]=Wa(Vr),[Ov,rl]=An(Vr,[$v]),[Fv,Hv]=Ov(Vr),ol=h.forwardRef((e,t)=>g.jsx(ti.Provider,{scope:e.__scopeRovingFocusGroup,children:g.jsx(ti.Slot,{scope:e.__scopeRovingFocusGroup,children:g.jsx(zv,{...e,ref:t})})}));ol.displayName=Vr;var zv=h.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:o=!1,dir:i,currentTabStopId:s,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:d=!1,...l}=e,f=h.useRef(null),m=ke(t,f),p=sc(i),[y=null,w]=Jd({prop:s,defaultProp:a,onChange:c}),[v,_]=h.useState(!1),b=We(u),x=nl(n),N=h.useRef(!1),[L,M]=h.useState(0);return h.useEffect(()=>{const T=f.current;if(T)return T.addEventListener(wo,b),()=>T.removeEventListener(wo,b)},[b]),g.jsx(Fv,{scope:n,orientation:r,dir:p,loop:o,currentTabStopId:y,onItemFocus:h.useCallback(T=>w(T),[w]),onItemShiftTab:h.useCallback(()=>_(!0),[]),onFocusableItemAdd:h.useCallback(()=>M(T=>T+1),[]),onFocusableItemRemove:h.useCallback(()=>M(T=>T-1),[]),children:g.jsx(Se.div,{tabIndex:v||L===0?-1:0,"data-orientation":r,...l,ref:m,style:{outline:"none",...e.style},onMouseDown:fe(e.onMouseDown,()=>{N.current=!0}),onFocus:fe(e.onFocus,T=>{const A=!N.current;if(T.target===T.currentTarget&&A&&!v){const I=new CustomEvent(wo,jv);if(T.currentTarget.dispatchEvent(I),!I.defaultPrevented){const $=x().filter(E=>E.focusable),O=$.find(E=>E.active),F=$.find(E=>E.id===y),P=[O,F,...$].filter(Boolean).map(E=>E.ref.current);al(P,d)}}N.current=!1}),onBlur:fe(e.onBlur,()=>_(!1))})})}),il="RovingFocusGroupItem",sl=h.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:o=!1,tabStopId:i,...s}=e,a=To(),c=i||a,u=Hv(il,n),d=u.currentTabStopId===c,l=nl(n),{onFocusableItemAdd:f,onFocusableItemRemove:m}=u;return h.useEffect(()=>{if(r)return f(),()=>m()},[r,f,m]),g.jsx(ti.ItemSlot,{scope:n,id:c,focusable:r,active:o,children:g.jsx(Se.span,{tabIndex:d?0:-1,"data-orientation":u.orientation,...s,ref:t,onMouseDown:fe(e.onMouseDown,p=>{r?u.onItemFocus(c):p.preventDefault()}),onFocus:fe(e.onFocus,()=>u.onItemFocus(c)),onKeyDown:fe(e.onKeyDown,p=>{if(p.key==="Tab"&&p.shiftKey){u.onItemShiftTab();return}if(p.target!==p.currentTarget)return;const y=Xv(p,u.orientation,u.dir);if(y!==void 0){if(p.metaKey||p.ctrlKey||p.altKey||p.shiftKey)return;p.preventDefault();let v=l().filter(_=>_.focusable).map(_=>_.ref.current);if(y==="last")v.reverse();else if(y==="prev"||y==="next"){y==="prev"&&v.reverse();const _=v.indexOf(p.currentTarget);v=u.loop?Yv(v,_+1):v.slice(_+1)}setTimeout(()=>al(v))}})})})});sl.displayName=il;var Bv={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Vv(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function Xv(e,t,n){const r=Vv(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return Bv[r]}function al(e,t=!1){const n=document.activeElement;for(const r of e)if(r===n||(r.focus({preventScroll:t}),document.activeElement!==n))return}function Yv(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var Wv=ol,Gv=sl;function A2(e,t){const n=h.useRef();return h.useEffect(()=>(n.current=ef(e,t),()=>{var o;(o=n.current)!=null&&o.cancel&&n.current.cancel()}),[e,t]),h.useCallback((...o)=>{var i;(i=n.current)==null||i.call(n,...o)},[])}var Uv="Arrow",cl=h.forwardRef((e,t)=>{const{children:n,width:r=10,height:o=5,...i}=e;return g.jsx(Se.svg,{...i,ref:t,width:r,height:o,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:g.jsx("polygon",{points:"0,0 30,0 15,10"})})});cl.displayName=Uv;var Kv=cl,Si="Popper",[ul,ll]=An(Si),[qv,dl]=ul(Si),fl=e=>{const{__scopePopper:t,children:n}=e,[r,o]=h.useState(null);return g.jsx(qv,{scope:t,anchor:r,onAnchorChange:o,children:n})};fl.displayName=Si;var hl="PopperAnchor",ml=h.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:r,...o}=e,i=dl(hl,n),s=h.useRef(null),a=ke(t,s);return h.useEffect(()=>{i.onAnchorChange((r==null?void 0:r.current)||s.current)}),r?null:g.jsx(Se.div,{...o,ref:a})});ml.displayName=hl;var Mi="PopperContent",[Zv,Qv]=ul(Mi),pl=h.forwardRef((e,t)=>{var re,U,Y,oe,ae,ne;const{__scopePopper:n,side:r="bottom",sideOffset:o=0,align:i="center",alignOffset:s=0,arrowPadding:a=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:d=0,sticky:l="partial",hideWhenDetached:f=!1,updatePositionStrategy:m="optimized",onPlaced:p,...y}=e,w=dl(Mi,n),[v,_]=h.useState(null),b=ke(t,J=>_(J)),[x,N]=h.useState(null),L=tf(x),M=(L==null?void 0:L.width)??0,T=(L==null?void 0:L.height)??0,A=r+(i!=="center"?"-"+i:""),I=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},$=Array.isArray(u)?u:[u],O=$.length>0,F={padding:I,boundary:$.filter(ew),altBoundary:O},{refs:C,floatingStyles:P,placement:E,isPositioned:R,middlewareData:D}=nf({strategy:"fixed",placement:A,whileElementsMounted:(...J)=>df(...J,{animationFrame:m==="always"}),elements:{reference:w.anchor},middleware:[rf({mainAxis:o+T,alignmentAxis:s}),c&&of({mainAxis:!0,crossAxis:!1,limiter:l==="partial"?lf():void 0,...F}),c&&sf({...F}),af({...F,apply:({elements:J,rects:ue,availableWidth:ge,availableHeight:Ee})=>{const{width:ct,height:Ie}=ue.reference,Be=J.floating.style;Be.setProperty("--radix-popper-available-width",`${ge}px`),Be.setProperty("--radix-popper-available-height",`${Ee}px`),Be.setProperty("--radix-popper-anchor-width",`${ct}px`),Be.setProperty("--radix-popper-anchor-height",`${Ie}px`)}}),x&&cf({element:x,padding:a}),tw({arrowWidth:M,arrowHeight:T}),f&&uf({strategy:"referenceHidden",...F})]}),[k,H]=xl(E),z=We(p);Mo(()=>{R&&(z==null||z())},[R,z]);const X=(re=D.arrow)==null?void 0:re.x,ee=(U=D.arrow)==null?void 0:U.y,K=((Y=D.arrow)==null?void 0:Y.centerOffset)!==0,[Q,Z]=h.useState();return Mo(()=>{v&&Z(window.getComputedStyle(v).zIndex)},[v]),g.jsx("div",{ref:C.setFloating,"data-radix-popper-content-wrapper":"",style:{...P,transform:R?P.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Q,"--radix-popper-transform-origin":[(oe=D.transformOrigin)==null?void 0:oe.x,(ae=D.transformOrigin)==null?void 0:ae.y].join(" "),...((ne=D.hide)==null?void 0:ne.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:g.jsx(Zv,{scope:n,placedSide:k,onArrowChange:N,arrowX:X,arrowY:ee,shouldHideArrow:K,children:g.jsx(Se.div,{"data-side":k,"data-align":H,...y,ref:b,style:{...y.style,animation:R?void 0:"none"}})})})});pl.displayName=Mi;var gl="PopperArrow",Jv={top:"bottom",right:"left",bottom:"top",left:"right"},yl=h.forwardRef(function(t,n){const{__scopePopper:r,...o}=t,i=Qv(gl,r),s=Jv[i.placedSide];return g.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[s]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:g.jsx(Kv,{...o,ref:n,style:{...o.style,display:"block"}})})});yl.displayName=gl;function ew(e){return e!==null}var tw=e=>({name:"transformOrigin",options:e,fn(t){var w,v,_;const{placement:n,rects:r,middlewareData:o}=t,s=((w=o.arrow)==null?void 0:w.centerOffset)!==0,a=s?0:e.arrowWidth,c=s?0:e.arrowHeight,[u,d]=xl(n),l={start:"0%",center:"50%",end:"100%"}[d],f=(((v=o.arrow)==null?void 0:v.x)??0)+a/2,m=(((_=o.arrow)==null?void 0:_.y)??0)+c/2;let p="",y="";return u==="bottom"?(p=s?l:`${f}px`,y=`${-c}px`):u==="top"?(p=s?l:`${f}px`,y=`${r.floating.height+c}px`):u==="right"?(p=`${-c}px`,y=s?l:`${m}px`):u==="left"&&(p=`${r.floating.width+c}px`,y=s?l:`${m}px`),{data:{x:p,y}}}});function xl(e){const[t,n="center"]=e.split("-");return[t,n]}var vl=fl,nw=ml,rw=pl,ow=yl,bo="focusScope.autoFocusOnMount",Co="focusScope.autoFocusOnUnmount",ea={bubbles:!1,cancelable:!0},iw="FocusScope",wl=h.forwardRef((e,t)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:o,onUnmountAutoFocus:i,...s}=e,[a,c]=h.useState(null),u=We(o),d=We(i),l=h.useRef(null),f=ke(t,y=>c(y)),m=h.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;h.useEffect(()=>{if(r){let y=function(b){if(m.paused||!a)return;const x=b.target;a.contains(x)?l.current=x:rt(l.current,{select:!0})},w=function(b){if(m.paused||!a)return;const x=b.relatedTarget;x!==null&&(a.contains(x)||rt(l.current,{select:!0}))},v=function(b){if(document.activeElement===document.body)for(const N of b)N.removedNodes.length>0&&rt(a)};document.addEventListener("focusin",y),document.addEventListener("focusout",w);const _=new MutationObserver(v);return a&&_.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",y),document.removeEventListener("focusout",w),_.disconnect()}}},[r,a,m.paused]),h.useEffect(()=>{if(a){na.add(m);const y=document.activeElement;if(!a.contains(y)){const v=new CustomEvent(bo,ea);a.addEventListener(bo,u),a.dispatchEvent(v),v.defaultPrevented||(sw(dw(bl(a)),{select:!0}),document.activeElement===y&&rt(a))}return()=>{a.removeEventListener(bo,u),setTimeout(()=>{const v=new CustomEvent(Co,ea);a.addEventListener(Co,d),a.dispatchEvent(v),v.defaultPrevented||rt(y??document.body,{select:!0}),a.removeEventListener(Co,d),na.remove(m)},0)}}},[a,u,d,m]);const p=h.useCallback(y=>{if(!n&&!r||m.paused)return;const w=y.key==="Tab"&&!y.altKey&&!y.ctrlKey&&!y.metaKey,v=document.activeElement;if(w&&v){const _=y.currentTarget,[b,x]=aw(_);b&&x?!y.shiftKey&&v===x?(y.preventDefault(),n&&rt(b,{select:!0})):y.shiftKey&&v===b&&(y.preventDefault(),n&&rt(x,{select:!0})):v===_&&y.preventDefault()}},[n,r,m.paused]);return g.jsx(Se.div,{tabIndex:-1,...s,ref:f,onKeyDown:p})});wl.displayName=iw;function sw(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if(rt(r,{select:t}),document.activeElement!==n)return}function aw(e){const t=bl(e),n=ta(t,e),r=ta(t.reverse(),e);return[n,r]}function bl(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const o=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||o?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function ta(e,t){for(const n of e)if(!cw(n,{upTo:t}))return n}function cw(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function uw(e){return e instanceof HTMLInputElement&&"select"in e}function rt(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&uw(e)&&t&&e.select()}}var na=lw();function lw(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=ra(e,t),e.unshift(t)},remove(t){var n;e=ra(e,t),(n=e[0])==null||n.resume()}}}function ra(e,t){const n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function dw(e){return e.filter(t=>t.tagName!=="A")}const fw=h.createContext({closeAlert:B,showAlert:B}),R2=()=>h.useContext(fw),Cl=()=>({graph:new Map,lastUpdated:Date.now()}),oa=(e,t)=>(e.graph.has(t)||e.graph.set(t,[]),{...e,lastUpdated:Date.now()}),hw=(e,t,n)=>{var r,o,i,s;return e.graph.has(t)||oa(e,t),e.graph.has(n)||oa(e,n),(r=e.graph.get(t))!=null&&r.includes(n)||(o=e.graph.get(t))==null||o.push(n),(i=e.graph.get(n))!=null&&i.includes(t)||(s=e.graph.get(n))==null||s.push(t),{...e,lastUpdated:Date.now()}},D2=(e,t)=>(e.graph.delete(t),e.graph.forEach(n=>{const r=n.indexOf(t);r!==-1&&n.splice(r,1)}),{...e,lastUpdated:Date.now()}),mw=(e,t,n)=>{var r,o,i,s;if(e.graph.has(t)){const a=((r=e.graph.get(t))==null?void 0:r.indexOf(n))??-1;a!==-1&&((o=e.graph.get(t))==null||o.splice(a,1))}if(e.graph.has(n)){const a=((i=e.graph.get(n))==null?void 0:i.indexOf(t))??-1;a!==-1&&((s=e.graph.get(n))==null||s.splice(a,1))}return{...e,lastUpdated:Date.now()}},pw=h.createContext({reorderTables:B,fitView:B,setOverlapGraph:B,overlapGraph:Cl()}),I2=()=>h.useContext(pw),P2=()=>h.useContext(ym);function gw(){var e=h.useRef(!0);return e.current?(e.current=!1,!0):e.current}var yw=function(e,t){var n=gw();h.useEffect(function(){if(!n)return e()},t)},xw=function(){};function _l(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];e&&e.addEventListener&&e.addEventListener.apply(e,t)}function El(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];e&&e.removeEventListener&&e.removeEventListener.apply(e,t)}var vw=typeof window<"u",ww=["mousedown","touchstart"],Sl=function(e,t,n){n===void 0&&(n=ww);var r=h.useRef(t);h.useEffect(function(){r.current=t},[t]),h.useEffect(function(){for(var o=function(c){var u=e.current;u&&!u.contains(c.target)&&r.current(c)},i=0,s=n;i<s.length;i++){var a=s[i];_l(document,a,o)}return function(){for(var c=0,u=n;c<u.length;c++){var d=u[c];El(document,d,o)}}},[n,e])},bw=vw?window:null,ia=function(e){return!!e.addEventListener},sa=function(e){return!!e.on},Cw=function(e,t,n,r){n===void 0&&(n=bw),h.useEffect(function(){if(t&&n)return ia(n)?_l(n,e,t,r):sa(n)&&n.on(e,t,r),function(){ia(n)?El(n,e,t,r):sa(n)&&n.off(e,t,r)}},[e,t,n,JSON.stringify(r)])},_w=function(e){return typeof e=="function"?e:typeof e=="string"?function(t){return t.key===e}:e?function(){return!0}:function(){return!1}},aa=function(e,t,n,r){t===void 0&&(t=xw),n===void 0&&(n={}),r===void 0&&(r=[e]);var o=n.event,i=o===void 0?"keydown":o,s=n.target,a=n.options,c=h.useMemo(function(){var u=_w(e),d=function(l){if(u(l))return t(l)};return d},r);Cw(i,c,s,a)},Ew=function(e){var t=h.useState([!1,null]),n=t[0],r=t[1];return aa(e,function(o){return r([!0,o])},{event:"keydown"},[n]),aa(e,function(o){return r([!1,o])},{event:"keyup"},[n]),n},br=function(e,t,n,r){r===void 0&&(r=Ew);var o=r(e),i=o[0],s=o[1];yw(function(){i&&t&&t(s)},[i])};const Ni=Ce.forwardRef(({className:e,type:t,...n},r)=>g.jsx("input",{type:t,className:_e("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,...n}));Ni.displayName="Input";const ca="left_rel_",ua="right_rel_",_o="target_rel_",Ml=Ce.memo(({field:e,focused:t,tableNodeId:n,highlighted:r,visible:o,isConnectable:i})=>{const{removeField:s,relationships:a,readonly:c,updateField:u}=Nr(),[d,l]=h.useState(!1),[f,m]=h.useState(e.name),p=Ce.useRef(null),y=Qu(),w=Ei(),v=h.useMemo(()=>{var R,D;return w.inProgress&&w.fromNode.id!==n&&(((R=w.fromHandle.id)==null?void 0:R.startsWith(ua))||((D=w.fromHandle.id)==null?void 0:D.startsWith(ca)))},[w,n]),_=h.useMemo(()=>a.filter(R=>R.targetTableId===n&&R.targetFieldId===e.id).length,[a,n,e.id]),b=h.useRef(_);h.useEffect(()=>{b.current!==_&&(y(n),b.current=_)},[n,y,_]);const x=h.useCallback(()=>{d&&(f.trim()&&u(n,e.id,{name:f.trim()}),l(!1))},[f,e.id,u,d,n]),N=h.useCallback(()=>{l(!1),m(e.name)},[e.name]);Sl(p,x),br("Enter",x),br("Escape",N);const{checkIfFieldRemoved:L,checkIfNewField:M,getFieldNewName:T,getFieldNewType:A,checkIfFieldHasChange:I}=lr(),$=h.useMemo(()=>L({fieldId:e.id}),[L,e.id]),O=h.useMemo(()=>M({fieldId:e.id}),[M,e.id]),F=h.useMemo(()=>T({fieldId:e.id}),[T,e.id]),C=h.useMemo(()=>A({fieldId:e.id}),[A,e.id]),P=h.useMemo(()=>I({fieldId:e.id,tableId:n}),[I,e.id,n]),E=R=>{R.stopPropagation(),l(!0)};return g.jsxs("div",{className:_e("group relative flex h-8 items-center justify-between gap-1 border-t px-3 text-sm last:rounded-b-[6px] hover:bg-slate-100 dark:hover:bg-slate-800","transition-all duration-200 ease-in-out",{"bg-pink-100 dark:bg-pink-900":r,"max-h-8 opacity-100":o,"z-0 max-h-0 overflow-hidden opacity-0":!o,"bg-sky-200 dark:bg-sky-800 hover:bg-sky-100 dark:hover:bg-sky-900 border-sky-300 dark:border-sky-700":P&&!$&&!O,"bg-red-200 dark:bg-red-800 hover:bg-red-100 dark:hover:bg-red-900 border-red-300 dark:border-red-700":$,"bg-green-200 dark:bg-green-800 hover:bg-green-100 dark:hover:bg-green-900 border-green-300 dark:border-green-700":O}),children:[i?g.jsxs(g.Fragment,{children:[g.jsx(Fe,{id:`${ua}${e.id}`,className:`!h-4 !w-4 !border-2 !bg-pink-600 ${!t||c?"!invisible":""}`,position:te.Right,type:"source"}),g.jsx(Fe,{id:`${ca}${e.id}`,className:`!h-4 !w-4 !border-2 !bg-pink-600 ${!t||c?"!invisible":""}`,position:te.Left,type:"source"})]}):null,(!w.inProgress||v)&&i&&g.jsxs(g.Fragment,{children:[Array.from({length:_},(R,D)=>D).map(R=>g.jsx(Fe,{id:`${_o}${R}_${e.id}`,className:"!invisible",position:te.Left,type:"target"},`${_o}${R}_${e.id}`)),g.jsx(Fe,{id:`${_o}${_}_${e.id}`,className:v?"!absolute !left-0 !top-0 !h-full !w-full !transform-none !rounded-none !border-none !opacity-0":"!invisible",position:te.Left,type:"target"})]}),g.jsxs("div",{className:_e("flex items-center gap-1 truncate text-left",{"font-semibold":e.primaryKey||e.unique,"w-full":d}),children:[$?g.jsx(uc,{className:"size-3.5 text-red-800 dark:text-red-200"}):O?g.jsx(lc,{className:"size-3.5 text-green-800 dark:text-green-200"}):P?g.jsx(cc,{className:"size-3.5 shrink-0 text-sky-800 dark:text-sky-200"}):null,d&&!c?g.jsxs(g.Fragment,{children:[g.jsx(Ni,{ref:p,onBlur:x,placeholder:e.name,autoFocus:!0,type:"text",value:f,onClick:R=>R.stopPropagation(),onChange:R=>m(R.target.value),className:"h-5 w-full border-[0.5px] border-blue-400 bg-slate-100 focus-visible:ring-0 dark:bg-slate-900"}),g.jsx(hn,{variant:"ghost",className:"size-6 p-0 text-slate-500 hover:bg-primary-foreground hover:text-slate-700 dark:text-slate-400 dark:hover:bg-slate-800 dark:hover:text-slate-200",onClick:x,children:g.jsx(ac,{className:"size-4"})})]}):g.jsx("span",{className:_e("truncate",{"text-red-800 font-normal dark:text-red-200":$,"text-green-800 font-normal dark:text-green-200":O,"text-sky-800 font-normal dark:text-sky-200":P&&!$&&!O}),onDoubleClick:E,children:F?g.jsxs(g.Fragment,{children:[e.name," ",g.jsx("span",{className:"font-medium",children:"→"})," ",F]}):e.name}),e.comments&&!d?g.jsxs(sn,{children:[g.jsx(an,{asChild:!0,children:g.jsx("div",{className:"shrink-0 cursor-pointer text-muted-foreground",children:g.jsx(am,{size:14})})}),g.jsx(cn,{children:e.comments})]}):null]}),d?null:g.jsxs("div",{className:"flex max-w-[35%] justify-end gap-1.5 truncate hover:shrink-0",children:[e.primaryKey?g.jsx("div",{className:_e("text-muted-foreground",c?"":"group-hover:hidden",$?"text-red-800 dark:text-red-200":"",O?"text-green-800 dark:text-green-200":"",P&&!$&&!O?"text-sky-800 dark:text-sky-200":""),children:g.jsx(sm,{size:14})}):null,g.jsxs("div",{className:_e("content-center truncate text-right text-xs text-muted-foreground",c?"":"group-hover:hidden",$?"text-red-800 dark:text-red-200":"",O?"text-green-800 dark:text-green-200":"",P&&!$&&!O?"text-sky-800 dark:text-sky-200":""),children:[C?g.jsxs(g.Fragment,{children:[g.jsx("span",{className:"line-through",children:e.type.name.split(" ")[0]})," ",C.name.split(" ")[0]]}):e.type.name.split(" ")[0],e.nullable?"?":""]}),c?null:g.jsx("div",{className:"hidden flex-row group-hover:flex",children:g.jsx(hn,{variant:"ghost",className:"size-6 p-0 hover:bg-primary-foreground",onClick:R=>{R.stopPropagation(),s(n,e.id)},children:g.jsx(dc,{className:"size-3.5 text-red-700"})})})]})]})});Ml.displayName="TableNodeField";var Nl=h.forwardRef((e,t)=>{const{children:n,...r}=e,o=h.Children.toArray(n),i=o.find(Mw);if(i){const s=i.props.children,a=o.map(c=>c===i?h.Children.count(s)>1?h.Children.only(null):h.isValidElement(s)?s.props.children:null:c);return g.jsx(ni,{...r,ref:t,children:h.isValidElement(s)?h.cloneElement(s,void 0,a):null})}return g.jsx(ni,{...r,ref:t,children:n})});Nl.displayName="Slot";var ni=h.forwardRef((e,t)=>{const{children:n,...r}=e;if(h.isValidElement(n)){const o=Tw(n);return h.cloneElement(n,{...Nw(r,n.props),ref:t?ii(t,o):o})}return h.Children.count(n)>1?h.Children.only(null):null});ni.displayName="SlotClone";var Sw=({children:e})=>g.jsx(g.Fragment,{children:e});function Mw(e){return h.isValidElement(e)&&e.type===Sw}function Nw(e,t){const n={...t};for(const r in t){const o=e[r],i=t[r];/^on[A-Z]/.test(r)?o&&i?n[r]=(...a)=>{i(...a),o(...a)}:o&&(n[r]=o):r==="style"?n[r]={...o,...i}:r==="className"&&(n[r]=[o,i].filter(Boolean).join(" "))}return{...e,...n}}function Tw(e){var r,o;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(o=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:o.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var ri=["Enter"," "],kw=["ArrowDown","PageUp","Home"],Tl=["ArrowUp","PageDown","End"],Aw=[...kw,...Tl],Rw={ltr:[...ri,"ArrowRight"],rtl:[...ri,"ArrowLeft"]},Dw={ltr:["ArrowLeft"],rtl:["ArrowRight"]},jn="Menu",[Tn,Iw,Pw]=Wa(jn),[_t,kl]=An(jn,[Pw,ll,rl]),$n=ll(),Al=rl(),[Rl,at]=_t(jn),[Lw,On]=_t(jn),Dl=e=>{const{__scopeMenu:t,open:n=!1,children:r,dir:o,onOpenChange:i,modal:s=!0}=e,a=$n(t),[c,u]=h.useState(null),d=h.useRef(!1),l=We(i),f=sc(o);return h.useEffect(()=>{const m=()=>{d.current=!0,document.addEventListener("pointerdown",p,{capture:!0,once:!0}),document.addEventListener("pointermove",p,{capture:!0,once:!0})},p=()=>d.current=!1;return document.addEventListener("keydown",m,{capture:!0}),()=>{document.removeEventListener("keydown",m,{capture:!0}),document.removeEventListener("pointerdown",p,{capture:!0}),document.removeEventListener("pointermove",p,{capture:!0})}},[]),g.jsx(vl,{...a,children:g.jsx(Rl,{scope:t,open:n,onOpenChange:l,content:c,onContentChange:u,children:g.jsx(Lw,{scope:t,onClose:h.useCallback(()=>l(!1),[l]),isUsingKeyboardRef:d,dir:f,modal:s,children:r})})})};Dl.displayName=jn;var jw="MenuAnchor",Ti=h.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,o=$n(n);return g.jsx(nw,{...o,...r,ref:t})});Ti.displayName=jw;var ki="MenuPortal",[$w,Il]=_t(ki,{forceMount:void 0}),Pl=e=>{const{__scopeMenu:t,forceMount:n,children:r,container:o}=e,i=at(ki,t);return g.jsx($w,{scope:t,forceMount:n,children:g.jsx(Er,{present:n||i.open,children:g.jsx(qa,{asChild:!0,container:o,children:r})})})};Pl.displayName=ki;var De="MenuContent",[Ow,Ai]=_t(De),Ll=h.forwardRef((e,t)=>{const n=Il(De,e.__scopeMenu),{forceMount:r=n.forceMount,...o}=e,i=at(De,e.__scopeMenu),s=On(De,e.__scopeMenu);return g.jsx(Tn.Provider,{scope:e.__scopeMenu,children:g.jsx(Er,{present:r||i.open,children:g.jsx(Tn.Slot,{scope:e.__scopeMenu,children:s.modal?g.jsx(Fw,{...o,ref:t}):g.jsx(Hw,{...o,ref:t})})})})}),Fw=h.forwardRef((e,t)=>{const n=at(De,e.__scopeMenu),r=h.useRef(null),o=ke(t,r);return h.useEffect(()=>{const i=r.current;if(i)return Qh(i)},[]),g.jsx(Ri,{...e,ref:o,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:fe(e.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),Hw=h.forwardRef((e,t)=>{const n=at(De,e.__scopeMenu);return g.jsx(Ri,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),Ri=h.forwardRef((e,t)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:o,onOpenAutoFocus:i,onCloseAutoFocus:s,disableOutsidePointerEvents:a,onEntryFocus:c,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:l,onInteractOutside:f,onDismiss:m,disableOutsideScroll:p,...y}=e,w=at(De,n),v=On(De,n),_=$n(n),b=Al(n),x=Iw(n),[N,L]=h.useState(null),M=h.useRef(null),T=ke(t,M,w.onContentChange),A=h.useRef(0),I=h.useRef(""),$=h.useRef(0),O=h.useRef(null),F=h.useRef("right"),C=h.useRef(0),P=p?oc:h.Fragment,E=p?{as:Nl,allowPinchZoom:!0}:void 0,R=k=>{var re,U;const H=I.current+k,z=x().filter(Y=>!Y.disabled),X=document.activeElement,ee=(re=z.find(Y=>Y.ref.current===X))==null?void 0:re.textValue,K=z.map(Y=>Y.textValue),Q=Qw(K,H,ee),Z=(U=z.find(Y=>Y.textValue===Q))==null?void 0:U.ref.current;(function Y(oe){I.current=oe,window.clearTimeout(A.current),oe!==""&&(A.current=window.setTimeout(()=>Y(""),1e3))})(H),Z&&setTimeout(()=>Z.focus())};h.useEffect(()=>()=>window.clearTimeout(A.current),[]),hh();const D=h.useCallback(k=>{var z,X;return F.current===((z=O.current)==null?void 0:z.side)&&eb(k,(X=O.current)==null?void 0:X.area)},[]);return g.jsx(Ow,{scope:n,searchRef:I,onItemEnter:h.useCallback(k=>{D(k)&&k.preventDefault()},[D]),onItemLeave:h.useCallback(k=>{var H;D(k)||((H=M.current)==null||H.focus(),L(null))},[D]),onTriggerLeave:h.useCallback(k=>{D(k)&&k.preventDefault()},[D]),pointerGraceTimerRef:$,onPointerGraceIntentChange:h.useCallback(k=>{O.current=k},[]),children:g.jsx(P,{...E,children:g.jsx(wl,{asChild:!0,trapped:o,onMountAutoFocus:fe(i,k=>{var H;k.preventDefault(),(H=M.current)==null||H.focus({preventScroll:!0})}),onUnmountAutoFocus:s,children:g.jsx(ci,{asChild:!0,disableOutsidePointerEvents:a,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:l,onInteractOutside:f,onDismiss:m,children:g.jsx(Wv,{asChild:!0,...b,dir:v.dir,orientation:"vertical",loop:r,currentTabStopId:N,onCurrentTabStopIdChange:L,onEntryFocus:fe(c,k=>{v.isUsingKeyboardRef.current||k.preventDefault()}),preventScrollOnEntryFocus:!0,children:g.jsx(rw,{role:"menu","aria-orientation":"vertical","data-state":Ql(w.open),"data-radix-menu-content":"",dir:v.dir,..._,...y,ref:T,style:{outline:"none",...y.style},onKeyDown:fe(y.onKeyDown,k=>{const z=k.target.closest("[data-radix-menu-content]")===k.currentTarget,X=k.ctrlKey||k.altKey||k.metaKey,ee=k.key.length===1;z&&(k.key==="Tab"&&k.preventDefault(),!X&&ee&&R(k.key));const K=M.current;if(k.target!==K||!Aw.includes(k.key))return;k.preventDefault();const Z=x().filter(re=>!re.disabled).map(re=>re.ref.current);Tl.includes(k.key)&&Z.reverse(),qw(Z)}),onBlur:fe(e.onBlur,k=>{k.currentTarget.contains(k.target)||(window.clearTimeout(A.current),I.current="")}),onPointerMove:fe(e.onPointerMove,kn(k=>{const H=k.target,z=C.current!==k.clientX;if(k.currentTarget.contains(H)&&z){const X=k.clientX>C.current?"right":"left";F.current=X,C.current=k.clientX}}))})})})})})})});Ll.displayName=De;var zw="MenuGroup",Di=h.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return g.jsx(Se.div,{role:"group",...r,ref:t})});Di.displayName=zw;var Bw="MenuLabel",jl=h.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return g.jsx(Se.div,{...r,ref:t})});jl.displayName=Bw;var Cr="MenuItem",la="menu.itemSelect",Xr=h.forwardRef((e,t)=>{const{disabled:n=!1,onSelect:r,...o}=e,i=h.useRef(null),s=On(Cr,e.__scopeMenu),a=Ai(Cr,e.__scopeMenu),c=ke(t,i),u=h.useRef(!1),d=()=>{const l=i.current;if(!n&&l){const f=new CustomEvent(la,{bubbles:!0,cancelable:!0});l.addEventListener(la,m=>r==null?void 0:r(m),{once:!0}),pa(l,f),f.defaultPrevented?u.current=!1:s.onClose()}};return g.jsx($l,{...o,ref:c,disabled:n,onClick:fe(e.onClick,d),onPointerDown:l=>{var f;(f=e.onPointerDown)==null||f.call(e,l),u.current=!0},onPointerUp:fe(e.onPointerUp,l=>{var f;u.current||(f=l.currentTarget)==null||f.click()}),onKeyDown:fe(e.onKeyDown,l=>{const f=a.searchRef.current!=="";n||f&&l.key===" "||ri.includes(l.key)&&(l.currentTarget.click(),l.preventDefault())})})});Xr.displayName=Cr;var $l=h.forwardRef((e,t)=>{const{__scopeMenu:n,disabled:r=!1,textValue:o,...i}=e,s=Ai(Cr,n),a=Al(n),c=h.useRef(null),u=ke(t,c),[d,l]=h.useState(!1),[f,m]=h.useState("");return h.useEffect(()=>{const p=c.current;p&&m((p.textContent??"").trim())},[i.children]),g.jsx(Tn.ItemSlot,{scope:n,disabled:r,textValue:o??f,children:g.jsx(Gv,{asChild:!0,...a,focusable:!r,children:g.jsx(Se.div,{role:"menuitem","data-highlighted":d?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...i,ref:u,onPointerMove:fe(e.onPointerMove,kn(p=>{r?s.onItemLeave(p):(s.onItemEnter(p),p.defaultPrevented||p.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:fe(e.onPointerLeave,kn(p=>s.onItemLeave(p))),onFocus:fe(e.onFocus,()=>l(!0)),onBlur:fe(e.onBlur,()=>l(!1))})})})}),Vw="MenuCheckboxItem",Ol=h.forwardRef((e,t)=>{const{checked:n=!1,onCheckedChange:r,...o}=e;return g.jsx(Vl,{scope:e.__scopeMenu,checked:n,children:g.jsx(Xr,{role:"menuitemcheckbox","aria-checked":_r(n)?"mixed":n,...o,ref:t,"data-state":Li(n),onSelect:fe(o.onSelect,()=>r==null?void 0:r(_r(n)?!0:!n),{checkForDefaultPrevented:!1})})})});Ol.displayName=Vw;var Fl="MenuRadioGroup",[Xw,Yw]=_t(Fl,{value:void 0,onValueChange:()=>{}}),Hl=h.forwardRef((e,t)=>{const{value:n,onValueChange:r,...o}=e,i=We(r);return g.jsx(Xw,{scope:e.__scopeMenu,value:n,onValueChange:i,children:g.jsx(Di,{...o,ref:t})})});Hl.displayName=Fl;var zl="MenuRadioItem",Bl=h.forwardRef((e,t)=>{const{value:n,...r}=e,o=Yw(zl,e.__scopeMenu),i=n===o.value;return g.jsx(Vl,{scope:e.__scopeMenu,checked:i,children:g.jsx(Xr,{role:"menuitemradio","aria-checked":i,...r,ref:t,"data-state":Li(i),onSelect:fe(r.onSelect,()=>{var s;return(s=o.onValueChange)==null?void 0:s.call(o,n)},{checkForDefaultPrevented:!1})})})});Bl.displayName=zl;var Ii="MenuItemIndicator",[Vl,Ww]=_t(Ii,{checked:!1}),Xl=h.forwardRef((e,t)=>{const{__scopeMenu:n,forceMount:r,...o}=e,i=Ww(Ii,n);return g.jsx(Er,{present:r||_r(i.checked)||i.checked===!0,children:g.jsx(Se.span,{...o,ref:t,"data-state":Li(i.checked)})})});Xl.displayName=Ii;var Gw="MenuSeparator",Yl=h.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return g.jsx(Se.div,{role:"separator","aria-orientation":"horizontal",...r,ref:t})});Yl.displayName=Gw;var Uw="MenuArrow",Wl=h.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,o=$n(n);return g.jsx(ow,{...o,...r,ref:t})});Wl.displayName=Uw;var Pi="MenuSub",[Kw,Gl]=_t(Pi),Ul=e=>{const{__scopeMenu:t,children:n,open:r=!1,onOpenChange:o}=e,i=at(Pi,t),s=$n(t),[a,c]=h.useState(null),[u,d]=h.useState(null),l=We(o);return h.useEffect(()=>(i.open===!1&&l(!1),()=>l(!1)),[i.open,l]),g.jsx(vl,{...s,children:g.jsx(Rl,{scope:t,open:r,onOpenChange:l,content:u,onContentChange:d,children:g.jsx(Kw,{scope:t,contentId:To(),triggerId:To(),trigger:a,onTriggerChange:c,children:n})})})};Ul.displayName=Pi;var dn="MenuSubTrigger",Kl=h.forwardRef((e,t)=>{const n=at(dn,e.__scopeMenu),r=On(dn,e.__scopeMenu),o=Gl(dn,e.__scopeMenu),i=Ai(dn,e.__scopeMenu),s=h.useRef(null),{pointerGraceTimerRef:a,onPointerGraceIntentChange:c}=i,u={__scopeMenu:e.__scopeMenu},d=h.useCallback(()=>{s.current&&window.clearTimeout(s.current),s.current=null},[]);return h.useEffect(()=>d,[d]),h.useEffect(()=>{const l=a.current;return()=>{window.clearTimeout(l),c(null)}},[a,c]),g.jsx(Ti,{asChild:!0,...u,children:g.jsx($l,{id:o.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":o.contentId,"data-state":Ql(n.open),...e,ref:ii(t,o.onTriggerChange),onClick:l=>{var f;(f=e.onClick)==null||f.call(e,l),!(e.disabled||l.defaultPrevented)&&(l.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:fe(e.onPointerMove,kn(l=>{i.onItemEnter(l),!l.defaultPrevented&&!e.disabled&&!n.open&&!s.current&&(i.onPointerGraceIntentChange(null),s.current=window.setTimeout(()=>{n.onOpenChange(!0),d()},100))})),onPointerLeave:fe(e.onPointerLeave,kn(l=>{var m,p;d();const f=(m=n.content)==null?void 0:m.getBoundingClientRect();if(f){const y=(p=n.content)==null?void 0:p.dataset.side,w=y==="right",v=w?-5:5,_=f[w?"left":"right"],b=f[w?"right":"left"];i.onPointerGraceIntentChange({area:[{x:l.clientX+v,y:l.clientY},{x:_,y:f.top},{x:b,y:f.top},{x:b,y:f.bottom},{x:_,y:f.bottom}],side:y}),window.clearTimeout(a.current),a.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(l),l.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:fe(e.onKeyDown,l=>{var m;const f=i.searchRef.current!=="";e.disabled||f&&l.key===" "||Rw[r.dir].includes(l.key)&&(n.onOpenChange(!0),(m=n.content)==null||m.focus(),l.preventDefault())})})})});Kl.displayName=dn;var ql="MenuSubContent",Zl=h.forwardRef((e,t)=>{const n=Il(De,e.__scopeMenu),{forceMount:r=n.forceMount,...o}=e,i=at(De,e.__scopeMenu),s=On(De,e.__scopeMenu),a=Gl(ql,e.__scopeMenu),c=h.useRef(null),u=ke(t,c);return g.jsx(Tn.Provider,{scope:e.__scopeMenu,children:g.jsx(Er,{present:r||i.open,children:g.jsx(Tn.Slot,{scope:e.__scopeMenu,children:g.jsx(Ri,{id:a.contentId,"aria-labelledby":a.triggerId,...o,ref:u,align:"start",side:s.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:d=>{var l;s.isUsingKeyboardRef.current&&((l=c.current)==null||l.focus()),d.preventDefault()},onCloseAutoFocus:d=>d.preventDefault(),onFocusOutside:fe(e.onFocusOutside,d=>{d.target!==a.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:fe(e.onEscapeKeyDown,d=>{s.onClose(),d.preventDefault()}),onKeyDown:fe(e.onKeyDown,d=>{var m;const l=d.currentTarget.contains(d.target),f=Dw[s.dir].includes(d.key);l&&f&&(i.onOpenChange(!1),(m=a.trigger)==null||m.focus(),d.preventDefault())})})})})})});Zl.displayName=ql;function Ql(e){return e?"open":"closed"}function _r(e){return e==="indeterminate"}function Li(e){return _r(e)?"indeterminate":e?"checked":"unchecked"}function qw(e){const t=document.activeElement;for(const n of e)if(n===t||(n.focus(),document.activeElement!==t))return}function Zw(e,t){return e.map((n,r)=>e[(t+r)%e.length])}function Qw(e,t,n){const o=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,i=n?e.indexOf(n):-1;let s=Zw(e,Math.max(i,0));o.length===1&&(s=s.filter(u=>u!==n));const c=s.find(u=>u.toLowerCase().startsWith(o.toLowerCase()));return c!==n?c:void 0}function Jw(e,t){const{x:n,y:r}=e;let o=!1;for(let i=0,s=t.length-1;i<t.length;s=i++){const a=t[i].x,c=t[i].y,u=t[s].x,d=t[s].y;c>r!=d>r&&n<(u-a)*(r-c)/(d-c)+a&&(o=!o)}return o}function eb(e,t){if(!t)return!1;const n={x:e.clientX,y:e.clientY};return Jw(n,t)}function kn(e){return t=>t.pointerType==="mouse"?e(t):void 0}var tb=Dl,nb=Ti,rb=Pl,ob=Ll,ib=Di,sb=jl,ab=Xr,cb=Ol,ub=Hl,lb=Bl,db=Xl,fb=Yl,hb=Wl,L2=Ul,mb=Kl,pb=Zl,ji="ContextMenu",[gb,j2]=An(ji,[kl]),Me=kl(),[yb,Jl]=gb(ji),ed=e=>{const{__scopeContextMenu:t,children:n,onOpenChange:r,dir:o,modal:i=!0}=e,[s,a]=h.useState(!1),c=Me(t),u=We(r),d=h.useCallback(l=>{a(l),u(l)},[u]);return g.jsx(yb,{scope:t,open:s,onOpenChange:d,modal:i,children:g.jsx(tb,{...c,dir:o,open:s,onOpenChange:d,modal:i,children:n})})};ed.displayName=ji;var td="ContextMenuTrigger",nd=h.forwardRef((e,t)=>{const{__scopeContextMenu:n,disabled:r=!1,...o}=e,i=Jl(td,n),s=Me(n),a=h.useRef({x:0,y:0}),c=h.useRef({getBoundingClientRect:()=>DOMRect.fromRect({width:0,height:0,...a.current})}),u=h.useRef(0),d=h.useCallback(()=>window.clearTimeout(u.current),[]),l=f=>{a.current={x:f.clientX,y:f.clientY},i.onOpenChange(!0)};return h.useEffect(()=>d,[d]),h.useEffect(()=>void(r&&d()),[r,d]),g.jsxs(g.Fragment,{children:[g.jsx(nb,{...s,virtualRef:c}),g.jsx(Se.span,{"data-state":i.open?"open":"closed","data-disabled":r?"":void 0,...o,ref:t,style:{WebkitTouchCallout:"none",...e.style},onContextMenu:r?e.onContextMenu:fe(e.onContextMenu,f=>{d(),l(f),f.preventDefault()}),onPointerDown:r?e.onPointerDown:fe(e.onPointerDown,Jn(f=>{d(),u.current=window.setTimeout(()=>l(f),700)})),onPointerMove:r?e.onPointerMove:fe(e.onPointerMove,Jn(d)),onPointerCancel:r?e.onPointerCancel:fe(e.onPointerCancel,Jn(d)),onPointerUp:r?e.onPointerUp:fe(e.onPointerUp,Jn(d))})]})});nd.displayName=td;var xb="ContextMenuPortal",rd=e=>{const{__scopeContextMenu:t,...n}=e,r=Me(t);return g.jsx(rb,{...r,...n})};rd.displayName=xb;var od="ContextMenuContent",id=h.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,o=Jl(od,n),i=Me(n),s=h.useRef(!1);return g.jsx(ob,{...i,...r,ref:t,side:"right",sideOffset:2,align:"start",onCloseAutoFocus:a=>{var c;(c=e.onCloseAutoFocus)==null||c.call(e,a),!a.defaultPrevented&&s.current&&a.preventDefault(),s.current=!1},onInteractOutside:a=>{var c;(c=e.onInteractOutside)==null||c.call(e,a),!a.defaultPrevented&&!o.modal&&(s.current=!0)},style:{...e.style,"--radix-context-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-context-menu-content-available-width":"var(--radix-popper-available-width)","--radix-context-menu-content-available-height":"var(--radix-popper-available-height)","--radix-context-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-context-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});id.displayName=od;var vb="ContextMenuGroup",wb=h.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,o=Me(n);return g.jsx(ib,{...o,...r,ref:t})});wb.displayName=vb;var bb="ContextMenuLabel",sd=h.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,o=Me(n);return g.jsx(sb,{...o,...r,ref:t})});sd.displayName=bb;var Cb="ContextMenuItem",ad=h.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,o=Me(n);return g.jsx(ab,{...o,...r,ref:t})});ad.displayName=Cb;var _b="ContextMenuCheckboxItem",cd=h.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,o=Me(n);return g.jsx(cb,{...o,...r,ref:t})});cd.displayName=_b;var Eb="ContextMenuRadioGroup",Sb=h.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,o=Me(n);return g.jsx(ub,{...o,...r,ref:t})});Sb.displayName=Eb;var Mb="ContextMenuRadioItem",ud=h.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,o=Me(n);return g.jsx(lb,{...o,...r,ref:t})});ud.displayName=Mb;var Nb="ContextMenuItemIndicator",ld=h.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,o=Me(n);return g.jsx(db,{...o,...r,ref:t})});ld.displayName=Nb;var Tb="ContextMenuSeparator",dd=h.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,o=Me(n);return g.jsx(fb,{...o,...r,ref:t})});dd.displayName=Tb;var kb="ContextMenuArrow",Ab=h.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,o=Me(n);return g.jsx(hb,{...o,...r,ref:t})});Ab.displayName=kb;var Rb="ContextMenuSubTrigger",fd=h.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,o=Me(n);return g.jsx(mb,{...o,...r,ref:t})});fd.displayName=Rb;var Db="ContextMenuSubContent",hd=h.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,o=Me(n);return g.jsx(pb,{...o,...r,ref:t,style:{...e.style,"--radix-context-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-context-menu-content-available-width":"var(--radix-popper-available-width)","--radix-context-menu-content-available-height":"var(--radix-popper-available-height)","--radix-context-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-context-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});hd.displayName=Db;function Jn(e){return t=>t.pointerType!=="mouse"?e(t):void 0}var Ib=ed,Pb=nd,Lb=rd,md=id,pd=sd,gd=ad,yd=cd,xd=ud,vd=ld,wd=dd,bd=fd,Cd=hd;const jb=Ib,$b=Pb,Ob=h.forwardRef(({className:e,inset:t,children:n,...r},o)=>g.jsxs(bd,{ref:o,className:_e("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground",t&&"pl-8",e),...r,children:[n,g.jsx(Ff,{className:"ml-auto size-4"})]}));Ob.displayName=bd.displayName;const Fb=h.forwardRef(({className:e,...t},n)=>g.jsx(Cd,{ref:n,className:_e("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t}));Fb.displayName=Cd.displayName;const _d=h.forwardRef(({className:e,...t},n)=>g.jsx(Lb,{children:g.jsx(md,{ref:n,className:_e("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t})}));_d.displayName=md.displayName;const fn=h.forwardRef(({className:e,inset:t,...n},r)=>g.jsx(gd,{ref:r,className:_e("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t&&"pl-8",e),...n}));fn.displayName=gd.displayName;const Hb=h.forwardRef(({className:e,children:t,checked:n,...r},o)=>g.jsxs(yd,{ref:o,className:_e("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:n,...r,children:[g.jsx("span",{className:"absolute left-2 flex size-3.5 items-center justify-center",children:g.jsx(vd,{children:g.jsx(jf,{className:"size-4"})})}),t]}));Hb.displayName=yd.displayName;const zb=h.forwardRef(({className:e,children:t,...n},r)=>g.jsxs(xd,{ref:r,className:_e("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[g.jsx("span",{className:"absolute left-2 flex size-3.5 items-center justify-center",children:g.jsx(vd,{children:g.jsx(Xf,{className:"size-4 fill-current"})})}),t]}));zb.displayName=xd.displayName;const Bb=h.forwardRef(({className:e,inset:t,...n},r)=>g.jsx(pd,{ref:r,className:_e("px-2 py-1.5 text-sm font-semibold text-foreground",t&&"pl-8",e),...n}));Bb.displayName=pd.displayName;const Vb=h.forwardRef(({className:e,...t},n)=>g.jsx(wd,{ref:n,className:_e("-mx-1 my-1 h-px bg-border",e),...t}));Vb.displayName=wd.displayName;const Xb=({children:e,table:t})=>{const{removeTable:n,readonly:r,createTable:o}=Nr(),{openTableFromSidebar:i}=Za(),{t:s}=xa(),{isMd:a}=dh("md"),{openCreateRelationshipDialog:c}=If(),u=h.useCallback(()=>{const m=ff(t);m.name=`${m.name}_copy`,m.x+=30,m.y+=50,o(m)},[o,t]),d=h.useCallback(()=>{i(t.id)},[i,t.id]),l=h.useCallback(()=>{n(t.id)},[n,t.id]),f=h.useCallback(()=>{c({sourceTableId:t.id})},[c,t.id]);return!a||r?g.jsx(g.Fragment,{children:e}):g.jsxs(jb,{children:[g.jsx($b,{children:e}),g.jsxs(_d,{children:[g.jsxs(fn,{onClick:d,className:"flex justify-between gap-3",children:[g.jsx("span",{children:s("table_node_context_menu.edit_table")}),g.jsx(cm,{className:"size-3.5"})]}),g.jsxs(fn,{onClick:u,className:"flex justify-between gap-3",children:[g.jsx("span",{children:s("table_node_context_menu.duplicate_table")}),g.jsx(im,{className:"size-3.5"})]}),g.jsxs(fn,{onClick:f,className:"flex justify-between gap-3",children:[g.jsx("span",{children:s("table_node_context_menu.add_relationship")}),g.jsx(lm,{className:"size-3.5"})]}),g.jsxs(fn,{onClick:l,className:"flex justify-between gap-3",children:[g.jsx("span",{children:s("table_node_context_menu.delete_table")}),g.jsx(dc,{className:"size-3.5 text-red-700"})]})]})]})},da="top_dep_",Yb="bottom_dep_",Eo="target_dep_",Ed=Ce.memo(({table:e,focused:t})=>{const{dependencies:n}=Nr(),r=Qu(),o=Ei(),i=h.useMemo(()=>{var c,u;return o.inProgress&&o.fromNode.id!==e.id&&(((c=o.fromHandle.id)==null?void 0:c.startsWith(da))||((u=o.fromHandle.id)==null?void 0:u.startsWith(Yb)))},[o,e.id]),s=h.useMemo(()=>n.filter(c=>c.tableId===e.id).length,[n,e.id]),a=h.useRef(s);return h.useEffect(()=>{a.current!==s&&(r(e.id),a.current=s)},[e.id,r,s]),g.jsxs(g.Fragment,{children:[e.isView||e.isMaterializedView?g.jsx(Fe,{id:`${da}${e.id}`,className:`!h-4 !w-4 !border-2 !bg-pink-600 ${t?"":"!invisible"}`,position:te.Top,type:"source"}):null,Array.from({length:s},(c,u)=>u).map(c=>g.jsx(Fe,{id:`${Eo}${c}_${e.id}`,className:"!invisible",position:te.Top,type:"target"},`${Eo}${c}_${e.id}`)),i?g.jsx(Fe,{id:`${Eo}${s}_${e.id}`,className:i?"!absolute !left-0 !top-0 !h-full !w-full !transform-none !rounded-none !border-none !opacity-0":"!invisible",position:te.Top,type:"target"}):null]})});Ed.displayName="TableNodeDependencyIndicator";const Wb=({status:e})=>e==="none"?null:g.jsx("div",{className:"absolute left-1/2 top-0 z-10 -translate-x-1/2 -translate-y-1/2",children:g.jsx("span",{className:_e("inline-flex items-center rounded-full px-2 py-0.5 text-xs font-medium text-white",{"bg-green-100 text-green-800 dark:bg-green-800 dark:text-green-100":e==="new","bg-sky-100 text-sky-800 dark:bg-sky-800 dark:text-sky-100":e==="changed","bg-red-100 text-red-800 dark:bg-red-800 dark:text-red-100":e==="removed"}),children:e==="new"?"New":e==="changed"?"Modified":"Deleted"})}),er=450,fa=337,gn=224,tr=10,Gb=Ce.memo(({selected:e,dragging:t,id:n,data:{table:r,isOverlapping:o,highlightOverlappingTables:i}})=>{const{updateTable:s,relationships:a,readonly:c}=Nr(),u=he(Y=>Y.edges),{openTableFromSidebar:d,selectSidebarSection:l}=Za(),[f,m]=h.useState(!1),{t:p}=xa(),[y,w]=h.useState(!1),[v,_]=h.useState(r.name),b=Ce.useRef(null),[x,N]=h.useState(!1),{getTableNewName:L,getTableNewColor:M,checkIfTableHasChange:T,checkIfNewTable:A,checkIfTableRemoved:I}=lr(),$=h.useMemo(()=>r.fields,[r.fields]),O=h.useMemo(()=>L({tableId:r.id}),[L,r.id]),F=h.useMemo(()=>M({tableId:r.id}),[M,r.id]),C=h.useMemo(()=>F||r.color,[F,r.color]),P=h.useMemo(()=>T({tableId:r.id}),[T,r.id]),E=h.useMemo(()=>A({tableId:r.id}),[A,r.id]),R=h.useMemo(()=>I({tableId:r.id}),[I,r.id]),D=u.filter(Y=>{var oe;return(Y.source===n||Y.target===n)&&(Y.selected||((oe=Y.data)==null?void 0:oe.highlighted))&&Y.type==="relationship-edge"}),k=!!e&&!t||x,H=()=>{l("tables"),d(r.id)},z=h.useCallback(()=>{s(r.id,{width:(r.width??gn)<fa?fa:er})},[r.id,r.width,s]),X=h.useCallback(()=>{s(r.id,{width:gn})},[r.id,s]),ee=()=>{m(!f)},K=h.useCallback(Y=>a.some(oe=>oe.sourceFieldId===Y.id||oe.targetFieldId===Y.id)||Y.primaryKey,[a]),Q=h.useMemo(()=>{if(f)return $;const Y=$.filter(ue=>K(ue)),oe=$.filter(ue=>!K(ue)),ae=Y.slice(0,tr),ne=tr-ae.length,J=oe.slice(0,ne);return[...ae,...J].sort((ue,ge)=>$.indexOf(ue)-$.indexOf(ge))},[f,$,K]),Z=h.useCallback(()=>{y&&(v.trim()&&s(r.id,{name:v.trim()}),w(!1))},[v,r.id,s,y]),re=h.useCallback(()=>{w(!1),_(r.name)},[r.name]);Sl(b,Z),br("Enter",Z),br("Escape",re);const U=Y=>{Y.stopPropagation(),w(!0)};return g.jsx(Xb,{table:r,children:g.jsxs("div",{className:_e("flex w-full flex-col border-2 bg-slate-50 dark:bg-slate-950 rounded-lg shadow-sm transition-transform duration-300",e?"border-pink-600":"border-slate-500 dark:border-slate-700",o?"ring-2 ring-offset-slate-50 dark:ring-offset-slate-900 ring-blue-500 ring-offset-2":"",!i&&o?"animate-scale":"",i&&o?"animate-scale-2":"",P&&!E&&!R?"outline outline-[3px] outline-sky-500 dark:outline-sky-900 outline-offset-[5px]":"",E?"outline outline-[3px] outline-green-500 dark:outline-green-900 outline-offset-[5px]":"",R?"outline outline-[3px] outline-red-500 dark:outline-red-900 outline-offset-[5px]":""),onClick:Y=>{Y.detail===2&&H()},onMouseEnter:()=>N(!0),onMouseLeave:()=>N(!1),children:[g.jsx(wv,{isVisible:k,lineClassName:"!border-none !w-2",minWidth:gn,maxWidth:er,shouldResize:Y=>Y.dy===0,handleClassName:"!hidden"}),g.jsx(Ed,{table:r,focused:k}),g.jsx(Wb,{status:E?"new":R?"removed":P?"changed":"none"}),g.jsx("div",{className:"h-2 rounded-t-[6px]",style:{backgroundColor:C}}),g.jsxs("div",{className:"group flex h-9 items-center justify-between bg-slate-200 px-2 dark:bg-slate-900",children:[g.jsxs("div",{className:"flex min-w-0 flex-1 items-center gap-2",children:[E?g.jsxs(sn,{children:[g.jsx(an,{asChild:!0,children:g.jsx(lc,{className:"size-3.5 shrink-0 text-green-600",strokeWidth:2.5})}),g.jsx(cn,{children:"New Table"})]}):R?g.jsxs(sn,{children:[g.jsx(an,{asChild:!0,children:g.jsx(uc,{className:"size-3.5 shrink-0 text-red-600",strokeWidth:2.5})}),g.jsx(cn,{children:"Table Removed"})]}):P?g.jsxs(sn,{children:[g.jsx(an,{asChild:!0,children:g.jsx(cc,{className:"size-3.5 shrink-0 text-sky-600",strokeWidth:2.5})}),g.jsx(cn,{children:"Table Changed"})]}):g.jsx(um,{className:"size-3.5 shrink-0 text-gray-600 dark:text-primary"}),O?g.jsxs(nn,{className:"flex h-5 items-center justify-center truncate rounded-sm bg-sky-200 px-2 py-0.5 text-sm font-normal text-sky-900 dark:bg-sky-800 dark:text-sky-200",children:[g.jsx("span",{className:"truncate",children:r.name}),g.jsx("span",{className:"mx-1 font-semibold",children:"→"}),g.jsx("span",{className:"truncate",children:O})]}):E?g.jsx(nn,{className:"flex h-5 flex-col justify-center truncate rounded-sm bg-green-200 px-2 py-0.5 text-sm font-normal text-green-900 dark:bg-green-800 dark:text-green-200",children:r.name}):R?g.jsx(nn,{className:"flex h-5 flex-col justify-center truncate rounded-sm bg-red-200 px-2 py-0.5 text-sm font-normal text-red-900 dark:bg-red-800 dark:text-red-200",children:r.name}):P?g.jsx(nn,{className:"flex h-5 flex-col justify-center truncate rounded-sm bg-sky-200 px-2 py-0.5 text-sm font-normal text-sky-900 dark:bg-sky-800 dark:text-sky-200",children:r.name}):y&&!c?g.jsxs(g.Fragment,{children:[g.jsx(Ni,{ref:b,onBlur:Z,placeholder:r.name,autoFocus:!0,type:"text",value:v,onClick:Y=>Y.stopPropagation(),onChange:Y=>_(Y.target.value),className:"h-6 w-full border-[0.5px] border-blue-400 bg-slate-100 focus-visible:ring-0 dark:bg-slate-900"}),g.jsx(hn,{variant:"ghost",className:"size-6 p-0 text-slate-500 hover:bg-primary-foreground hover:text-slate-700 dark:text-slate-400 dark:hover:bg-slate-800 dark:hover:text-slate-200",onClick:Z,children:g.jsx(ac,{className:"size-4"})})]}):g.jsxs(sn,{children:[g.jsx(an,{asChild:!0,children:g.jsx(nn,{className:"text-editable truncate px-2 py-0.5 text-sm font-bold",onDoubleClick:U,children:r.name})}),g.jsx(cn,{children:p("tool_tips.double_click_to_edit")})]})]}),g.jsxs("div",{className:"hidden shrink-0 flex-row group-hover:flex",children:[c||y?null:g.jsx(hn,{variant:"ghost",className:"size-6 p-0 text-slate-500 hover:bg-primary-foreground hover:text-slate-700 dark:text-slate-400 dark:hover:bg-slate-800 dark:hover:text-slate-200",onClick:H,children:g.jsx(om,{className:"size-4"})}),y?null:g.jsx(hn,{variant:"ghost",className:"size-6 p-0 text-slate-500 hover:bg-primary-foreground hover:text-slate-700 dark:text-slate-400 dark:hover:bg-slate-800 dark:hover:text-slate-200",onClick:r.width!==er?z:X,children:r.width!==er?g.jsx(nm,{className:"size-4"}):g.jsx(rm,{className:"size-4"})})]})]}),g.jsx("div",{className:"transition-[max-height] duration-200 ease-in-out",style:{maxHeight:f?`${$.length*2}rem`:`${tr*2}rem`},children:$.map(Y=>g.jsx(Ml,{focused:k,tableNodeId:n,field:Y,highlighted:D.some(oe=>{var ae,ne;return((ae=oe.data)==null?void 0:ae.relationship.sourceFieldId)===Y.id||((ne=oe.data)==null?void 0:ne.relationship.targetFieldId)===Y.id}),visible:Q.includes(Y),isConnectable:!r.isView},Y.id))}),$.length>tr&&g.jsx("div",{className:"z-10 flex h-8 cursor-pointer items-center justify-center rounded-b-md border-t text-xs text-muted-foreground transition-colors duration-200 hover:bg-slate-100 dark:hover:bg-slate-800",onClick:ee,children:f?g.jsxs(g.Fragment,{children:[g.jsx(tm,{className:"mr-1 size-3.5"}),p("show_less")]}):g.jsxs(g.Fragment,{children:[g.jsx(em,{className:"mr-1 size-3.5"}),p("show_more")]})})]})})});Gb.displayName="TableNode";const $2=({cardinality:e,selected:t,side:n})=>`cardinality_${t?"selected":"not_selected"}_${e}_${n}`,So=({node:e,table:t})=>{var a,c;const n=(e==null?void 0:e.id)??(t==null?void 0:t.id)??"",r=(e==null?void 0:e.position.x)??(t==null?void 0:t.x)??0,o=(e==null?void 0:e.position.y)??(t==null?void 0:t.y)??0,i=((a=e==null?void 0:e.measured)==null?void 0:a.width)??(e==null?void 0:e.data.table.width)??(t==null?void 0:t.width)??gn,s=e?((c=e==null?void 0:e.measured)==null?void 0:c.height)??oi((e==null?void 0:e.data.table.fields.length)??0):oi((t==null?void 0:t.fields.length)??0);return{id:n,left:r,right:r+i,top:o,bottom:o+s}},ha=({node:e,table:t},{nodes:n,tables:r},o)=>{const i=(e==null?void 0:e.id)??(t==null?void 0:t.id)??"",s=So(e?{node:e}:{table:t});for(const a of n??r??[]){if(i===a.id)continue;const u=So(!!n?{node:a}:{table:a});s.left<u.right&&s.right>u.left&&s.top<u.bottom&&s.bottom>u.top?o=hw(o,i,a.id):o=mw(o,i,a.id)}return o},O2=({tables:e,nodes:t})=>{let n=Cl();if(e)for(const r of e)n=ha({table:r},{tables:e},n);else for(const r of t)n=ha({node:r},{nodes:t},n);return n},oi=e=>Math.min(e,11)*32+48,F2=e=>{const t=e.fields.length,n=oi(t);return{width:e.width||gn,height:n}};export{st as $,g2 as A,Eo as B,Ff as C,da as D,Yb as E,C2 as F,ha as G,D2 as H,Ni as I,oi as J,O2 as K,ca as L,gn as M,wv as N,N2 as O,te as P,Nn as Q,Gx as R,h2 as S,_o as T,Gb as U,v2 as V,lm as W,d2 as X,cm as Y,w2 as Z,x2 as _,f2 as a,k2 as a$,ll as a0,sc as a1,vl as a2,Wa as a3,nw as a4,qa as a5,Qh as a6,hh as a7,oc as a8,wl as a9,om as aA,E2 as aB,b2 as aC,_2 as aD,sm as aE,am as aF,m2 as aG,r2 as aH,a2 as aI,o2 as aJ,L2 as aK,rl as aL,Wv as aM,Gv as aN,Ao as aO,xt as aP,wf as aQ,Cf as aR,_f as aS,u2 as aT,c2 as aU,fh as aV,dm as aW,fm as aX,ym as aY,Lv as aZ,T2 as a_,ci as aa,rw as ab,ow as ac,e2 as ad,jf as ae,n2 as af,t2 as ag,kl as ah,tb as ai,nb as aj,rb as ak,ob as al,ib as am,sb as an,fb as ao,ab as ap,cb as aq,ub as ar,lb as as,db as at,hb as au,mb as av,pb as aw,Xf as ax,im as ay,dc as az,Nr as b,M2 as b0,S2 as b1,em as b2,tm as b3,i2 as b4,Ev as b5,qy as b6,s2 as b7,Rv as b8,Df as b9,fw as ba,Cl as bb,pw as bc,pm as bd,gm as be,xa as c,Ci as d,lr as e,ua as f,qo as g,$2 as h,F2 as i,A2 as j,y2 as k,P2 as l,If as m,dh as n,jb as o,$b as p,_d as q,fn as r,Sl as s,br as t,Za as u,ac as v,l2 as w,R2 as x,I2 as y,p2 as z};
