import{r as c,j as i,T as O,e as A,f as L,_ as o,b as S}from"./index-D22tuFcn.js";import{e as P,f as v,g as I}from"./code-editor-CVERTBtE.js";import{M as N,D as R,L as k,S as z,E as C,a as M}from"./menu-5d140pYd.js";import{a as V,C as U}from"./canvas-FyVWAmZ1.js";import{b as B,c as $,u as G}from"./canvas-utils-C5DtV3-P.js";import{u as H,C as W,a as Z}from"./databases-C9KYyYJn.js";import{B as F}from"./badge-BBZzLzuh.js";import"./label-DEegoE4u.js";import"./theme-provider-qAUrzat1.js";import"./storage-provider-DM7k1KMT.js";import"./use-storage-CGFXC_qQ.js";import"./database-type-C2NNW5SW.js";import"./env-B5QThsD5.js";var K=["second","minute","hour","day","week","month","year"];function Y(e,t){if(t===0)return["just now","right now"];var r=K[Math.floor(t/2)];return e>1&&(r+="s"),[e+" "+r+" ago","in "+e+" "+r]}var q=["秒","分钟","小时","天","周","个月","年"];function J(e,t){if(t===0)return["刚刚","片刻后"];var r=q[~~(t/2)];return[e+" "+r+"前",e+" "+r+"后"]}var f={},p=function(e,t){f[e]=t},b=function(e){return f[e]||f.en_US},l=[60,60,24,7,365/7/12,12];function g(e){return e instanceof Date?e:!isNaN(e)||/^\d+$/.test(e)?new Date(parseInt(e)):(e=(e||"").trim().replace(/\.\d+/,"").replace(/-/,"/").replace(/-/,"/").replace(/(\d)T(\d)/,"$1 $2").replace(/Z/," UTC").replace(/([+-]\d\d):?(\d\d)/," $1$2"),new Date(e))}function y(e,t){var r=e<0?1:0;e=Math.abs(e);for(var a=e,n=0;e>=l[n]&&n<l.length;n++)e/=l[n];return e=Math.floor(e),n*=2,e>(n===0?9:1)&&(n+=1),t(e,n,a)[r].replace("%s",e.toString())}function w(e,t){var r=t?g(t):new Date;return(+r-+g(e))/1e3}function Q(e){for(var t=1,r=0,a=Math.abs(e);e>=l[r]&&r<l.length;r++)e/=l[r],t*=l[r];return a=a%t,a=a?t-a:t,Math.ceil(a)}var X=function(e,t,r){var a=w(e,r&&r.relativeDate);return y(a,b(t))},j="timeago-id";function ee(e){return e.getAttribute("datetime")}function te(e,t){e.setAttribute(j,t)}function T(e){return parseInt(e.getAttribute(j))}var h={},_=function(e){clearTimeout(e),delete h[e]};function E(e,t,r,a){_(T(e));var n=a.relativeDate,s=a.minInterval,u=w(t,n);e.innerText=y(u,r);var d=setTimeout(function(){E(e,t,r,a)},Math.min(Math.max(Q(u),s||1)*1e3,2147483647));h[d]=0,te(e,d)}function x(e){e?_(T(e)):Object.keys(h).forEach(_)}function ae(e,t,r){var a=e.length?e:[e];return a.forEach(function(n){E(n,ee(n),b(t),r||{})}),a}p("en_US",Y);p("zh_CN",J);var re=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,n){a.__proto__=n}||function(a,n){for(var s in n)n.hasOwnProperty(s)&&(a[s]=n[s])},e(t,r)};return function(t,r){e(t,r);function a(){this.constructor=t}t.prototype=r===null?Object.create(r):(a.prototype=r.prototype,new a)}}(),m=function(){return m=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++){t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},m.apply(this,arguments)},ne=function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,a=Object.getOwnPropertySymbols(e);n<a.length;n++)t.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(e,a[n])&&(r[a[n]]=e[a[n]]);return r},ie=function(e){return""+(e instanceof Date?e.getTime():e)},oe=function(e){re(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.dom=null,r}return t.prototype.componentDidMount=function(){this.renderTimeAgo()},t.prototype.componentDidUpdate=function(){this.renderTimeAgo()},t.prototype.renderTimeAgo=function(){var r=this.props,a=r.live,n=r.datetime,s=r.locale,u=r.opts;x(this.dom),a!==!1&&(this.dom.setAttribute("datetime",ie(n)),ae(this.dom,s,u))},t.prototype.componentWillUnmount=function(){x(this.dom)},t.prototype.render=function(){var r=this,a=this.props,n=a.datetime;a.live;var s=a.locale,u=a.opts,d=ne(a,["datetime","live","locale","opts"]);return c.createElement("time",m({ref:function(D){r.dom=D}},d),X(n,s,u))},t.defaultProps={live:!0,className:""},t}(c.PureComponent);const se=async e=>{let t,r;switch(e){case"es":t=(await o(async()=>{const{default:a}=await import("./es-CwHy4vRY.js").then(n=>n.e);return{default:a}},[])).default,r="es";break;case"fr":t=(await o(async()=>{const{default:a}=await import("./fr-B5EyHKn9.js").then(n=>n.f);return{default:a}},[])).default,r="fr";break;case"de":t=(await o(async()=>{const{default:a}=await import("./de-CgE-SmEY.js").then(n=>n.d);return{default:a}},[])).default,r="de";break;case"hi":t=(await o(async()=>{const{default:a}=await import("./hi_IN-BgYk_6Tq.js").then(n=>n.h);return{default:a}},[])).default,r="hi_IN";break;case"ja":t=(await o(async()=>{const{default:a}=await import("./ja-Dcpruwcl.js").then(n=>n.j);return{default:a}},[])).default,r="ja";break;case"ko_KR":t=(await o(async()=>{const{default:a}=await import("./ko-CDLnF5OP.js").then(n=>n.k);return{default:a}},[])).default,r="ko";break;case"ru":t=(await o(async()=>{const{default:a}=await import("./ru-BQXwnNcW.js").then(n=>n.r);return{default:a}},[])).default,r="ru";break;case"zh_CN":t=(await o(async()=>{const{default:a}=await import("./zh_CN-D9rcKTH4.js").then(n=>n.z);return{default:a}},[])).default,r="zh_CN";break;case"zh_TW":t=(await o(async()=>{const{default:a}=await import("./zh_TW-BQQtW3fC.js").then(n=>n.z);return{default:a}},[])).default,r="zh_TW";break;case"pt_BR":t=(await o(async()=>{const{default:a}=await import("./pt_BR-id_jqCUF.js").then(n=>n.p);return{default:a}},[])).default,r="pt_BR";break;case"bn":t=(await o(async()=>{const{default:a}=await import("./bn_IN-CiT_Op5m.js").then(n=>n.b);return{default:a}},[])).default,r="bn";break;default:t=(await o(async()=>{const{default:a}=await import("./en_US-BdsvjnLJ.js").then(n=>n.e);return{default:a}},[])).default,r="en_US";break}return{locale:t,lang:r}},ue=()=>{const{currentDiagram:e}=B(),{i18n:t}=$(),[r,a]=c.useState("en_US");return c.useEffect(()=>{(async()=>{const{locale:s,lang:u}=await se(t.language);p(t.language,s),a(u)})()},[t.language]),i.jsxs(O,{children:[i.jsx(A,{children:i.jsxs(F,{variant:"secondary",className:"flex gap-1.5 whitespace-nowrap",children:[i.jsx(V,{size:16}),i.jsx(oe,{datetime:e.updatedAt,locale:r})]})}),i.jsx(L,{children:e.updatedAt.toLocaleString()})]})},le=()=>{const{effectiveTheme:e}=H(),t=c.useCallback(()=>i.jsx("iframe",{src:"https://ghbtns.com/github-btn.html?user=chartdb&repo=chartdb&type=star&size=large&text=false",width:"40",height:"30",title:"GitHub"}),[]);return i.jsxs("nav",{className:"flex flex-col justify-between border-b px-3 md:h-12 md:flex-row md:items-center md:px-4",children:[i.jsxs("div",{className:"flex flex-1 flex-col justify-between gap-x-1 md:flex-row md:justify-normal",children:[i.jsx("div",{className:"flex items-center justify-between pt-[8px] font-primary md:py-[10px]",children:i.jsx("a",{href:"https://chartdb.io",className:"cursor-pointer",rel:"noreferrer",children:i.jsx("img",{src:e==="light"?W:Z,alt:"chartDB",className:"h-4 max-w-fit"})})}),i.jsx(N,{})]}),i.jsx(R,{}),i.jsxs("div",{className:"hidden flex-1 items-center justify-end gap-2 sm:flex",children:[i.jsx(ue,{}),t(),i.jsx(k,{})]})]})},je=({initialDiagram:e})=>{const{isSidePanelShowed:t}=G();return i.jsxs(i.Fragment,{children:[i.jsx(le,{}),i.jsxs(z,{defaultOpen:!1,open:!1,className:"h-full min-h-0",children:[i.jsx(C,{}),i.jsxs(P,{direction:"horizontal",children:[i.jsx(v,{defaultSize:25,minSize:25,maxSize:t?99:0,className:S("transition-[flex-grow] duration-200",{"min-w-[350px]":t}),children:i.jsx(M,{})}),i.jsx(I,{disabled:!t,className:t?"":"hidden"}),i.jsx(v,{defaultSize:75,children:i.jsx(U,{initialTables:(e==null?void 0:e.tables)??[]})})]})]})]})};export{je as EditorDesktopLayout,je as default};
